(()=>{var nd=Object.create;var nn=Object.defineProperty,id=Object.defineProperties,od=Object.getOwnPropertyDescriptor,cd=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertyNames,Co=Object.getOwnPropertySymbols,ud=Object.getPrototypeOf,Mo=Object.prototype.hasOwnProperty,dd=Object.prototype.propertyIsEnumerable;var sn=(t,e,r)=>e in t?nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e)=>{for(var r in e||(e={}))Mo.call(e,r)&&sn(t,r,e[r]);if(Co)for(var r of Co(e))dd.call(e,r)&&sn(t,r,e[r]);return t},Re=(t,e)=>id(t,cd(e));var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var fd=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ld(e))!Mo.call(t,s)&&s!==r&&nn(t,s,{get:()=>e[s],enumerable:!(a=od(e,s))||a.enumerable});return t};var md=(t,e,r)=>(r=t!=null?nd(ud(t)):{},fd(e||!t||!t.__esModule?nn(r,"default",{value:t,enumerable:!0}):r,t));var ct=(t,e,r)=>(sn(t,typeof e!="symbol"?e+"":e,r),r),on=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var y=(t,e,r)=>(on(t,e,"read from private field"),r?r.call(t):e.get(t)),C=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},T=(t,e,r,a)=>(on(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),ts=(t,e,r,a)=>({set _(s){T(t,e,s,r)},get _(){return y(t,e,a)}}),ce=(t,e,r)=>(on(t,e,"access private method"),r);var Sa=M(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.regexpCode=U.getEsmExportName=U.getProperty=U.safeStringify=U.stringify=U.strConcat=U.addCodeArg=U.str=U._=U.nil=U._Code=U.Name=U.IDENTIFIER=U._CodeOrName=void 0;var Ea=class{};U._CodeOrName=Ea;U.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var er=class extends Ea{constructor(e){if(super(),!U.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};U.Name=er;var qe=class extends Ea{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,a)=>`${r}${a}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,a)=>(a instanceof er&&(r[a.str]=(r[a.str]||0)+1),r),{})}};U._Code=qe;U.nil=new qe("");function cc(t,...e){let r=[t[0]],a=0;for(;a<e.length;)Cn(r,e[a]),r.push(t[++a]);return new qe(r)}U._=cc;var Sn=new qe("+");function lc(t,...e){let r=[wa(t[0])],a=0;for(;a<e.length;)r.push(Sn),Cn(r,e[a]),r.push(Sn,wa(t[++a]));return kd(r),new qe(r)}U.str=lc;function Cn(t,e){e instanceof qe?t.push(...e._items):e instanceof er?t.push(e):t.push(qd(e))}U.addCodeArg=Cn;function kd(t){let e=1;for(;e<t.length-1;){if(t[e]===Sn){let r=Rd(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Rd(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof er||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof er))return`"${t}${e.slice(1)}`}function Od(t,e){return e.emptyStr()?t:t.emptyStr()?e:lc`${t}${e}`}U.strConcat=Od;function qd(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:wa(Array.isArray(t)?t.join(","):t)}function Ad(t){return new qe(wa(t))}U.stringify=Ad;function wa(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}U.safeStringify=wa;function jd(t){return typeof t=="string"&&U.IDENTIFIER.test(t)?new qe(`.${t}`):cc`[${t}]`}U.getProperty=jd;function Ld(t){if(typeof t=="string"&&U.IDENTIFIER.test(t))return new qe(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}U.getEsmExportName=Ld;function xd(t){return new qe(t.toString())}U.regexpCode=xd});var Nn=M(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.ValueScope=be.ValueScopeName=be.Scope=be.varKinds=be.UsedValueState=void 0;var Se=Sa(),Mn=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Tn;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Tn=be.UsedValueState||(be.UsedValueState={}));be.varKinds={const:new Se.Name("const"),let:new Se.Name("let"),var:new Se.Name("var")};var $s=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Se.Name?e:this.name(e)}name(e){return new Se.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,a;if(((a=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||a===void 0?void 0:a.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};be.Scope=$s;var bs=class extends Se.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:a}){this.value=e,this.scopePath=(0,Se._)`.${new Se.Name(r)}[${a}]`}};be.ValueScopeName=bs;var Vd=(0,Se._)`\n`,Pn=class extends $s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=Re(se({},e),{_n:e.lines?Vd:Se.nil})}get(){return this._scope}name(e){return new bs(e,this._newName(e))}value(e,r){var a;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:n}=s,i=(a=r.key)!==null&&a!==void 0?a:r.ref,c=this._values[n];if(c){let m=c.get(i);if(m)return m}else c=this._values[n]=new Map;c.set(i,s);let d=this._scope[n]||(this._scope[n]=[]),f=d.length;return d[f]=r.ref,s.setValue(r,{property:n,itemIndex:f}),s}getValue(e,r){let a=this._values[e];if(!!a)return a.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,a=>{if(a.scopePath===void 0)throw new Error(`CodeGen: name "${a}" has no value`);return(0,Se._)`${e}${a.scopePath}`})}scopeCode(e=this._values,r,a){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,a)}_reduceValues(e,r,a={},s){let n=Se.nil;for(let i in e){let c=e[i];if(!c)continue;let d=a[i]=a[i]||new Map;c.forEach(f=>{if(d.has(f))return;d.set(f,Tn.Started);let m=r(f);if(m){let h=this.opts.es5?be.varKinds.var:be.varKinds.const;n=(0,Se._)`${n}${h} ${f} = ${m};${this.opts._n}`}else if(m=s==null?void 0:s(f))n=(0,Se._)`${n}${m}${this.opts._n}`;else throw new Mn(f);d.set(f,Tn.Completed)})}return n}};be.ValueScope=Pn});var j=M(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.or=q.and=q.not=q.CodeGen=q.operators=q.varKinds=q.ValueScopeName=q.ValueScope=q.Scope=q.Name=q.regexpCode=q.stringify=q.getProperty=q.nil=q.strConcat=q.str=q._=void 0;var x=Sa(),Fe=Nn(),Pt=Sa();Object.defineProperty(q,"_",{enumerable:!0,get:function(){return Pt._}});Object.defineProperty(q,"str",{enumerable:!0,get:function(){return Pt.str}});Object.defineProperty(q,"strConcat",{enumerable:!0,get:function(){return Pt.strConcat}});Object.defineProperty(q,"nil",{enumerable:!0,get:function(){return Pt.nil}});Object.defineProperty(q,"getProperty",{enumerable:!0,get:function(){return Pt.getProperty}});Object.defineProperty(q,"stringify",{enumerable:!0,get:function(){return Pt.stringify}});Object.defineProperty(q,"regexpCode",{enumerable:!0,get:function(){return Pt.regexpCode}});Object.defineProperty(q,"Name",{enumerable:!0,get:function(){return Pt.Name}});var Cs=Nn();Object.defineProperty(q,"Scope",{enumerable:!0,get:function(){return Cs.Scope}});Object.defineProperty(q,"ValueScope",{enumerable:!0,get:function(){return Cs.ValueScope}});Object.defineProperty(q,"ValueScopeName",{enumerable:!0,get:function(){return Cs.ValueScopeName}});Object.defineProperty(q,"varKinds",{enumerable:!0,get:function(){return Cs.varKinds}});q.operators={GT:new x._Code(">"),GTE:new x._Code(">="),LT:new x._Code("<"),LTE:new x._Code("<="),EQ:new x._Code("==="),NEQ:new x._Code("!=="),NOT:new x._Code("!"),OR:new x._Code("||"),AND:new x._Code("&&"),ADD:new x._Code("+")};var gt=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Dn=class extends gt{constructor(e,r,a){super(),this.varKind=e,this.name=r,this.rhs=a}render({es5:e,_n:r}){let a=e?Fe.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${a} ${this.name}${s};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=xr(this.rhs,e,r)),this}get names(){return this.rhs instanceof x._CodeOrName?this.rhs.names:{}}},Es=class extends gt{constructor(e,r,a){super(),this.lhs=e,this.rhs=r,this.sideEffects=a}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof x.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=xr(this.rhs,e,r),this}get names(){let e=this.lhs instanceof x.Name?{}:se({},this.lhs.names);return Ss(e,this.rhs)}},In=class extends Es{constructor(e,r,a,s){super(e,a,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},kn=class extends gt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Rn=class extends gt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},On=class extends gt{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},qn=class extends gt{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=xr(this.code,e,r),this}get names(){return this.code instanceof x._CodeOrName?this.code.names:{}}},Ca=class extends gt{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,a)=>r+a.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let a=e[r].optimizeNodes();Array.isArray(a)?e.splice(r,1,...a):a?e[r]=a:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:a}=this,s=a.length;for(;s--;){let n=a[s];n.optimizeNames(e,r)||(Fd(e,n.names),a.splice(s,1))}return a.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>rr(e,r.names),{})}},yt=class extends Ca{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},An=class extends Ca{},Lr=class extends yt{};Lr.kind="else";var He=class extends yt{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let a=r.optimizeNodes();r=this.else=Array.isArray(a)?new Lr(a):a}if(r)return e===!1?r instanceof He?r:r.nodes:this.nodes.length?this:new He(uc(e),r instanceof He?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var a;if(this.else=(a=this.else)===null||a===void 0?void 0:a.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=xr(this.condition,e,r),this}get names(){let e=super.names;return Ss(e,this.condition),this.else&&rr(e,this.else.names),e}};He.kind="if";var tr=class extends yt{};tr.kind="for";var jn=class extends tr{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=xr(this.iteration,e,r),this}get names(){return rr(super.names,this.iteration.names)}},Ln=class extends tr{constructor(e,r,a,s){super(),this.varKind=e,this.name=r,this.from=a,this.to=s}render(e){let r=e.es5?Fe.varKinds.var:this.varKind,{name:a,from:s,to:n}=this;return`for(${r} ${a}=${s}; ${a}<${n}; ${a}++)`+super.render(e)}get names(){let e=Ss(super.names,this.from);return Ss(e,this.to)}},ws=class extends tr{constructor(e,r,a,s){super(),this.loop=e,this.varKind=r,this.name=a,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=xr(this.iterable,e,r),this}get names(){return rr(super.names,this.iterable.names)}},Ma=class extends yt{constructor(e,r,a){super(),this.name=e,this.args=r,this.async=a}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Ma.kind="func";var Ta=class extends Ca{render(e){return"return "+super.render(e)}};Ta.kind="return";var xn=class extends yt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var a,s;return super.optimizeNames(e,r),(a=this.catch)===null||a===void 0||a.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&rr(e,this.catch.names),this.finally&&rr(e,this.finally.names),e}},Pa=class extends yt{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Pa.kind="catch";var Na=class extends yt{render(e){return"finally"+super.render(e)}};Na.kind="finally";var Vn=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=Re(se({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new Fe.Scope({parent:e}),this._nodes=[new An]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let a=this._extScope.value(e,r);return(this._values[a.prefix]||(this._values[a.prefix]=new Set)).add(a),a}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,a,s){let n=this._scope.toName(r);return a!==void 0&&s&&(this._constants[n.str]=a),this._leafNode(new Dn(e,n,a)),n}const(e,r,a){return this._def(Fe.varKinds.const,e,r,a)}let(e,r,a){return this._def(Fe.varKinds.let,e,r,a)}var(e,r,a){return this._def(Fe.varKinds.var,e,r,a)}assign(e,r,a){return this._leafNode(new Es(e,r,a))}add(e,r){return this._leafNode(new In(e,q.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==x.nil&&this._leafNode(new qn(e)),this}object(...e){let r=["{"];for(let[a,s]of e)r.length>1&&r.push(","),r.push(a),(a!==s||this.opts.es5)&&(r.push(":"),(0,x.addCodeArg)(r,s));return r.push("}"),new x._Code(r)}if(e,r,a){if(this._blockNode(new He(e)),r&&a)this.code(r).else().code(a).endIf();else if(r)this.code(r).endIf();else if(a)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new He(e))}else(){return this._elseNode(new Lr)}endIf(){return this._endBlockNode(He,Lr)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new jn(e),r)}forRange(e,r,a,s,n=this.opts.es5?Fe.varKinds.var:Fe.varKinds.let){let i=this._scope.toName(e);return this._for(new Ln(n,i,r,a),()=>s(i))}forOf(e,r,a,s=Fe.varKinds.const){let n=this._scope.toName(e);if(this.opts.es5){let i=r instanceof x.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,x._)`${i}.length`,c=>{this.var(n,(0,x._)`${i}[${c}]`),a(n)})}return this._for(new ws("of",s,n,r),()=>a(n))}forIn(e,r,a,s=this.opts.es5?Fe.varKinds.var:Fe.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,x._)`Object.keys(${r})`,a);let n=this._scope.toName(e);return this._for(new ws("in",s,n,r),()=>a(n))}endFor(){return this._endBlockNode(tr)}label(e){return this._leafNode(new kn(e))}break(e){return this._leafNode(new Rn(e))}return(e){let r=new Ta;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Ta)}try(e,r,a){if(!r&&!a)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new xn;if(this._blockNode(s),this.code(e),r){let n=this.name("e");this._currNode=s.catch=new Pa(n),r(n)}return a&&(this._currNode=s.finally=new Na,this.code(a)),this._endBlockNode(Pa,Na)}throw(e){return this._leafNode(new On(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let a=this._nodes.length-r;if(a<0||e!==void 0&&a!==e)throw new Error(`CodeGen: wrong number of nodes: ${a} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=x.nil,a,s){return this._blockNode(new Ma(e,r,a)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Ma)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let a=this._currNode;if(a instanceof e||r&&a instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof He))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};q.CodeGen=Vn;function rr(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Ss(t,e){return e instanceof x._CodeOrName?rr(t,e.names):t}function xr(t,e,r){if(t instanceof x.Name)return a(t);if(!s(t))return t;return new x._Code(t._items.reduce((n,i)=>(i instanceof x.Name&&(i=a(i)),i instanceof x._Code?n.push(...i._items):n.push(i),n),[]));function a(n){let i=r[n.str];return i===void 0||e[n.str]!==1?n:(delete e[n.str],i)}function s(n){return n instanceof x._Code&&n._items.some(i=>i instanceof x.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Fd(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function uc(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,x._)`!${Fn(t)}`}q.not=uc;var Hd=dc(q.operators.AND);function Ud(...t){return t.reduce(Hd)}q.and=Ud;var zd=dc(q.operators.OR);function Gd(...t){return t.reduce(zd)}q.or=Gd;function dc(t){return(e,r)=>e===x.nil?r:r===x.nil?e:(0,x._)`${Fn(e)} ${t} ${Fn(r)}`}function Fn(t){return t instanceof x.Name?t:(0,x._)`(${t})`}});var z=M(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.checkStrictMode=A.getErrorPath=A.Type=A.useFunc=A.setEvaluated=A.evaluatedPropsToName=A.mergeEvaluated=A.eachItem=A.unescapeJsonPointer=A.escapeJsonPointer=A.escapeFragment=A.unescapeFragment=A.schemaRefOrVal=A.schemaHasRulesButRef=A.schemaHasRules=A.checkUnknownRules=A.alwaysValidSchema=A.toHash=void 0;var X=j(),Kd=Sa();function Bd(t){let e={};for(let r of t)e[r]=!0;return e}A.toHash=Bd;function Jd(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(hc(t,e),!pc(e,t.self.RULES.all))}A.alwaysValidSchema=Jd;function hc(t,e=t.schema){let{opts:r,self:a}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=a.RULES.keywords;for(let n in e)s[n]||_c(t,`unknown keyword: "${n}"`)}A.checkUnknownRules=hc;function pc(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}A.schemaHasRules=pc;function Wd(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}A.schemaHasRulesButRef=Wd;function Qd({topSchemaRef:t,schemaPath:e},r,a,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,X._)`${r}`}return(0,X._)`${t}${e}${(0,X.getProperty)(a)}`}A.schemaRefOrVal=Qd;function Xd(t){return gc(decodeURIComponent(t))}A.unescapeFragment=Xd;function Yd(t){return encodeURIComponent(Hn(t))}A.escapeFragment=Yd;function Hn(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}A.escapeJsonPointer=Hn;function gc(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}A.unescapeJsonPointer=gc;function Zd(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}A.eachItem=Zd;function fc({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:a}){return(s,n,i,c)=>{let d=i===void 0?n:i instanceof X.Name?(n instanceof X.Name?t(s,n,i):e(s,n,i),i):n instanceof X.Name?(e(s,i,n),n):r(n,i);return c===X.Name&&!(d instanceof X.Name)?a(s,d):d}}A.mergeEvaluated={props:fc({mergeNames:(t,e,r)=>t.if((0,X._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,X._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,X._)`${r} || {}`).code((0,X._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,X._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,X._)`${r} || {}`),Un(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:se(se({},t),e),resultToName:yc}),items:fc({mergeNames:(t,e,r)=>t.if((0,X._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,X._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,X._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,X._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function yc(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,X._)`{}`);return e!==void 0&&Un(t,r,e),r}A.evaluatedPropsToName=yc;function Un(t,e,r){Object.keys(r).forEach(a=>t.assign((0,X._)`${e}${(0,X.getProperty)(a)}`,!0))}A.setEvaluated=Un;var mc={};function ef(t,e){return t.scopeValue("func",{ref:e,code:mc[e.code]||(mc[e.code]=new Kd._Code(e.code))})}A.useFunc=ef;var vc;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(vc=A.Type||(A.Type={}));function tf(t,e,r){if(t instanceof X.Name){let a=e===vc.Num;return r?a?(0,X._)`"[" + ${t} + "]"`:(0,X._)`"['" + ${t} + "']"`:a?(0,X._)`"/" + ${t}`:(0,X._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,X.getProperty)(t).toString():"/"+Hn(t)}A.getErrorPath=tf;function _c(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}A.checkStrictMode=_c});var vt=M(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});var ye=j(),rf={data:new ye.Name("data"),valCxt:new ye.Name("valCxt"),instancePath:new ye.Name("instancePath"),parentData:new ye.Name("parentData"),parentDataProperty:new ye.Name("parentDataProperty"),rootData:new ye.Name("rootData"),dynamicAnchors:new ye.Name("dynamicAnchors"),vErrors:new ye.Name("vErrors"),errors:new ye.Name("errors"),this:new ye.Name("this"),self:new ye.Name("self"),scope:new ye.Name("scope"),json:new ye.Name("json"),jsonPos:new ye.Name("jsonPos"),jsonLen:new ye.Name("jsonLen"),jsonPart:new ye.Name("jsonPart")};zn.default=rf});var Da=M(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.extendErrors=ve.resetErrorsCount=ve.reportExtraError=ve.reportError=ve.keyword$DataError=ve.keywordError=void 0;var F=j(),Ms=z(),Ee=vt();ve.keywordError={message:({keyword:t})=>(0,F.str)`must pass "${t}" keyword validation`};ve.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,F.str)`"${t}" keyword must be ${e} ($data)`:(0,F.str)`"${t}" keyword is invalid ($data)`};function af(t,e=ve.keywordError,r,a){let{it:s}=t,{gen:n,compositeRule:i,allErrors:c}=s,d=Ec(t,e,r);(a!=null?a:i||c)?$c(n,d):bc(s,(0,F._)`[${d}]`)}ve.reportError=af;function sf(t,e=ve.keywordError,r){let{it:a}=t,{gen:s,compositeRule:n,allErrors:i}=a,c=Ec(t,e,r);$c(s,c),n||i||bc(a,Ee.default.vErrors)}ve.reportExtraError=sf;function nf(t,e){t.assign(Ee.default.errors,e),t.if((0,F._)`${Ee.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,F._)`${Ee.default.vErrors}.length`,e),()=>t.assign(Ee.default.vErrors,null)))}ve.resetErrorsCount=nf;function of({gen:t,keyword:e,schemaValue:r,data:a,errsCount:s,it:n}){if(s===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",s,Ee.default.errors,c=>{t.const(i,(0,F._)`${Ee.default.vErrors}[${c}]`),t.if((0,F._)`${i}.instancePath === undefined`,()=>t.assign((0,F._)`${i}.instancePath`,(0,F.strConcat)(Ee.default.instancePath,n.errorPath))),t.assign((0,F._)`${i}.schemaPath`,(0,F.str)`${n.errSchemaPath}/${e}`),n.opts.verbose&&(t.assign((0,F._)`${i}.schema`,r),t.assign((0,F._)`${i}.data`,a))})}ve.extendErrors=of;function $c(t,e){let r=t.const("err",e);t.if((0,F._)`${Ee.default.vErrors} === null`,()=>t.assign(Ee.default.vErrors,(0,F._)`[${r}]`),(0,F._)`${Ee.default.vErrors}.push(${r})`),t.code((0,F._)`${Ee.default.errors}++`)}function bc(t,e){let{gen:r,validateName:a,schemaEnv:s}=t;s.$async?r.throw((0,F._)`new ${t.ValidationError}(${e})`):(r.assign((0,F._)`${a}.errors`,e),r.return(!1))}var ar={keyword:new F.Name("keyword"),schemaPath:new F.Name("schemaPath"),params:new F.Name("params"),propertyName:new F.Name("propertyName"),message:new F.Name("message"),schema:new F.Name("schema"),parentSchema:new F.Name("parentSchema")};function Ec(t,e,r){let{createErrors:a}=t.it;return a===!1?(0,F._)`{}`:cf(t,e,r)}function cf(t,e,r={}){let{gen:a,it:s}=t,n=[lf(s,r),uf(t,r)];return df(t,e,n),a.object(...n)}function lf({errorPath:t},{instancePath:e}){let r=e?(0,F.str)`${t}${(0,Ms.getErrorPath)(e,Ms.Type.Str)}`:t;return[Ee.default.instancePath,(0,F.strConcat)(Ee.default.instancePath,r)]}function uf({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:a}){let s=a?e:(0,F.str)`${e}/${t}`;return r&&(s=(0,F.str)`${s}${(0,Ms.getErrorPath)(r,Ms.Type.Str)}`),[ar.schemaPath,s]}function df(t,{params:e,message:r},a){let{keyword:s,data:n,schemaValue:i,it:c}=t,{opts:d,propertyName:f,topSchemaRef:m,schemaPath:h}=c;a.push([ar.keyword,s],[ar.params,typeof e=="function"?e(t):e||(0,F._)`{}`]),d.messages&&a.push([ar.message,typeof r=="function"?r(t):r]),d.verbose&&a.push([ar.schema,i],[ar.parentSchema,(0,F._)`${m}${h}`],[Ee.default.data,n]),f&&a.push([ar.propertyName,f])}});var Sc=M(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.boolOrEmptySchema=Vr.topBoolOrEmptySchema=void 0;var ff=Da(),mf=j(),hf=vt(),pf={message:"boolean schema is false"};function gf(t){let{gen:e,schema:r,validateName:a}=t;r===!1?wc(t,!1):typeof r=="object"&&r.$async===!0?e.return(hf.default.data):(e.assign((0,mf._)`${a}.errors`,null),e.return(!0))}Vr.topBoolOrEmptySchema=gf;function yf(t,e){let{gen:r,schema:a}=t;a===!1?(r.var(e,!1),wc(t)):r.var(e,!0)}Vr.boolOrEmptySchema=yf;function wc(t,e){let{gen:r,data:a}=t,s={gen:r,keyword:"false schema",data:a,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,ff.reportError)(s,pf,void 0,e)}});var Gn=M(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.getRules=Fr.isJSONType=void 0;var vf=["string","number","integer","boolean","null","object","array"],_f=new Set(vf);function $f(t){return typeof t=="string"&&_f.has(t)}Fr.isJSONType=$f;function bf(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:Re(se({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Fr.getRules=bf});var Kn=M(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.shouldUseRule=Nt.shouldUseGroup=Nt.schemaHasRulesForType=void 0;function Ef({schema:t,self:e},r){let a=e.RULES.types[r];return a&&a!==!0&&Cc(t,a)}Nt.schemaHasRulesForType=Ef;function Cc(t,e){return e.rules.some(r=>Mc(t,r))}Nt.shouldUseGroup=Cc;function Mc(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(a=>t[a]!==void 0))}Nt.shouldUseRule=Mc});var ka=M(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.reportTypeError=fe.checkDataTypes=fe.checkDataType=fe.coerceAndCheckDataType=fe.getJSONTypes=fe.getSchemaTypes=fe.DataType=void 0;var wf=Gn(),Sf=Kn(),Cf=Da(),R=j(),Tc=z(),Ia;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Ia=fe.DataType||(fe.DataType={}));function Mf(t){let e=Pc(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}fe.getSchemaTypes=Mf;function Pc(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(wf.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}fe.getJSONTypes=Pc;function Tf(t,e){let{gen:r,data:a,opts:s}=t,n=Pf(e,s.coerceTypes),i=e.length>0&&!(n.length===0&&e.length===1&&(0,Sf.schemaHasRulesForType)(t,e[0]));if(i){let c=Jn(e,a,s.strictNumbers,Ia.Wrong);r.if(c,()=>{n.length?Nf(t,e,n):Wn(t)})}return i}fe.coerceAndCheckDataType=Tf;var Nc=new Set(["string","number","integer","boolean","null"]);function Pf(t,e){return e?t.filter(r=>Nc.has(r)||e==="array"&&r==="array"):[]}function Nf(t,e,r){let{gen:a,data:s,opts:n}=t,i=a.let("dataType",(0,R._)`typeof ${s}`),c=a.let("coerced",(0,R._)`undefined`);n.coerceTypes==="array"&&a.if((0,R._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>a.assign(s,(0,R._)`${s}[0]`).assign(i,(0,R._)`typeof ${s}`).if(Jn(e,s,n.strictNumbers),()=>a.assign(c,s))),a.if((0,R._)`${c} !== undefined`);for(let f of r)(Nc.has(f)||f==="array"&&n.coerceTypes==="array")&&d(f);a.else(),Wn(t),a.endIf(),a.if((0,R._)`${c} !== undefined`,()=>{a.assign(s,c),Df(t,c)});function d(f){switch(f){case"string":a.elseIf((0,R._)`${i} == "number" || ${i} == "boolean"`).assign(c,(0,R._)`"" + ${s}`).elseIf((0,R._)`${s} === null`).assign(c,(0,R._)`""`);return;case"number":a.elseIf((0,R._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(c,(0,R._)`+${s}`);return;case"integer":a.elseIf((0,R._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,(0,R._)`+${s}`);return;case"boolean":a.elseIf((0,R._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf((0,R._)`${s} === "true" || ${s} === 1`).assign(c,!0);return;case"null":a.elseIf((0,R._)`${s} === "" || ${s} === 0 || ${s} === false`),a.assign(c,null);return;case"array":a.elseIf((0,R._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(c,(0,R._)`[${s}]`)}}}function Df({gen:t,parentData:e,parentDataProperty:r},a){t.if((0,R._)`${e} !== undefined`,()=>t.assign((0,R._)`${e}[${r}]`,a))}function Bn(t,e,r,a=Ia.Correct){let s=a===Ia.Correct?R.operators.EQ:R.operators.NEQ,n;switch(t){case"null":return(0,R._)`${e} ${s} null`;case"array":n=(0,R._)`Array.isArray(${e})`;break;case"object":n=(0,R._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":n=i((0,R._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":n=i();break;default:return(0,R._)`typeof ${e} ${s} ${t}`}return a===Ia.Correct?n:(0,R.not)(n);function i(c=R.nil){return(0,R.and)((0,R._)`typeof ${e} == "number"`,c,r?(0,R._)`isFinite(${e})`:R.nil)}}fe.checkDataType=Bn;function Jn(t,e,r,a){if(t.length===1)return Bn(t[0],e,r,a);let s,n=(0,Tc.toHash)(t);if(n.array&&n.object){let i=(0,R._)`typeof ${e} != "object"`;s=n.null?i:(0,R._)`!${e} || ${i}`,delete n.null,delete n.array,delete n.object}else s=R.nil;n.number&&delete n.integer;for(let i in n)s=(0,R.and)(s,Bn(i,e,r,a));return s}fe.checkDataTypes=Jn;var If={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,R._)`{type: ${t}}`:(0,R._)`{type: ${e}}`};function Wn(t){let e=kf(t);(0,Cf.reportError)(e,If)}fe.reportTypeError=Wn;function kf(t){let{gen:e,data:r,schema:a}=t,s=(0,Tc.schemaRefOrVal)(t,a,"type");return{gen:e,keyword:"type",data:r,schema:a.type,schemaCode:s,schemaValue:s,parentSchema:a,params:{},it:t}}});var Ic=M(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.assignDefaults=void 0;var Hr=j(),Rf=z();function Of(t,e){let{properties:r,items:a}=t.schema;if(e==="object"&&r)for(let s in r)Dc(t,s,r[s].default);else e==="array"&&Array.isArray(a)&&a.forEach((s,n)=>Dc(t,n,s.default))}Ts.assignDefaults=Of;function Dc(t,e,r){let{gen:a,compositeRule:s,data:n,opts:i}=t;if(r===void 0)return;let c=(0,Hr._)`${n}${(0,Hr.getProperty)(e)}`;if(s){(0,Rf.checkStrictMode)(t,`default is ignored for: ${c}`);return}let d=(0,Hr._)`${c} === undefined`;i.useDefaults==="empty"&&(d=(0,Hr._)`${d} || ${c} === null || ${c} === ""`),a.if(d,(0,Hr._)`${c} = ${(0,Hr.stringify)(r)}`)}});var Ae=M(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.validateUnion=W.validateArray=W.usePattern=W.callValidateCode=W.schemaProperties=W.allSchemaProperties=W.noPropertyInData=W.propertyInData=W.isOwnProperty=W.hasPropFunc=W.reportMissingProp=W.checkMissingProp=W.checkReportMissingProp=void 0;var Y=j(),Qn=z(),Dt=vt(),qf=z();function Af(t,e){let{gen:r,data:a,it:s}=t;r.if(Yn(r,a,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Y._)`${e}`},!0),t.error()})}W.checkReportMissingProp=Af;function jf({gen:t,data:e,it:{opts:r}},a,s){return(0,Y.or)(...a.map(n=>(0,Y.and)(Yn(t,e,n,r.ownProperties),(0,Y._)`${s} = ${n}`)))}W.checkMissingProp=jf;function Lf(t,e){t.setParams({missingProperty:e},!0),t.error()}W.reportMissingProp=Lf;function kc(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Y._)`Object.prototype.hasOwnProperty`})}W.hasPropFunc=kc;function Xn(t,e,r){return(0,Y._)`${kc(t)}.call(${e}, ${r})`}W.isOwnProperty=Xn;function xf(t,e,r,a){let s=(0,Y._)`${e}${(0,Y.getProperty)(r)} !== undefined`;return a?(0,Y._)`${s} && ${Xn(t,e,r)}`:s}W.propertyInData=xf;function Yn(t,e,r,a){let s=(0,Y._)`${e}${(0,Y.getProperty)(r)} === undefined`;return a?(0,Y.or)(s,(0,Y.not)(Xn(t,e,r))):s}W.noPropertyInData=Yn;function Rc(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}W.allSchemaProperties=Rc;function Vf(t,e){return Rc(e).filter(r=>!(0,Qn.alwaysValidSchema)(t,e[r]))}W.schemaProperties=Vf;function Ff({schemaCode:t,data:e,it:{gen:r,topSchemaRef:a,schemaPath:s,errorPath:n},it:i},c,d,f){let m=f?(0,Y._)`${t}, ${e}, ${a}${s}`:e,h=[[Dt.default.instancePath,(0,Y.strConcat)(Dt.default.instancePath,n)],[Dt.default.parentData,i.parentData],[Dt.default.parentDataProperty,i.parentDataProperty],[Dt.default.rootData,Dt.default.rootData]];i.opts.dynamicRef&&h.push([Dt.default.dynamicAnchors,Dt.default.dynamicAnchors]);let $=(0,Y._)`${m}, ${r.object(...h)}`;return d!==Y.nil?(0,Y._)`${c}.call(${d}, ${$})`:(0,Y._)`${c}(${$})`}W.callValidateCode=Ff;var Hf=(0,Y._)`new RegExp`;function Uf({gen:t,it:{opts:e}},r){let a=e.unicodeRegExp?"u":"",{regExp:s}=e.code,n=s(r,a);return t.scopeValue("pattern",{key:n.toString(),ref:n,code:(0,Y._)`${s.code==="new RegExp"?Hf:(0,qf.useFunc)(t,s)}(${r}, ${a})`})}W.usePattern=Uf;function zf(t){let{gen:e,data:r,keyword:a,it:s}=t,n=e.name("valid");if(s.allErrors){let c=e.let("valid",!0);return i(()=>e.assign(c,!1)),c}return e.var(n,!0),i(()=>e.break()),n;function i(c){let d=e.const("len",(0,Y._)`${r}.length`);e.forRange("i",0,d,f=>{t.subschema({keyword:a,dataProp:f,dataPropType:Qn.Type.Num},n),e.if((0,Y.not)(n),c)})}}W.validateArray=zf;function Gf(t){let{gen:e,schema:r,keyword:a,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,Qn.alwaysValidSchema)(s,d))&&!s.opts.unevaluated)return;let i=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((d,f)=>{let m=t.subschema({keyword:a,schemaProp:f,compositeRule:!0},c);e.assign(i,(0,Y._)`${i} || ${c}`),t.mergeValidEvaluated(m,c)||e.if((0,Y.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}W.validateUnion=Gf});var Ac=M(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.validateKeywordUsage=et.validSchemaType=et.funcKeywordCode=et.macroKeywordCode=void 0;var we=j(),sr=vt(),Kf=Ae(),Bf=Da();function Jf(t,e){let{gen:r,keyword:a,schema:s,parentSchema:n,it:i}=t,c=e.macro.call(i.self,s,n,i),d=qc(r,a,c);i.opts.validateSchema!==!1&&i.self.validateSchema(c,!0);let f=r.name("valid");t.subschema({schema:c,schemaPath:we.nil,errSchemaPath:`${i.errSchemaPath}/${a}`,topSchemaRef:d,compositeRule:!0},f),t.pass(f,()=>t.error(!0))}et.macroKeywordCode=Jf;function Wf(t,e){var r;let{gen:a,keyword:s,schema:n,parentSchema:i,$data:c,it:d}=t;Xf(d,e);let f=!c&&e.compile?e.compile.call(d.self,n,i,d):e.validate,m=qc(a,s,f),h=a.let("valid");t.block$data(h,$),t.ok((r=e.valid)!==null&&r!==void 0?r:h);function $(){if(e.errors===!1)v(),e.modifying&&Oc(t),E(()=>t.error());else{let w=e.async?b():_();e.modifying&&Oc(t),E(()=>Qf(t,w))}}function b(){let w=a.let("ruleErrs",null);return a.try(()=>v((0,we._)`await `),L=>a.assign(h,!1).if((0,we._)`${L} instanceof ${d.ValidationError}`,()=>a.assign(w,(0,we._)`${L}.errors`),()=>a.throw(L))),w}function _(){let w=(0,we._)`${m}.errors`;return a.assign(w,null),v(we.nil),w}function v(w=e.async?(0,we._)`await `:we.nil){let L=d.opts.passContext?sr.default.this:sr.default.self,O=!("compile"in e&&!c||e.schema===!1);a.assign(h,(0,we._)`${w}${(0,Kf.callValidateCode)(t,m,L,O)}`,e.modifying)}function E(w){var L;a.if((0,we.not)((L=e.valid)!==null&&L!==void 0?L:h),w)}}et.funcKeywordCode=Wf;function Oc(t){let{gen:e,data:r,it:a}=t;e.if(a.parentData,()=>e.assign(r,(0,we._)`${a.parentData}[${a.parentDataProperty}]`))}function Qf(t,e){let{gen:r}=t;r.if((0,we._)`Array.isArray(${e})`,()=>{r.assign(sr.default.vErrors,(0,we._)`${sr.default.vErrors} === null ? ${e} : ${sr.default.vErrors}.concat(${e})`).assign(sr.default.errors,(0,we._)`${sr.default.vErrors}.length`),(0,Bf.extendErrors)(t)},()=>t.error())}function Xf({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function qc(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,we.stringify)(r)})}function Yf(t,e,r=!1){return!e.length||e.some(a=>a==="array"?Array.isArray(t):a==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==a||r&&typeof t>"u")}et.validSchemaType=Yf;function Zf({schema:t,opts:e,self:r,errSchemaPath:a},s,n){if(Array.isArray(s.keyword)?!s.keyword.includes(n):s.keyword!==n)throw new Error("ajv implementation error");let i=s.dependencies;if(i!=null&&i.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${n}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[n])){let d=`keyword "${n}" value is invalid at path "${a}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}et.validateKeywordUsage=Zf});var Lc=M(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.extendSubschemaMode=It.extendSubschemaData=It.getSubschema=void 0;var tt=j(),jc=z();function em(t,{keyword:e,schemaProp:r,schema:a,schemaPath:s,errSchemaPath:n,topSchemaRef:i}){if(e!==void 0&&a!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,tt._)`${t.schemaPath}${(0,tt.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,tt._)`${t.schemaPath}${(0,tt.getProperty)(e)}${(0,tt.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,jc.escapeFragment)(r)}`}}if(a!==void 0){if(s===void 0||n===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:s,topSchemaRef:i,errSchemaPath:n}}throw new Error('either "keyword" or "schema" must be passed')}It.getSubschema=em;function tm(t,e,{dataProp:r,dataPropType:a,data:s,dataTypes:n,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:f,dataPathArr:m,opts:h}=e,$=c.let("data",(0,tt._)`${e.data}${(0,tt.getProperty)(r)}`,!0);d($),t.errorPath=(0,tt.str)`${f}${(0,jc.getErrorPath)(r,a,h.jsPropertySyntax)}`,t.parentDataProperty=(0,tt._)`${r}`,t.dataPathArr=[...m,t.parentDataProperty]}if(s!==void 0){let f=s instanceof tt.Name?s:c.let("data",s,!0);d(f),i!==void 0&&(t.propertyName=i)}n&&(t.dataTypes=n);function d(f){t.data=f,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,f]}}It.extendSubschemaData=tm;function rm(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:a,createErrors:s,allErrors:n}){a!==void 0&&(t.compositeRule=a),s!==void 0&&(t.createErrors=s),n!==void 0&&(t.allErrors=n),t.jtdDiscriminator=e,t.jtdMetadata=r}It.extendSubschemaMode=rm});var Zn=M((bv,xc)=>{"use strict";xc.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var a,s,n;if(Array.isArray(e)){if(a=e.length,a!=r.length)return!1;for(s=a;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),a=n.length,a!==Object.keys(r).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[s]))return!1;for(s=a;s--!==0;){var i=n[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var Fc=M((Ev,Vc)=>{"use strict";var kt=Vc.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var a=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Ps(e,a,s,t,"",t)};kt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};kt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};kt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};kt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ps(t,e,r,a,s,n,i,c,d,f){if(a&&typeof a=="object"&&!Array.isArray(a)){e(a,s,n,i,c,d,f);for(var m in a){var h=a[m];if(Array.isArray(h)){if(m in kt.arrayKeywords)for(var $=0;$<h.length;$++)Ps(t,e,r,h[$],s+"/"+m+"/"+$,n,s,m,a,$)}else if(m in kt.propsKeywords){if(h&&typeof h=="object")for(var b in h)Ps(t,e,r,h[b],s+"/"+m+"/"+am(b),n,s,m,a,b)}else(m in kt.keywords||t.allKeys&&!(m in kt.skipKeywords))&&Ps(t,e,r,h,s+"/"+m,n,s,m,a)}r(a,s,n,i,c,d,f)}}function am(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ra=M(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getSchemaRefs=Ce.resolveUrl=Ce.normalizeId=Ce._getFullPath=Ce.getFullPath=Ce.inlineRef=void 0;var sm=z(),nm=Zn(),im=Fc(),om=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cm(t,e=!0){return typeof t=="boolean"?!0:e===!0?!ei(t):e?Hc(t)<=e:!1}Ce.inlineRef=cm;var lm=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ei(t){for(let e in t){if(lm.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(ei)||typeof r=="object"&&ei(r))return!0}return!1}function Hc(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!om.has(r)&&(typeof t[r]=="object"&&(0,sm.eachItem)(t[r],a=>e+=Hc(a)),e===1/0))return 1/0}return e}function Uc(t,e="",r){r!==!1&&(e=Ur(e));let a=t.parse(e);return zc(t,a)}Ce.getFullPath=Uc;function zc(t,e){return t.serialize(e).split("#")[0]+"#"}Ce._getFullPath=zc;var um=/#\/?$/;function Ur(t){return t?t.replace(um,""):""}Ce.normalizeId=Ur;function dm(t,e,r){return r=Ur(r),t.resolve(e,r)}Ce.resolveUrl=dm;var fm=/^[a-z_][-a-z0-9._]*$/i;function mm(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:a}=this.opts,s=Ur(t[r]||e),n={"":s},i=Uc(a,s,!1),c={},d=new Set;return im(t,{allKeys:!0},(h,$,b,_)=>{if(_===void 0)return;let v=i+$,E=n[_];typeof h[r]=="string"&&(E=w.call(this,h[r])),L.call(this,h.$anchor),L.call(this,h.$dynamicAnchor),n[$]=E;function w(O){let B=this.opts.uriResolver.resolve;if(O=Ur(E?B(E,O):O),d.has(O))throw m(O);d.add(O);let N=this.refs[O];return typeof N=="string"&&(N=this.refs[N]),typeof N=="object"?f(h,N.schema,O):O!==Ur(v)&&(O[0]==="#"?(f(h,c[O],O),c[O]=h):this.refs[O]=v),O}function L(O){if(typeof O=="string"){if(!fm.test(O))throw new Error(`invalid anchor "${O}"`);w.call(this,`#${O}`)}}}),c;function f(h,$,b){if($!==void 0&&!nm(h,$))throw m(b)}function m(h){return new Error(`reference "${h}" resolves to more than one schema`)}}Ce.getSchemaRefs=mm});var Aa=M(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.getData=Rt.KeywordCxt=Rt.validateFunctionCode=void 0;var Qc=Sc(),Gc=ka(),ri=Kn(),Ns=ka(),hm=Ic(),qa=Ac(),ti=Lc(),P=j(),D=vt(),pm=Ra(),_t=z(),Oa=Da();function gm(t){if(Zc(t)&&(el(t),Yc(t))){_m(t);return}Xc(t,()=>(0,Qc.topBoolOrEmptySchema)(t))}Rt.validateFunctionCode=gm;function Xc({gen:t,validateName:e,schema:r,schemaEnv:a,opts:s},n){s.code.es5?t.func(e,(0,P._)`${D.default.data}, ${D.default.valCxt}`,a.$async,()=>{t.code((0,P._)`"use strict"; ${Kc(r,s)}`),vm(t,s),t.code(n)}):t.func(e,(0,P._)`${D.default.data}, ${ym(s)}`,a.$async,()=>t.code(Kc(r,s)).code(n))}function ym(t){return(0,P._)`{${D.default.instancePath}="", ${D.default.parentData}, ${D.default.parentDataProperty}, ${D.default.rootData}=${D.default.data}${t.dynamicRef?(0,P._)`, ${D.default.dynamicAnchors}={}`:P.nil}}={}`}function vm(t,e){t.if(D.default.valCxt,()=>{t.var(D.default.instancePath,(0,P._)`${D.default.valCxt}.${D.default.instancePath}`),t.var(D.default.parentData,(0,P._)`${D.default.valCxt}.${D.default.parentData}`),t.var(D.default.parentDataProperty,(0,P._)`${D.default.valCxt}.${D.default.parentDataProperty}`),t.var(D.default.rootData,(0,P._)`${D.default.valCxt}.${D.default.rootData}`),e.dynamicRef&&t.var(D.default.dynamicAnchors,(0,P._)`${D.default.valCxt}.${D.default.dynamicAnchors}`)},()=>{t.var(D.default.instancePath,(0,P._)`""`),t.var(D.default.parentData,(0,P._)`undefined`),t.var(D.default.parentDataProperty,(0,P._)`undefined`),t.var(D.default.rootData,D.default.data),e.dynamicRef&&t.var(D.default.dynamicAnchors,(0,P._)`{}`)})}function _m(t){let{schema:e,opts:r,gen:a}=t;Xc(t,()=>{r.$comment&&e.$comment&&rl(t),Sm(t),a.let(D.default.vErrors,null),a.let(D.default.errors,0),r.unevaluated&&$m(t),tl(t),Tm(t)})}function $m(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,P._)`${r}.evaluated`),e.if((0,P._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,P._)`${t.evaluated}.props`,(0,P._)`undefined`)),e.if((0,P._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,P._)`${t.evaluated}.items`,(0,P._)`undefined`))}function Kc(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,P._)`/*# sourceURL=${r} */`:P.nil}function bm(t,e){if(Zc(t)&&(el(t),Yc(t))){Em(t,e);return}(0,Qc.boolOrEmptySchema)(t,e)}function Yc({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Zc(t){return typeof t.schema!="boolean"}function Em(t,e){let{schema:r,gen:a,opts:s}=t;s.$comment&&r.$comment&&rl(t),Cm(t),Mm(t);let n=a.const("_errs",D.default.errors);tl(t,n),a.var(e,(0,P._)`${n} === ${D.default.errors}`)}function el(t){(0,_t.checkUnknownRules)(t),wm(t)}function tl(t,e){if(t.opts.jtd)return Bc(t,[],!1,e);let r=(0,Gc.getSchemaTypes)(t.schema),a=(0,Gc.coerceAndCheckDataType)(t,r);Bc(t,r,!a,e)}function wm(t){let{schema:e,errSchemaPath:r,opts:a,self:s}=t;e.$ref&&a.ignoreKeywordsWithRef&&(0,_t.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Sm(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,_t.checkStrictMode)(t,"default is ignored in the schema root")}function Cm(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,pm.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Mm(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function rl({gen:t,schemaEnv:e,schema:r,errSchemaPath:a,opts:s}){let n=r.$comment;if(s.$comment===!0)t.code((0,P._)`${D.default.self}.logger.log(${n})`);else if(typeof s.$comment=="function"){let i=(0,P.str)`${a}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,P._)`${D.default.self}.opts.$comment(${n}, ${i}, ${c}.schema)`)}}function Tm(t){let{gen:e,schemaEnv:r,validateName:a,ValidationError:s,opts:n}=t;r.$async?e.if((0,P._)`${D.default.errors} === 0`,()=>e.return(D.default.data),()=>e.throw((0,P._)`new ${s}(${D.default.vErrors})`)):(e.assign((0,P._)`${a}.errors`,D.default.vErrors),n.unevaluated&&Pm(t),e.return((0,P._)`${D.default.errors} === 0`))}function Pm({gen:t,evaluated:e,props:r,items:a}){r instanceof P.Name&&t.assign((0,P._)`${e}.props`,r),a instanceof P.Name&&t.assign((0,P._)`${e}.items`,a)}function Bc(t,e,r,a){let{gen:s,schema:n,data:i,allErrors:c,opts:d,self:f}=t,{RULES:m}=f;if(n.$ref&&(d.ignoreKeywordsWithRef||!(0,_t.schemaHasRulesButRef)(n,m))){s.block(()=>al(t,"$ref",m.all.$ref.definition));return}d.jtd||Nm(t,e),s.block(()=>{for(let $ of m.rules)h($);h(m.post)});function h($){!(0,ri.shouldUseGroup)(n,$)||($.type?(s.if((0,Ns.checkDataType)($.type,i,d.strictNumbers)),Jc(t,$),e.length===1&&e[0]===$.type&&r&&(s.else(),(0,Ns.reportTypeError)(t)),s.endIf()):Jc(t,$),c||s.if((0,P._)`${D.default.errors} === ${a||0}`))}}function Jc(t,e){let{gen:r,schema:a,opts:{useDefaults:s}}=t;s&&(0,hm.assignDefaults)(t,e.type),r.block(()=>{for(let n of e.rules)(0,ri.shouldUseRule)(a,n)&&al(t,n.keyword,n.definition,e.type)})}function Nm(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Dm(t,e),t.opts.allowUnionTypes||Im(t,e),km(t,t.dataTypes))}function Dm(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Wc(t.dataTypes,r)||ai(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>Wc(e,r))}}function Im(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ai(t,"use allowUnionTypes to allow union type keyword")}function km(t,e){let r=t.self.RULES.all;for(let a in r){let s=r[a];if(typeof s=="object"&&(0,ri.shouldUseRule)(t.schema,s)){let{type:n}=s.definition;n.length&&!n.some(i=>Rm(e,i))&&ai(t,`missing type "${n.join(",")}" for keyword "${a}"`)}}}function Rm(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Wc(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ai(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,_t.checkStrictMode)(t,e,t.opts.strictTypes)}var Ds=class{constructor(e,r,a){if((0,qa.validateKeywordUsage)(e,r,a),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=a,this.data=e.data,this.schema=e.schema[a],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,_t.schemaRefOrVal)(e,this.schema,a,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",sl(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,qa.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${a} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",D.default.errors))}result(e,r,a){this.failResult((0,P.not)(e),r,a)}failResult(e,r,a){this.gen.if(e),a?a():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,P.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,P._)`${r} !== undefined && (${(0,P.or)(this.invalid$data(),e)})`)}error(e,r,a){if(r){this.setParams(r),this._error(e,a),this.setParams({});return}this._error(e,a)}_error(e,r){(e?Oa.reportExtraError:Oa.reportError)(this,this.def.error,r)}$dataError(){(0,Oa.reportError)(this,this.def.$dataError||Oa.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Oa.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,a=P.nil){this.gen.block(()=>{this.check$data(e,a),r()})}check$data(e=P.nil,r=P.nil){if(!this.$data)return;let{gen:a,schemaCode:s,schemaType:n,def:i}=this;a.if((0,P.or)((0,P._)`${s} === undefined`,r)),e!==P.nil&&a.assign(e,!0),(n.length||i.validateSchema)&&(a.elseIf(this.invalid$data()),this.$dataError(),e!==P.nil&&a.assign(e,!1)),a.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:a,def:s,it:n}=this;return(0,P.or)(i(),c());function i(){if(a.length){if(!(r instanceof P.Name))throw new Error("ajv implementation error");let d=Array.isArray(a)?a:[a];return(0,P._)`${(0,Ns.checkDataTypes)(d,r,n.opts.strictNumbers,Ns.DataType.Wrong)}`}return P.nil}function c(){if(s.validateSchema){let d=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,P._)`!${d}(${r})`}return P.nil}}subschema(e,r){let a=(0,ti.getSubschema)(this.it,e);(0,ti.extendSubschemaData)(a,this.it,e),(0,ti.extendSubschemaMode)(a,e);let s=Re(se(se({},this.it),a),{items:void 0,props:void 0});return bm(s,r),s}mergeEvaluated(e,r){let{it:a,gen:s}=this;!a.opts.unevaluated||(a.props!==!0&&e.props!==void 0&&(a.props=_t.mergeEvaluated.props(s,e.props,a.props,r)),a.items!==!0&&e.items!==void 0&&(a.items=_t.mergeEvaluated.items(s,e.items,a.items,r)))}mergeValidEvaluated(e,r){let{it:a,gen:s}=this;if(a.opts.unevaluated&&(a.props!==!0||a.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,P.Name)),!0}};Rt.KeywordCxt=Ds;function al(t,e,r,a){let s=new Ds(t,r,e);"code"in r?r.code(s,a):s.$data&&r.validate?(0,qa.funcKeywordCode)(s,r):"macro"in r?(0,qa.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,qa.funcKeywordCode)(s,r)}var Om=/^\/(?:[^~]|~0|~1)*$/,qm=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function sl(t,{dataLevel:e,dataNames:r,dataPathArr:a}){let s,n;if(t==="")return D.default.rootData;if(t[0]==="/"){if(!Om.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,n=D.default.rootData}else{let f=qm.exec(t);if(!f)throw new Error(`Invalid JSON-pointer: ${t}`);let m=+f[1];if(s=f[2],s==="#"){if(m>=e)throw new Error(d("property/index",m));return a[e-m]}if(m>e)throw new Error(d("data",m));if(n=r[e-m],!s)return n}let i=n,c=s.split("/");for(let f of c)f&&(n=(0,P._)`${n}${(0,P.getProperty)((0,_t.unescapeJsonPointer)(f))}`,i=(0,P._)`${i} && ${n}`);return i;function d(f,m){return`Cannot access ${f} ${m} levels up, current level is ${e}`}}Rt.getData=sl});var Is=M(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var si=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};ni.default=si});var ks=M(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});var ii=Ra(),oi=class extends Error{constructor(e,r,a,s){super(s||`can't resolve reference ${a} from id ${r}`),this.missingRef=(0,ii.resolveUrl)(e,r,a),this.missingSchema=(0,ii.normalizeId)((0,ii.getFullPath)(e,this.missingRef))}};ci.default=oi});var Os=M(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.resolveSchema=je.getCompilingSchema=je.resolveRef=je.compileSchema=je.SchemaEnv=void 0;var Ue=j(),Am=Is(),nr=vt(),ze=Ra(),nl=z(),jm=Aa(),zr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let a;typeof e.schema=="object"&&(a=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ze.normalizeId)(a==null?void 0:a[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=a==null?void 0:a.$async,this.refs={}}};je.SchemaEnv=zr;function ui(t){let e=il.call(this,t);if(e)return e;let r=(0,ze.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:a,lines:s}=this.opts.code,{ownProperties:n}=this.opts,i=new Ue.CodeGen(this.scope,{es5:a,lines:s,ownProperties:n}),c;t.$async&&(c=i.scopeValue("Error",{ref:Am.default,code:(0,Ue._)`require("ajv/dist/runtime/validation_error").default`}));let d=i.scopeName("validate");t.validateName=d;let f={gen:i,allErrors:this.opts.allErrors,data:nr.default.data,parentData:nr.default.parentData,parentDataProperty:nr.default.parentDataProperty,dataNames:[nr.default.data],dataPathArr:[Ue.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ue.stringify)(t.schema)}:{ref:t.schema}),validateName:d,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ue.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ue._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(t),(0,jm.validateFunctionCode)(f),i.optimize(this.opts.code.optimize);let h=i.toString();m=`${i.scopeRefs(nr.default.scope)}return ${h}`,this.opts.code.process&&(m=this.opts.code.process(m,t));let b=new Function(`${nr.default.self}`,`${nr.default.scope}`,m)(this,this.scope.get());if(this.scope.value(d,{ref:b}),b.errors=null,b.schema=t.schema,b.schemaEnv=t,t.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:d,validateCode:h,scopeValues:i._values}),this.opts.unevaluated){let{props:_,items:v}=f;b.evaluated={props:_ instanceof Ue.Name?void 0:_,items:v instanceof Ue.Name?void 0:v,dynamicProps:_ instanceof Ue.Name,dynamicItems:v instanceof Ue.Name},b.source&&(b.source.evaluated=(0,Ue.stringify)(b.evaluated))}return t.validate=b,t}catch(h){throw delete t.validate,delete t.validateName,m&&this.logger.error("Error compiling schema, function code:",m),h}finally{this._compilations.delete(t)}}je.compileSchema=ui;function Lm(t,e,r){var a;r=(0,ze.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let n=Fm.call(this,t,r);if(n===void 0){let i=(a=t.localRefs)===null||a===void 0?void 0:a[r],{schemaId:c}=this.opts;i&&(n=new zr({schema:i,schemaId:c,root:t,baseId:e}))}if(n!==void 0)return t.refs[r]=xm.call(this,n)}je.resolveRef=Lm;function xm(t){return(0,ze.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:ui.call(this,t)}function il(t){for(let e of this._compilations)if(Vm(e,t))return e}je.getCompilingSchema=il;function Vm(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Fm(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Rs.call(this,t,e)}function Rs(t,e){let r=this.opts.uriResolver.parse(e),a=(0,ze._getFullPath)(this.opts.uriResolver,r),s=(0,ze.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&a===s)return li.call(this,r,t);let n=(0,ze.normalizeId)(a),i=this.refs[n]||this.schemas[n];if(typeof i=="string"){let c=Rs.call(this,t,i);return typeof(c==null?void 0:c.schema)!="object"?void 0:li.call(this,r,c)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||ui.call(this,i),n===(0,ze.normalizeId)(e)){let{schema:c}=i,{schemaId:d}=this.opts,f=c[d];return f&&(s=(0,ze.resolveUrl)(this.opts.uriResolver,s,f)),new zr({schema:c,schemaId:d,root:t,baseId:s})}return li.call(this,r,i)}}je.resolveSchema=Rs;var Hm=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function li(t,{baseId:e,schema:r,root:a}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let d=r[(0,nl.unescapeFragment)(c)];if(d===void 0)return;r=d;let f=typeof r=="object"&&r[this.opts.schemaId];!Hm.has(c)&&f&&(e=(0,ze.resolveUrl)(this.opts.uriResolver,e,f))}let n;if(typeof r!="boolean"&&r.$ref&&!(0,nl.schemaHasRulesButRef)(r,this.RULES)){let c=(0,ze.resolveUrl)(this.opts.uriResolver,e,r.$ref);n=Rs.call(this,a,c)}let{schemaId:i}=this.opts;if(n=n||new zr({schema:r,schemaId:i,root:a,baseId:e}),n.schema!==n.root.schema)return n}});var ol=M((Nv,Um)=>{Um.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ll=M((qs,cl)=>{(function(t,e){typeof qs=="object"&&typeof cl<"u"?e(qs):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(qs,function(t){"use strict";function e(){for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];if(o.length>1){o[0]=o[0].slice(0,-1);for(var p=o.length-1,g=1;g<p;++g)o[g]=o[g].slice(1,-1);return o[p]=o[p].slice(1),o.join("")}else return o[0]}function r(l){return"(?:"+l+")"}function a(l){return l===void 0?"undefined":l===null?"null":Object.prototype.toString.call(l).split(" ").pop().split("]").shift().toLowerCase()}function s(l){return l.toUpperCase()}function n(l){return l!=null?l instanceof Array?l:typeof l.length!="number"||l.split||l.setInterval||l.call?[l]:Array.prototype.slice.call(l):[]}function i(l,o){var u=l;if(o)for(var p in o)u[p]=o[p];return u}function c(l){var o="[A-Za-z]",u="[\\x0D]",p="[0-9]",g="[\\x22]",S=e(p,"[A-Fa-f]"),k="[\\x0A]",H="[\\x20]",K=r(r("%[EFef]"+S+"%"+S+S+"%"+S+S)+"|"+r("%[89A-Fa-f]"+S+"%"+S+S)+"|"+r("%"+S+S)),ie="[\\:\\/\\?\\#\\[\\]\\@]",V="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",te=e(ie,V),oe=l?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Z=l?"[\\uE000-\\uF8FF]":"[]",G=e(o,p,"[\\-\\.\\_\\~]",oe),re=r(o+e(o,p,"[\\+\\-\\.]")+"*"),J=r(r(K+"|"+e(G,V,"[\\:]"))+"*"),jt=r(r("25[0-5]")+"|"+r("2[0-4]"+p)+"|"+r("1"+p+p)+"|"+r("[1-9]"+p)+"|"+p),Te=r(r("25[0-5]")+"|"+r("2[0-4]"+p)+"|"+r("1"+p+p)+"|"+r("0?[1-9]"+p)+"|0?0?"+p),Ie=r(Te+"\\."+Te+"\\."+Te+"\\."+Te),Q=r(S+"{1,4}"),Pe=r(r(Q+"\\:"+Q)+"|"+Ie),ke=r(r(Q+"\\:")+"{6}"+Pe),Qe=r("\\:\\:"+r(Q+"\\:")+"{5}"+Pe),Lt=r(r(Q)+"?\\:\\:"+r(Q+"\\:")+"{4}"+Pe),nt=r(r(r(Q+"\\:")+"{0,1}"+Q)+"?\\:\\:"+r(Q+"\\:")+"{3}"+Pe),Zr=r(r(r(Q+"\\:")+"{0,2}"+Q)+"?\\:\\:"+r(Q+"\\:")+"{2}"+Pe),Ya=r(r(r(Q+"\\:")+"{0,3}"+Q)+"?\\:\\:"+Q+"\\:"+Pe),Za=r(r(r(Q+"\\:")+"{0,4}"+Q)+"?\\:\\:"+Pe),mr=r(r(r(Q+"\\:")+"{0,5}"+Q)+"?\\:\\:"+Q),hr=r(r(r(Q+"\\:")+"{0,6}"+Q)+"?\\:\\:"),it=r([ke,Qe,Lt,nt,Zr,Ya,Za,mr,hr].join("|")),pr=r(r(G+"|"+K)+"+"),rn=r(it+"\\%25"+pr),xt=r(it+r("\\%25|\\%(?!"+S+"{2})")+pr),Yu=r("[vV]"+S+"+\\."+e(G,V,"[\\:]")+"+"),Zu=r("\\["+r(xt+"|"+it+"|"+Yu)+"\\]"),bo=r(r(K+"|"+e(G,V))+"*"),ea=r(Zu+"|"+Ie+"(?!"+bo+")|"+bo),ta=r(p+"*"),Eo=r(r(J+"@")+"?"+ea+r("\\:"+ta)+"?"),ra=r(K+"|"+e(G,V,"[\\:\\@]")),ed=r(ra+"*"),wo=r(ra+"+"),td=r(r(K+"|"+e(G,V,"[\\@]"))+"+"),ot=r(r("\\/"+ed)+"*"),gr=r("\\/"+r(wo+ot)+"?"),an=r(td+ot),es=r(wo+ot),yr="(?!"+ra+")",Tg=r(ot+"|"+gr+"|"+an+"|"+es+"|"+yr),vr=r(r(ra+"|"+e("[\\/\\?]",Z))+"*"),aa=r(r(ra+"|[\\/\\?]")+"*"),So=r(r("\\/\\/"+Eo+ot)+"|"+gr+"|"+es+"|"+yr),rd=r(re+"\\:"+So+r("\\?"+vr)+"?"+r("\\#"+aa)+"?"),ad=r(r("\\/\\/"+Eo+ot)+"|"+gr+"|"+an+"|"+yr),sd=r(ad+r("\\?"+vr)+"?"+r("\\#"+aa)+"?"),Pg=r(rd+"|"+sd),Ng=r(re+"\\:"+So+r("\\?"+vr)+"?"),Dg="^("+re+")\\:"+r(r("\\/\\/("+r("("+J+")@")+"?("+ea+")"+r("\\:("+ta+")")+"?)")+"?("+ot+"|"+gr+"|"+es+"|"+yr+")")+r("\\?("+vr+")")+"?"+r("\\#("+aa+")")+"?$",Ig="^(){0}"+r(r("\\/\\/("+r("("+J+")@")+"?("+ea+")"+r("\\:("+ta+")")+"?)")+"?("+ot+"|"+gr+"|"+an+"|"+yr+")")+r("\\?("+vr+")")+"?"+r("\\#("+aa+")")+"?$",kg="^("+re+")\\:"+r(r("\\/\\/("+r("("+J+")@")+"?("+ea+")"+r("\\:("+ta+")")+"?)")+"?("+ot+"|"+gr+"|"+es+"|"+yr+")")+r("\\?("+vr+")")+"?$",Rg="^"+r("\\#("+aa+")")+"?$",Og="^"+r("("+J+")@")+"?("+ea+")"+r("\\:("+ta+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",o,p,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",G,V),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",G,V),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",G,V),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",G,V),"g"),NOT_QUERY:new RegExp(e("[^\\%]",G,V,"[\\:\\@\\/\\?]",Z),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",G,V,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",G,V),"g"),UNRESERVED:new RegExp(G,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",G,te),"g"),PCT_ENCODED:new RegExp(K,"g"),IPV4ADDRESS:new RegExp("^("+Ie+")$"),IPV6ADDRESS:new RegExp("^\\[?("+it+")"+r(r("\\%25|\\%(?!"+S+"{2})")+"("+pr+")")+"?\\]?$")}}var d=c(!1),f=c(!0),m=function(){function l(o,u){var p=[],g=!0,S=!1,k=void 0;try{for(var H=o[Symbol.iterator](),K;!(g=(K=H.next()).done)&&(p.push(K.value),!(u&&p.length===u));g=!0);}catch(ie){S=!0,k=ie}finally{try{!g&&H.return&&H.return()}finally{if(S)throw k}}return p}return function(o,u){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return l(o,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(l){if(Array.isArray(l)){for(var o=0,u=Array(l.length);o<l.length;o++)u[o]=l[o];return u}else return Array.from(l)},$=2147483647,b=36,_=1,v=26,E=38,w=700,L=72,O=128,B="-",N=/^xn--/,Ne=/[^\0-\x7E]/,$t=/[\x2E\u3002\uFF0E\uFF61]/g,Qr={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},qt=b-_,pe=Math.floor,At=String.fromCharCode;function Ke(l){throw new RangeError(Qr[l])}function Qa(l,o){for(var u=[],p=l.length;p--;)u[p]=o(l[p]);return u}function Xa(l,o){var u=l.split("@"),p="";u.length>1&&(p=u[0]+"@",l=u[1]),l=l.replace($t,".");var g=l.split("."),S=Qa(g,o).join(".");return p+S}function ro(l){for(var o=[],u=0,p=l.length;u<p;){var g=l.charCodeAt(u++);if(g>=55296&&g<=56319&&u<p){var S=l.charCodeAt(u++);(S&64512)==56320?o.push(((g&1023)<<10)+(S&1023)+65536):(o.push(g),u--)}else o.push(g)}return o}var Pu=function(o){return String.fromCodePoint.apply(String,h(o))},Nu=function(o){return o-48<10?o-22:o-65<26?o-65:o-97<26?o-97:b},ao=function(o,u){return o+22+75*(o<26)-((u!=0)<<5)},so=function(o,u,p){var g=0;for(o=p?pe(o/w):o>>1,o+=pe(o/u);o>qt*v>>1;g+=b)o=pe(o/qt);return pe(g+(qt+1)*o/(o+E))},no=function(o){var u=[],p=o.length,g=0,S=O,k=L,H=o.lastIndexOf(B);H<0&&(H=0);for(var K=0;K<H;++K)o.charCodeAt(K)>=128&&Ke("not-basic"),u.push(o.charCodeAt(K));for(var ie=H>0?H+1:0;ie<p;){for(var V=g,te=1,oe=b;;oe+=b){ie>=p&&Ke("invalid-input");var Z=Nu(o.charCodeAt(ie++));(Z>=b||Z>pe(($-g)/te))&&Ke("overflow"),g+=Z*te;var G=oe<=k?_:oe>=k+v?v:oe-k;if(Z<G)break;var re=b-G;te>pe($/re)&&Ke("overflow"),te*=re}var J=u.length+1;k=so(g-V,J,V==0),pe(g/J)>$-S&&Ke("overflow"),S+=pe(g/J),g%=J,u.splice(g++,0,S)}return String.fromCodePoint.apply(String,u)},io=function(o){var u=[];o=ro(o);var p=o.length,g=O,S=0,k=L,H=!0,K=!1,ie=void 0;try{for(var V=o[Symbol.iterator](),te;!(H=(te=V.next()).done);H=!0){var oe=te.value;oe<128&&u.push(At(oe))}}catch(xt){K=!0,ie=xt}finally{try{!H&&V.return&&V.return()}finally{if(K)throw ie}}var Z=u.length,G=Z;for(Z&&u.push(B);G<p;){var re=$,J=!0,jt=!1,Te=void 0;try{for(var Ie=o[Symbol.iterator](),Q;!(J=(Q=Ie.next()).done);J=!0){var Pe=Q.value;Pe>=g&&Pe<re&&(re=Pe)}}catch(xt){jt=!0,Te=xt}finally{try{!J&&Ie.return&&Ie.return()}finally{if(jt)throw Te}}var ke=G+1;re-g>pe(($-S)/ke)&&Ke("overflow"),S+=(re-g)*ke,g=re;var Qe=!0,Lt=!1,nt=void 0;try{for(var Zr=o[Symbol.iterator](),Ya;!(Qe=(Ya=Zr.next()).done);Qe=!0){var Za=Ya.value;if(Za<g&&++S>$&&Ke("overflow"),Za==g){for(var mr=S,hr=b;;hr+=b){var it=hr<=k?_:hr>=k+v?v:hr-k;if(mr<it)break;var pr=mr-it,rn=b-it;u.push(At(ao(it+pr%rn,0))),mr=pe(pr/rn)}u.push(At(ao(mr,0))),k=so(S,ke,G==Z),S=0,++G}}}catch(xt){Lt=!0,nt=xt}finally{try{!Qe&&Zr.return&&Zr.return()}finally{if(Lt)throw nt}}++S,++g}return u.join("")},Du=function(o){return Xa(o,function(u){return N.test(u)?no(u.slice(4).toLowerCase()):u})},Iu=function(o){return Xa(o,function(u){return Ne.test(u)?"xn--"+io(u):u})},lr={version:"2.1.0",ucs2:{decode:ro,encode:Pu},decode:no,encode:io,toASCII:Iu,toUnicode:Du},De={};function Be(l){var o=l.charCodeAt(0),u=void 0;return o<16?u="%0"+o.toString(16).toUpperCase():o<128?u="%"+o.toString(16).toUpperCase():o<2048?u="%"+(o>>6|192).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase():u="%"+(o>>12|224).toString(16).toUpperCase()+"%"+(o>>6&63|128).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase(),u}function ur(l){for(var o="",u=0,p=l.length;u<p;){var g=parseInt(l.substr(u+1,2),16);if(g<128)o+=String.fromCharCode(g),u+=3;else if(g>=194&&g<224){if(p-u>=6){var S=parseInt(l.substr(u+4,2),16);o+=String.fromCharCode((g&31)<<6|S&63)}else o+=l.substr(u,6);u+=6}else if(g>=224){if(p-u>=9){var k=parseInt(l.substr(u+4,2),16),H=parseInt(l.substr(u+7,2),16);o+=String.fromCharCode((g&15)<<12|(k&63)<<6|H&63)}else o+=l.substr(u,9);u+=9}else o+=l.substr(u,3),u+=3}return o}function Ys(l,o){function u(p){var g=ur(p);return g.match(o.UNRESERVED)?g:p}return l.scheme&&(l.scheme=String(l.scheme).replace(o.PCT_ENCODED,u).toLowerCase().replace(o.NOT_SCHEME,"")),l.userinfo!==void 0&&(l.userinfo=String(l.userinfo).replace(o.PCT_ENCODED,u).replace(o.NOT_USERINFO,Be).replace(o.PCT_ENCODED,s)),l.host!==void 0&&(l.host=String(l.host).replace(o.PCT_ENCODED,u).toLowerCase().replace(o.NOT_HOST,Be).replace(o.PCT_ENCODED,s)),l.path!==void 0&&(l.path=String(l.path).replace(o.PCT_ENCODED,u).replace(l.scheme?o.NOT_PATH:o.NOT_PATH_NOSCHEME,Be).replace(o.PCT_ENCODED,s)),l.query!==void 0&&(l.query=String(l.query).replace(o.PCT_ENCODED,u).replace(o.NOT_QUERY,Be).replace(o.PCT_ENCODED,s)),l.fragment!==void 0&&(l.fragment=String(l.fragment).replace(o.PCT_ENCODED,u).replace(o.NOT_FRAGMENT,Be).replace(o.PCT_ENCODED,s)),l}function Zs(l){return l.replace(/^0*(.*)/,"$1")||"0"}function en(l,o){var u=l.match(o.IPV4ADDRESS)||[],p=m(u,2),g=p[1];return g?g.split(".").map(Zs).join("."):l}function oo(l,o){var u=l.match(o.IPV6ADDRESS)||[],p=m(u,3),g=p[1],S=p[2];if(g){for(var k=g.toLowerCase().split("::").reverse(),H=m(k,2),K=H[0],ie=H[1],V=ie?ie.split(":").map(Zs):[],te=K.split(":").map(Zs),oe=o.IPV4ADDRESS.test(te[te.length-1]),Z=oe?7:8,G=te.length-Z,re=Array(Z),J=0;J<Z;++J)re[J]=V[J]||te[G+J]||"";oe&&(re[Z-1]=en(re[Z-1],o));var jt=re.reduce(function(ke,Qe,Lt){if(!Qe||Qe==="0"){var nt=ke[ke.length-1];nt&&nt.index+nt.length===Lt?nt.length++:ke.push({index:Lt,length:1})}return ke},[]),Te=jt.sort(function(ke,Qe){return Qe.length-ke.length})[0],Ie=void 0;if(Te&&Te.length>1){var Q=re.slice(0,Te.index),Pe=re.slice(Te.index+Te.length);Ie=Q.join(":")+"::"+Pe.join(":")}else Ie=re.join(":");return S&&(Ie+="%"+S),Ie}else return l}var ku=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ru="".match(/(){0}/)[1]===void 0;function at(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={},p=o.iri!==!1?f:d;o.reference==="suffix"&&(l=(o.scheme?o.scheme+":":"")+"//"+l);var g=l.match(ku);if(g){Ru?(u.scheme=g[1],u.userinfo=g[3],u.host=g[4],u.port=parseInt(g[5],10),u.path=g[6]||"",u.query=g[7],u.fragment=g[8],isNaN(u.port)&&(u.port=g[5])):(u.scheme=g[1]||void 0,u.userinfo=l.indexOf("@")!==-1?g[3]:void 0,u.host=l.indexOf("//")!==-1?g[4]:void 0,u.port=parseInt(g[5],10),u.path=g[6]||"",u.query=l.indexOf("?")!==-1?g[7]:void 0,u.fragment=l.indexOf("#")!==-1?g[8]:void 0,isNaN(u.port)&&(u.port=l.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?g[4]:void 0)),u.host&&(u.host=oo(en(u.host,p),p)),u.scheme===void 0&&u.userinfo===void 0&&u.host===void 0&&u.port===void 0&&!u.path&&u.query===void 0?u.reference="same-document":u.scheme===void 0?u.reference="relative":u.fragment===void 0?u.reference="absolute":u.reference="uri",o.reference&&o.reference!=="suffix"&&o.reference!==u.reference&&(u.error=u.error||"URI is not a "+o.reference+" reference.");var S=De[(o.scheme||u.scheme||"").toLowerCase()];if(!o.unicodeSupport&&(!S||!S.unicodeSupport)){if(u.host&&(o.domainHost||S&&S.domainHost))try{u.host=lr.toASCII(u.host.replace(p.PCT_ENCODED,ur).toLowerCase())}catch(k){u.error=u.error||"Host's domain name can not be converted to ASCII via punycode: "+k}Ys(u,d)}else Ys(u,p);S&&S.parse&&S.parse(u,o)}else u.error=u.error||"URI can not be parsed.";return u}function Ou(l,o){var u=o.iri!==!1?f:d,p=[];return l.userinfo!==void 0&&(p.push(l.userinfo),p.push("@")),l.host!==void 0&&p.push(oo(en(String(l.host),u),u).replace(u.IPV6ADDRESS,function(g,S,k){return"["+S+(k?"%25"+k:"")+"]"})),(typeof l.port=="number"||typeof l.port=="string")&&(p.push(":"),p.push(String(l.port))),p.length?p.join(""):void 0}var co=/^\.\.?\//,lo=/^\/\.(\/|$)/,uo=/^\/\.\.(\/|$)/,qu=/^\/?(?:.|\n)*?(?=\/|$)/;function dr(l){for(var o=[];l.length;)if(l.match(co))l=l.replace(co,"");else if(l.match(lo))l=l.replace(lo,"/");else if(l.match(uo))l=l.replace(uo,"/"),o.pop();else if(l==="."||l==="..")l="";else{var u=l.match(qu);if(u){var p=u[0];l=l.slice(p.length),o.push(p)}else throw new Error("Unexpected dot segment condition")}return o.join("")}function Je(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.iri?f:d,p=[],g=De[(o.scheme||l.scheme||"").toLowerCase()];if(g&&g.serialize&&g.serialize(l,o),l.host&&!u.IPV6ADDRESS.test(l.host)){if(o.domainHost||g&&g.domainHost)try{l.host=o.iri?lr.toUnicode(l.host):lr.toASCII(l.host.replace(u.PCT_ENCODED,ur).toLowerCase())}catch(H){l.error=l.error||"Host's domain name can not be converted to "+(o.iri?"Unicode":"ASCII")+" via punycode: "+H}}Ys(l,u),o.reference!=="suffix"&&l.scheme&&(p.push(l.scheme),p.push(":"));var S=Ou(l,o);if(S!==void 0&&(o.reference!=="suffix"&&p.push("//"),p.push(S),l.path&&l.path.charAt(0)!=="/"&&p.push("/")),l.path!==void 0){var k=l.path;!o.absolutePath&&(!g||!g.absolutePath)&&(k=dr(k)),S===void 0&&(k=k.replace(/^\/\//,"/%2F")),p.push(k)}return l.query!==void 0&&(p.push("?"),p.push(l.query)),l.fragment!==void 0&&(p.push("#"),p.push(l.fragment)),p.join("")}function fo(l,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments[3],g={};return p||(l=at(Je(l,u),u),o=at(Je(o,u),u)),u=u||{},!u.tolerant&&o.scheme?(g.scheme=o.scheme,g.userinfo=o.userinfo,g.host=o.host,g.port=o.port,g.path=dr(o.path||""),g.query=o.query):(o.userinfo!==void 0||o.host!==void 0||o.port!==void 0?(g.userinfo=o.userinfo,g.host=o.host,g.port=o.port,g.path=dr(o.path||""),g.query=o.query):(o.path?(o.path.charAt(0)==="/"?g.path=dr(o.path):((l.userinfo!==void 0||l.host!==void 0||l.port!==void 0)&&!l.path?g.path="/"+o.path:l.path?g.path=l.path.slice(0,l.path.lastIndexOf("/")+1)+o.path:g.path=o.path,g.path=dr(g.path)),g.query=o.query):(g.path=l.path,o.query!==void 0?g.query=o.query:g.query=l.query),g.userinfo=l.userinfo,g.host=l.host,g.port=l.port),g.scheme=l.scheme),g.fragment=o.fragment,g}function Au(l,o,u){var p=i({scheme:"null"},u);return Je(fo(at(l,p),at(o,p),p,!0),p)}function ju(l,o){return typeof l=="string"?l=Je(at(l,o),o):a(l)==="object"&&(l=at(Je(l,o),o)),l}function Lu(l,o,u){return typeof l=="string"?l=Je(at(l,u),u):a(l)==="object"&&(l=Je(l,u)),typeof o=="string"?o=Je(at(o,u),u):a(o)==="object"&&(o=Je(o,u)),l===o}function xu(l,o){return l&&l.toString().replace(!o||!o.iri?d.ESCAPE:f.ESCAPE,Be)}function st(l,o){return l&&l.toString().replace(!o||!o.iri?d.PCT_ENCODED:f.PCT_ENCODED,ur)}var Xr={scheme:"http",domainHost:!0,parse:function(o,u){return o.host||(o.error=o.error||"HTTP URIs must have a host."),o},serialize:function(o,u){var p=String(o.scheme).toLowerCase()==="https";return(o.port===(p?443:80)||o.port==="")&&(o.port=void 0),o.path||(o.path="/"),o}},mo={scheme:"https",domainHost:Xr.domainHost,parse:Xr.parse,serialize:Xr.serialize};function ho(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}var Yr={scheme:"ws",domainHost:!0,parse:function(o,u){var p=o;return p.secure=ho(p),p.resourceName=(p.path||"/")+(p.query?"?"+p.query:""),p.path=void 0,p.query=void 0,p},serialize:function(o,u){if((o.port===(ho(o)?443:80)||o.port==="")&&(o.port=void 0),typeof o.secure=="boolean"&&(o.scheme=o.secure?"wss":"ws",o.secure=void 0),o.resourceName){var p=o.resourceName.split("?"),g=m(p,2),S=g[0],k=g[1];o.path=S&&S!=="/"?S:void 0,o.query=k,o.resourceName=void 0}return o.fragment=void 0,o}},po={scheme:"wss",domainHost:Yr.domainHost,parse:Yr.parse,serialize:Yr.serialize},Vu={},Fu=!0,go="[A-Za-z0-9\\-\\.\\_\\~"+(Fu?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",We="[0-9A-Fa-f]",Hu=r(r("%[EFef]"+We+"%"+We+We+"%"+We+We)+"|"+r("%[89A-Fa-f]"+We+"%"+We+We)+"|"+r("%"+We+We)),Uu="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",zu="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Gu=e(zu,'[\\"\\\\]'),Ku="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Bu=new RegExp(go,"g"),fr=new RegExp(Hu,"g"),Ju=new RegExp(e("[^]",Uu,"[\\.]",'[\\"]',Gu),"g"),yo=new RegExp(e("[^]",go,Ku),"g"),Wu=yo;function tn(l){var o=ur(l);return o.match(Bu)?o:l}var vo={scheme:"mailto",parse:function(o,u){var p=o,g=p.to=p.path?p.path.split(","):[];if(p.path=void 0,p.query){for(var S=!1,k={},H=p.query.split("&"),K=0,ie=H.length;K<ie;++K){var V=H[K].split("=");switch(V[0]){case"to":for(var te=V[1].split(","),oe=0,Z=te.length;oe<Z;++oe)g.push(te[oe]);break;case"subject":p.subject=st(V[1],u);break;case"body":p.body=st(V[1],u);break;default:S=!0,k[st(V[0],u)]=st(V[1],u);break}}S&&(p.headers=k)}p.query=void 0;for(var G=0,re=g.length;G<re;++G){var J=g[G].split("@");if(J[0]=st(J[0]),u.unicodeSupport)J[1]=st(J[1],u).toLowerCase();else try{J[1]=lr.toASCII(st(J[1],u).toLowerCase())}catch(jt){p.error=p.error||"Email address's domain name can not be converted to ASCII via punycode: "+jt}g[G]=J.join("@")}return p},serialize:function(o,u){var p=o,g=n(o.to);if(g){for(var S=0,k=g.length;S<k;++S){var H=String(g[S]),K=H.lastIndexOf("@"),ie=H.slice(0,K).replace(fr,tn).replace(fr,s).replace(Ju,Be),V=H.slice(K+1);try{V=u.iri?lr.toUnicode(V):lr.toASCII(st(V,u).toLowerCase())}catch(G){p.error=p.error||"Email address's domain name can not be converted to "+(u.iri?"Unicode":"ASCII")+" via punycode: "+G}g[S]=ie+"@"+V}p.path=g.join(",")}var te=o.headers=o.headers||{};o.subject&&(te.subject=o.subject),o.body&&(te.body=o.body);var oe=[];for(var Z in te)te[Z]!==Vu[Z]&&oe.push(Z.replace(fr,tn).replace(fr,s).replace(yo,Be)+"="+te[Z].replace(fr,tn).replace(fr,s).replace(Wu,Be));return oe.length&&(p.query=oe.join("&")),p}},Qu=/^([^\:]+)\:(.*)/,_o={scheme:"urn",parse:function(o,u){var p=o.path&&o.path.match(Qu),g=o;if(p){var S=u.scheme||g.scheme||"urn",k=p[1].toLowerCase(),H=p[2],K=S+":"+(u.nid||k),ie=De[K];g.nid=k,g.nss=H,g.path=void 0,ie&&(g=ie.parse(g,u))}else g.error=g.error||"URN can not be parsed.";return g},serialize:function(o,u){var p=u.scheme||o.scheme||"urn",g=o.nid,S=p+":"+(u.nid||g),k=De[S];k&&(o=k.serialize(o,u));var H=o,K=o.nss;return H.path=(g||u.nid)+":"+K,H}},Xu=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,$o={scheme:"urn:uuid",parse:function(o,u){var p=o;return p.uuid=p.nss,p.nss=void 0,!u.tolerant&&(!p.uuid||!p.uuid.match(Xu))&&(p.error=p.error||"UUID is not valid."),p},serialize:function(o,u){var p=o;return p.nss=(o.uuid||"").toLowerCase(),p}};De[Xr.scheme]=Xr,De[mo.scheme]=mo,De[Yr.scheme]=Yr,De[po.scheme]=po,De[vo.scheme]=vo,De[_o.scheme]=_o,De[$o.scheme]=$o,t.SCHEMES=De,t.pctEncChar=Be,t.pctDecChars=ur,t.parse=at,t.removeDotSegments=dr,t.serialize=Je,t.resolveComponents=fo,t.resolve=Au,t.normalize=ju,t.equal=Lu,t.escapeComponent=xu,t.unescapeComponent=st,Object.defineProperty(t,"__esModule",{value:!0})})});var dl=M(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var ul=ll();ul.code='require("ajv/dist/runtime/uri").default';di.default=ul});var _l=M(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.CodeGen=me.Name=me.nil=me.stringify=me.str=me._=me.KeywordCxt=void 0;var zm=Aa();Object.defineProperty(me,"KeywordCxt",{enumerable:!0,get:function(){return zm.KeywordCxt}});var Gr=j();Object.defineProperty(me,"_",{enumerable:!0,get:function(){return Gr._}});Object.defineProperty(me,"str",{enumerable:!0,get:function(){return Gr.str}});Object.defineProperty(me,"stringify",{enumerable:!0,get:function(){return Gr.stringify}});Object.defineProperty(me,"nil",{enumerable:!0,get:function(){return Gr.nil}});Object.defineProperty(me,"Name",{enumerable:!0,get:function(){return Gr.Name}});Object.defineProperty(me,"CodeGen",{enumerable:!0,get:function(){return Gr.CodeGen}});var Gm=Is(),gl=ks(),Km=Gn(),ja=Os(),Bm=j(),La=Ra(),As=ka(),mi=z(),fl=ol(),Jm=dl(),yl=(t,e)=>new RegExp(t,e);yl.code="new RegExp";var Wm=["removeAdditional","useDefaults","coerceTypes"],Qm=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Xm={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Ym={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},ml=200;function Zm(t){var e,r,a,s,n,i,c,d,f,m,h,$,b,_,v,E,w,L,O,B,N,Ne,$t,Qr,qt;let pe=t.strict,At=(e=t.code)===null||e===void 0?void 0:e.optimize,Ke=At===!0||At===void 0?1:At||0,Qa=(a=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&a!==void 0?a:yl,Xa=(s=t.uriResolver)!==null&&s!==void 0?s:Jm.default;return{strictSchema:(i=(n=t.strictSchema)!==null&&n!==void 0?n:pe)!==null&&i!==void 0?i:!0,strictNumbers:(d=(c=t.strictNumbers)!==null&&c!==void 0?c:pe)!==null&&d!==void 0?d:!0,strictTypes:(m=(f=t.strictTypes)!==null&&f!==void 0?f:pe)!==null&&m!==void 0?m:"log",strictTuples:($=(h=t.strictTuples)!==null&&h!==void 0?h:pe)!==null&&$!==void 0?$:"log",strictRequired:(_=(b=t.strictRequired)!==null&&b!==void 0?b:pe)!==null&&_!==void 0?_:!1,code:t.code?Re(se({},t.code),{optimize:Ke,regExp:Qa}):{optimize:Ke,regExp:Qa},loopRequired:(v=t.loopRequired)!==null&&v!==void 0?v:ml,loopEnum:(E=t.loopEnum)!==null&&E!==void 0?E:ml,meta:(w=t.meta)!==null&&w!==void 0?w:!0,messages:(L=t.messages)!==null&&L!==void 0?L:!0,inlineRefs:(O=t.inlineRefs)!==null&&O!==void 0?O:!0,schemaId:(B=t.schemaId)!==null&&B!==void 0?B:"$id",addUsedSchema:(N=t.addUsedSchema)!==null&&N!==void 0?N:!0,validateSchema:(Ne=t.validateSchema)!==null&&Ne!==void 0?Ne:!0,validateFormats:($t=t.validateFormats)!==null&&$t!==void 0?$t:!0,unicodeRegExp:(Qr=t.unicodeRegExp)!==null&&Qr!==void 0?Qr:!0,int32range:(qt=t.int32range)!==null&&qt!==void 0?qt:!0,uriResolver:Xa}}var xa=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=se(se({},e),Zm(e));let{es5:r,lines:a}=this.opts.code;this.scope=new Bm.ValueScope({scope:{},prefixes:Qm,es5:r,lines:a}),this.logger=nh(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Km.getRules)(),hl.call(this,Xm,e,"NOT SUPPORTED"),hl.call(this,Ym,e,"DEPRECATED","warn"),this._metaOpts=ah.call(this),e.formats&&th.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&rh.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),eh.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:a}=this.opts,s=fl;a==="id"&&(s=se({},fl),s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[a],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let a;if(typeof e=="string"){if(a=this.getSchema(e),!a)throw new Error(`no schema with key or ref "${e}"`)}else a=this.compile(e);let s=a(r);return"$async"in a||(this.errors=a.errors),s}compile(e,r){let a=this._addSchema(e,r);return a.validate||this._compileSchemaEnv(a)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:a}=this.opts;return s.call(this,e,r);async function s(m,h){await n.call(this,m.$schema);let $=this._addSchema(m,h);return $.validate||i.call(this,$)}async function n(m){m&&!this.getSchema(m)&&await s.call(this,{$ref:m},!0)}async function i(m){try{return this._compileSchemaEnv(m)}catch(h){if(!(h instanceof gl.default))throw h;return c.call(this,h),await d.call(this,h.missingSchema),i.call(this,m)}}function c({missingSchema:m,missingRef:h}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${h} cannot be resolved`)}async function d(m){let h=await f.call(this,m);this.refs[m]||await n.call(this,h.$schema),this.refs[m]||this.addSchema(h,m,r)}async function f(m){let h=this._loading[m];if(h)return h;try{return await(this._loading[m]=a(m))}finally{delete this._loading[m]}}}addSchema(e,r,a,s=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,a,s);return this}let n;if(typeof e=="object"){let{schemaId:i}=this.opts;if(n=e[i],n!==void 0&&typeof n!="string")throw new Error(`schema ${i} must be string`)}return r=(0,La.normalizeId)(r||n),this._checkUnique(r),this.schemas[r]=this._addSchema(e,a,r,s,!0),this}addMetaSchema(e,r,a=this.opts.validateSchema){return this.addSchema(e,r,!0,a),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let a;if(a=e.$schema,a!==void 0&&typeof a!="string")throw new Error("$schema must be a string");if(a=a||this.opts.defaultMeta||this.defaultMeta(),!a)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(a,e);if(!s&&r){let n="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(n);else throw new Error(n)}return s}getSchema(e){let r;for(;typeof(r=pl.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:a}=this.opts,s=new ja.SchemaEnv({schema:{},schemaId:a});if(r=ja.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=pl.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let a=e[this.opts.schemaId];return a&&(a=(0,La.normalizeId)(a),delete this.schemas[a],delete this.refs[a]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let a;if(typeof e=="string")a=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=a);else if(typeof e=="object"&&r===void 0){if(r=e,a=r.keyword,Array.isArray(a)&&!a.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(oh.call(this,a,r),!r)return(0,mi.eachItem)(a,n=>fi.call(this,n)),this;lh.call(this,r);let s=Re(se({},r),{type:(0,As.getJSONTypes)(r.type),schemaType:(0,As.getJSONTypes)(r.schemaType)});return(0,mi.eachItem)(a,s.type.length===0?n=>fi.call(this,n,s):n=>s.type.forEach(i=>fi.call(this,n,s,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let a of r.rules){let s=a.rules.findIndex(n=>n.keyword===e);s>=0&&a.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:a="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${a}${s.instancePath} ${s.message}`).reduce((s,n)=>s+r+n)}$dataMetaSchema(e,r){let a=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let n=s.split("/").slice(1),i=e;for(let c of n)i=i[c];for(let c in a){let d=a[c];if(typeof d!="object")continue;let{$data:f}=d.definition,m=i[c];f&&m&&(i[c]=vl(m))}}return e}_removeAllSchemas(e,r){for(let a in e){let s=e[a];(!r||r.test(a))&&(typeof s=="string"?delete e[a]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[a]))}}_addSchema(e,r,a,s=this.opts.validateSchema,n=this.opts.addUsedSchema){let i,{schemaId:c}=this.opts;if(typeof e=="object")i=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let d=this._cache.get(e);if(d!==void 0)return d;a=(0,La.normalizeId)(i||a);let f=La.getSchemaRefs.call(this,e,a);return d=new ja.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:a,localRefs:f}),this._cache.set(d.schema,d),n&&!a.startsWith("#")&&(a&&this._checkUnique(a),this.refs[a]=d),s&&this.validateSchema(e,!0),d}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):ja.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{ja.compileSchema.call(this,e)}finally{this.opts=r}}};me.default=xa;xa.ValidationError=Gm.default;xa.MissingRefError=gl.default;function hl(t,e,r,a="error"){for(let s in t){let n=s;n in e&&this.logger[a](`${r}: option ${s}. ${t[n]}`)}}function pl(t){return t=(0,La.normalizeId)(t),this.schemas[t]||this.refs[t]}function eh(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function th(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function rh(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function ah(){let t=se({},this.opts);for(let e of Wm)delete t[e];return t}var sh={log(){},warn(){},error(){}};function nh(t){if(t===!1)return sh;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var ih=/^[a-z_$][a-z0-9_$:-]*$/i;function oh(t,e){let{RULES:r}=this;if((0,mi.eachItem)(t,a=>{if(r.keywords[a])throw new Error(`Keyword ${a} is already defined`);if(!ih.test(a))throw new Error(`Keyword ${a} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function fi(t,e,r){var a;let s=e==null?void 0:e.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:n}=this,i=s?n.post:n.rules.find(({type:d})=>d===r);if(i||(i={type:r,rules:[]},n.rules.push(i)),n.keywords[t]=!0,!e)return;let c={keyword:t,definition:Re(se({},e),{type:(0,As.getJSONTypes)(e.type),schemaType:(0,As.getJSONTypes)(e.schemaType)})};e.before?ch.call(this,i,c,e.before):i.rules.push(c),n.all[t]=c,(a=e.implements)===null||a===void 0||a.forEach(d=>this.addKeyword(d))}function ch(t,e,r){let a=t.rules.findIndex(s=>s.keyword===r);a>=0?t.rules.splice(a,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function lh(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=vl(e)),t.validateSchema=this.compile(e,!0))}var uh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function vl(t){return{anyOf:[t,uh]}}});var $l=M(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var dh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hi.default=dh});var Sl=M(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.callRef=ir.getValidate=void 0;var fh=ks(),bl=Ae(),Me=j(),Kr=vt(),El=Os(),js=z(),mh={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:a}=t,{baseId:s,schemaEnv:n,validateName:i,opts:c,self:d}=a,{root:f}=n;if((r==="#"||r==="#/")&&s===f.baseId)return h();let m=El.resolveRef.call(d,f,s,r);if(m===void 0)throw new fh.default(a.opts.uriResolver,s,r);if(m instanceof El.SchemaEnv)return $(m);return b(m);function h(){if(n===f)return Ls(t,i,n,n.$async);let _=e.scopeValue("root",{ref:f});return Ls(t,(0,Me._)`${_}.validate`,f,f.$async)}function $(_){let v=wl(t,_);Ls(t,v,_,_.$async)}function b(_){let v=e.scopeValue("schema",c.code.source===!0?{ref:_,code:(0,Me.stringify)(_)}:{ref:_}),E=e.name("valid"),w=t.subschema({schema:_,dataTypes:[],schemaPath:Me.nil,topSchemaRef:v,errSchemaPath:r},E);t.mergeEvaluated(w),t.ok(E)}}};function wl(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Me._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ir.getValidate=wl;function Ls(t,e,r,a){let{gen:s,it:n}=t,{allErrors:i,schemaEnv:c,opts:d}=n,f=d.passContext?Kr.default.this:Me.nil;a?m():h();function m(){if(!c.$async)throw new Error("async schema referenced by sync schema");let _=s.let("valid");s.try(()=>{s.code((0,Me._)`await ${(0,bl.callValidateCode)(t,e,f)}`),b(e),i||s.assign(_,!0)},v=>{s.if((0,Me._)`!(${v} instanceof ${n.ValidationError})`,()=>s.throw(v)),$(v),i||s.assign(_,!1)}),t.ok(_)}function h(){t.result((0,bl.callValidateCode)(t,e,f),()=>b(e),()=>$(e))}function $(_){let v=(0,Me._)`${_}.errors`;s.assign(Kr.default.vErrors,(0,Me._)`${Kr.default.vErrors} === null ? ${v} : ${Kr.default.vErrors}.concat(${v})`),s.assign(Kr.default.errors,(0,Me._)`${Kr.default.vErrors}.length`)}function b(_){var v;if(!n.opts.unevaluated)return;let E=(v=r==null?void 0:r.validate)===null||v===void 0?void 0:v.evaluated;if(n.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(n.props=js.mergeEvaluated.props(s,E.props,n.props));else{let w=s.var("props",(0,Me._)`${_}.evaluated.props`);n.props=js.mergeEvaluated.props(s,w,n.props,Me.Name)}if(n.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(n.items=js.mergeEvaluated.items(s,E.items,n.items));else{let w=s.var("items",(0,Me._)`${_}.evaluated.items`);n.items=js.mergeEvaluated.items(s,w,n.items,Me.Name)}}}ir.callRef=Ls;ir.default=mh});var Cl=M(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var hh=$l(),ph=Sl(),gh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",hh.default,ph.default];pi.default=gh});var Ml=M(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var xs=j(),Ot=xs.operators,Vs={maximum:{okStr:"<=",ok:Ot.LTE,fail:Ot.GT},minimum:{okStr:">=",ok:Ot.GTE,fail:Ot.LT},exclusiveMaximum:{okStr:"<",ok:Ot.LT,fail:Ot.GTE},exclusiveMinimum:{okStr:">",ok:Ot.GT,fail:Ot.LTE}},yh={message:({keyword:t,schemaCode:e})=>(0,xs.str)`must be ${Vs[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,xs._)`{comparison: ${Vs[t].okStr}, limit: ${e}}`},vh={keyword:Object.keys(Vs),type:"number",schemaType:"number",$data:!0,error:yh,code(t){let{keyword:e,data:r,schemaCode:a}=t;t.fail$data((0,xs._)`${r} ${Vs[e].fail} ${a} || isNaN(${r})`)}};gi.default=vh});var Tl=M(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});var Va=j(),_h={message:({schemaCode:t})=>(0,Va.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Va._)`{multipleOf: ${t}}`},$h={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:_h,code(t){let{gen:e,data:r,schemaCode:a,it:s}=t,n=s.opts.multipleOfPrecision,i=e.let("res"),c=n?(0,Va._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${n}`:(0,Va._)`${i} !== parseInt(${i})`;t.fail$data((0,Va._)`(${a} === 0 || (${i} = ${r}/${a}, ${c}))`)}};yi.default=$h});var Nl=M(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});function Pl(t){let e=t.length,r=0,a=0,s;for(;a<e;)r++,s=t.charCodeAt(a++),s>=55296&&s<=56319&&a<e&&(s=t.charCodeAt(a),(s&64512)===56320&&a++);return r}vi.default=Pl;Pl.code='require("ajv/dist/runtime/ucs2length").default'});var Dl=M(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});var or=j(),bh=z(),Eh=Nl(),wh={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,or.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,or._)`{limit: ${t}}`},Sh={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:wh,code(t){let{keyword:e,data:r,schemaCode:a,it:s}=t,n=e==="maxLength"?or.operators.GT:or.operators.LT,i=s.opts.unicode===!1?(0,or._)`${r}.length`:(0,or._)`${(0,bh.useFunc)(t.gen,Eh.default)}(${r})`;t.fail$data((0,or._)`${i} ${n} ${a}`)}};_i.default=Sh});var Il=M($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var Ch=Ae(),Fs=j(),Mh={message:({schemaCode:t})=>(0,Fs.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Fs._)`{pattern: ${t}}`},Th={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Mh,code(t){let{data:e,$data:r,schema:a,schemaCode:s,it:n}=t,i=n.opts.unicodeRegExp?"u":"",c=r?(0,Fs._)`(new RegExp(${s}, ${i}))`:(0,Ch.usePattern)(t,a);t.fail$data((0,Fs._)`!${c}.test(${e})`)}};$i.default=Th});var kl=M(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var Fa=j(),Ph={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Fa.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Fa._)`{limit: ${t}}`},Nh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ph,code(t){let{keyword:e,data:r,schemaCode:a}=t,s=e==="maxProperties"?Fa.operators.GT:Fa.operators.LT;t.fail$data((0,Fa._)`Object.keys(${r}).length ${s} ${a}`)}};bi.default=Nh});var Rl=M(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});var Ha=Ae(),Ua=j(),Dh=z(),Ih={message:({params:{missingProperty:t}})=>(0,Ua.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Ua._)`{missingProperty: ${t}}`},kh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ih,code(t){let{gen:e,schema:r,schemaCode:a,data:s,$data:n,it:i}=t,{opts:c}=i;if(!n&&r.length===0)return;let d=r.length>=c.loopRequired;if(i.allErrors?f():m(),c.strictRequired){let b=t.parentSchema.properties,{definedProperties:_}=t.it;for(let v of r)if((b==null?void 0:b[v])===void 0&&!_.has(v)){let E=i.schemaEnv.baseId+i.errSchemaPath,w=`required property "${v}" is not defined at "${E}" (strictRequired)`;(0,Dh.checkStrictMode)(i,w,i.opts.strictRequired)}}function f(){if(d||n)t.block$data(Ua.nil,h);else for(let b of r)(0,Ha.checkReportMissingProp)(t,b)}function m(){let b=e.let("missing");if(d||n){let _=e.let("valid",!0);t.block$data(_,()=>$(b,_)),t.ok(_)}else e.if((0,Ha.checkMissingProp)(t,r,b)),(0,Ha.reportMissingProp)(t,b),e.else()}function h(){e.forOf("prop",a,b=>{t.setParams({missingProperty:b}),e.if((0,Ha.noPropertyInData)(e,s,b,c.ownProperties),()=>t.error())})}function $(b,_){t.setParams({missingProperty:b}),e.forOf(b,a,()=>{e.assign(_,(0,Ha.propertyInData)(e,s,b,c.ownProperties)),e.if((0,Ua.not)(_),()=>{t.error(),e.break()})},Ua.nil)}}};Ei.default=kh});var Ol=M(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var za=j(),Rh={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,za.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,za._)`{limit: ${t}}`},Oh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Rh,code(t){let{keyword:e,data:r,schemaCode:a}=t,s=e==="maxItems"?za.operators.GT:za.operators.LT;t.fail$data((0,za._)`${r}.length ${s} ${a}`)}};wi.default=Oh});var Hs=M(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var ql=Zn();ql.code='require("ajv/dist/runtime/equal").default';Si.default=ql});var Al=M(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var Ci=ka(),he=j(),qh=z(),Ah=Hs(),jh={message:({params:{i:t,j:e}})=>(0,he.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,he._)`{i: ${t}, j: ${e}}`},Lh={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:jh,code(t){let{gen:e,data:r,$data:a,schema:s,parentSchema:n,schemaCode:i,it:c}=t;if(!a&&!s)return;let d=e.let("valid"),f=n.items?(0,Ci.getSchemaTypes)(n.items):[];t.block$data(d,m,(0,he._)`${i} === false`),t.ok(d);function m(){let _=e.let("i",(0,he._)`${r}.length`),v=e.let("j");t.setParams({i:_,j:v}),e.assign(d,!0),e.if((0,he._)`${_} > 1`,()=>(h()?$:b)(_,v))}function h(){return f.length>0&&!f.some(_=>_==="object"||_==="array")}function $(_,v){let E=e.name("item"),w=(0,Ci.checkDataTypes)(f,E,c.opts.strictNumbers,Ci.DataType.Wrong),L=e.const("indices",(0,he._)`{}`);e.for((0,he._)`;${_}--;`,()=>{e.let(E,(0,he._)`${r}[${_}]`),e.if(w,(0,he._)`continue`),f.length>1&&e.if((0,he._)`typeof ${E} == "string"`,(0,he._)`${E} += "_"`),e.if((0,he._)`typeof ${L}[${E}] == "number"`,()=>{e.assign(v,(0,he._)`${L}[${E}]`),t.error(),e.assign(d,!1).break()}).code((0,he._)`${L}[${E}] = ${_}`)})}function b(_,v){let E=(0,qh.useFunc)(e,Ah.default),w=e.name("outer");e.label(w).for((0,he._)`;${_}--;`,()=>e.for((0,he._)`${v} = ${_}; ${v}--;`,()=>e.if((0,he._)`${E}(${r}[${_}], ${r}[${v}])`,()=>{t.error(),e.assign(d,!1).break(w)})))}}};Mi.default=Lh});var jl=M(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});var Ti=j(),xh=z(),Vh=Hs(),Fh={message:"must be equal to constant",params:({schemaCode:t})=>(0,Ti._)`{allowedValue: ${t}}`},Hh={keyword:"const",$data:!0,error:Fh,code(t){let{gen:e,data:r,$data:a,schemaCode:s,schema:n}=t;a||n&&typeof n=="object"?t.fail$data((0,Ti._)`!${(0,xh.useFunc)(e,Vh.default)}(${r}, ${s})`):t.fail((0,Ti._)`${n} !== ${r}`)}};Pi.default=Hh});var Ll=M(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Ga=j(),Uh=z(),zh=Hs(),Gh={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ga._)`{allowedValues: ${t}}`},Kh={keyword:"enum",schemaType:"array",$data:!0,error:Gh,code(t){let{gen:e,data:r,$data:a,schema:s,schemaCode:n,it:i}=t;if(!a&&s.length===0)throw new Error("enum must have non-empty array");let c=s.length>=i.opts.loopEnum,d,f=()=>d!=null?d:d=(0,Uh.useFunc)(e,zh.default),m;if(c||a)m=e.let("valid"),t.block$data(m,h);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let b=e.const("vSchema",n);m=(0,Ga.or)(...s.map((_,v)=>$(b,v)))}t.pass(m);function h(){e.assign(m,!1),e.forOf("v",n,b=>e.if((0,Ga._)`${f()}(${r}, ${b})`,()=>e.assign(m,!0).break()))}function $(b,_){let v=s[_];return typeof v=="object"&&v!==null?(0,Ga._)`${f()}(${r}, ${b}[${_}])`:(0,Ga._)`${r} === ${v}`}}};Ni.default=Kh});var xl=M(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var Bh=Ml(),Jh=Tl(),Wh=Dl(),Qh=Il(),Xh=kl(),Yh=Rl(),Zh=Ol(),ep=Al(),tp=jl(),rp=Ll(),ap=[Bh.default,Jh.default,Wh.default,Qh.default,Xh.default,Yh.default,Zh.default,ep.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},tp.default,rp.default];Di.default=ap});var ki=M(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.validateAdditionalItems=void 0;var cr=j(),Ii=z(),sp={message:({params:{len:t}})=>(0,cr.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,cr._)`{limit: ${t}}`},np={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:sp,code(t){let{parentSchema:e,it:r}=t,{items:a}=e;if(!Array.isArray(a)){(0,Ii.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Vl(t,a)}};function Vl(t,e){let{gen:r,schema:a,data:s,keyword:n,it:i}=t;i.items=!0;let c=r.const("len",(0,cr._)`${s}.length`);if(a===!1)t.setParams({len:e.length}),t.pass((0,cr._)`${c} <= ${e.length}`);else if(typeof a=="object"&&!(0,Ii.alwaysValidSchema)(i,a)){let f=r.var("valid",(0,cr._)`${c} <= ${e.length}`);r.if((0,cr.not)(f),()=>d(f)),t.ok(f)}function d(f){r.forRange("i",e.length,c,m=>{t.subschema({keyword:n,dataProp:m,dataPropType:Ii.Type.Num},f),i.allErrors||r.if((0,cr.not)(f),()=>r.break())})}}Ka.validateAdditionalItems=Vl;Ka.default=np});var Ri=M(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.validateTuple=void 0;var Fl=j(),Us=z(),ip=Ae(),op={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Hl(t,"additionalItems",e);r.items=!0,!(0,Us.alwaysValidSchema)(r,e)&&t.ok((0,ip.validateArray)(t))}};function Hl(t,e,r=t.schema){let{gen:a,parentSchema:s,data:n,keyword:i,it:c}=t;m(s),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=Us.mergeEvaluated.items(a,r.length,c.items));let d=a.name("valid"),f=a.const("len",(0,Fl._)`${n}.length`);r.forEach((h,$)=>{(0,Us.alwaysValidSchema)(c,h)||(a.if((0,Fl._)`${f} > ${$}`,()=>t.subschema({keyword:i,schemaProp:$,dataProp:$},d)),t.ok(d))});function m(h){let{opts:$,errSchemaPath:b}=c,_=r.length,v=_===h.minItems&&(_===h.maxItems||h[e]===!1);if($.strictTuples&&!v){let E=`"${i}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${b}"`;(0,Us.checkStrictMode)(c,E,$.strictTuples)}}}Ba.validateTuple=Hl;Ba.default=op});var Ul=M(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var cp=Ri(),lp={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,cp.validateTuple)(t,"items")};Oi.default=lp});var Gl=M(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var zl=j(),up=z(),dp=Ae(),fp=ki(),mp={message:({params:{len:t}})=>(0,zl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,zl._)`{limit: ${t}}`},hp={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:mp,code(t){let{schema:e,parentSchema:r,it:a}=t,{prefixItems:s}=r;a.items=!0,!(0,up.alwaysValidSchema)(a,e)&&(s?(0,fp.validateAdditionalItems)(t,s):t.ok((0,dp.validateArray)(t)))}};qi.default=hp});var Kl=M(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});var Le=j(),zs=z(),pp={message:({params:{min:t,max:e}})=>e===void 0?(0,Le.str)`must contain at least ${t} valid item(s)`:(0,Le.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Le._)`{minContains: ${t}}`:(0,Le._)`{minContains: ${t}, maxContains: ${e}}`},gp={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:pp,code(t){let{gen:e,schema:r,parentSchema:a,data:s,it:n}=t,i,c,{minContains:d,maxContains:f}=a;n.opts.next?(i=d===void 0?1:d,c=f):i=1;let m=e.const("len",(0,Le._)`${s}.length`);if(t.setParams({min:i,max:c}),c===void 0&&i===0){(0,zs.checkStrictMode)(n,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&i>c){(0,zs.checkStrictMode)(n,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,zs.alwaysValidSchema)(n,r)){let v=(0,Le._)`${m} >= ${i}`;c!==void 0&&(v=(0,Le._)`${v} && ${m} <= ${c}`),t.pass(v);return}n.items=!0;let h=e.name("valid");c===void 0&&i===1?b(h,()=>e.if(h,()=>e.break())):i===0?(e.let(h,!0),c!==void 0&&e.if((0,Le._)`${s}.length > 0`,$)):(e.let(h,!1),$()),t.result(h,()=>t.reset());function $(){let v=e.name("_valid"),E=e.let("count",0);b(v,()=>e.if(v,()=>_(E)))}function b(v,E){e.forRange("i",0,m,w=>{t.subschema({keyword:"contains",dataProp:w,dataPropType:zs.Type.Num,compositeRule:!0},v),E()})}function _(v){e.code((0,Le._)`${v}++`),c===void 0?e.if((0,Le._)`${v} >= ${i}`,()=>e.assign(h,!0).break()):(e.if((0,Le._)`${v} > ${c}`,()=>e.assign(h,!1).break()),i===1?e.assign(h,!0):e.if((0,Le._)`${v} >= ${i}`,()=>e.assign(h,!0)))}}};Ai.default=gp});var Wl=M(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.validateSchemaDeps=rt.validatePropertyDeps=rt.error=void 0;var ji=j(),yp=z(),Ja=Ae();rt.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let a=e===1?"property":"properties";return(0,ji.str)`must have ${a} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:a}})=>(0,ji._)`{property: ${t},
    missingProperty: ${a},
    depsCount: ${e},
    deps: ${r}}`};var vp={keyword:"dependencies",type:"object",schemaType:"object",error:rt.error,code(t){let[e,r]=_p(t);Bl(t,e),Jl(t,r)}};function _p({schema:t}){let e={},r={};for(let a in t){if(a==="__proto__")continue;let s=Array.isArray(t[a])?e:r;s[a]=t[a]}return[e,r]}function Bl(t,e=t.schema){let{gen:r,data:a,it:s}=t;if(Object.keys(e).length===0)return;let n=r.let("missing");for(let i in e){let c=e[i];if(c.length===0)continue;let d=(0,Ja.propertyInData)(r,a,i,s.opts.ownProperties);t.setParams({property:i,depsCount:c.length,deps:c.join(", ")}),s.allErrors?r.if(d,()=>{for(let f of c)(0,Ja.checkReportMissingProp)(t,f)}):(r.if((0,ji._)`${d} && (${(0,Ja.checkMissingProp)(t,c,n)})`),(0,Ja.reportMissingProp)(t,n),r.else())}}rt.validatePropertyDeps=Bl;function Jl(t,e=t.schema){let{gen:r,data:a,keyword:s,it:n}=t,i=r.name("valid");for(let c in e)(0,yp.alwaysValidSchema)(n,e[c])||(r.if((0,Ja.propertyInData)(r,a,c,n.opts.ownProperties),()=>{let d=t.subschema({keyword:s,schemaProp:c},i);t.mergeValidEvaluated(d,i)},()=>r.var(i,!0)),t.ok(i))}rt.validateSchemaDeps=Jl;rt.default=vp});var Xl=M(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Ql=j(),$p=z(),bp={message:"property name must be valid",params:({params:t})=>(0,Ql._)`{propertyName: ${t.propertyName}}`},Ep={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:bp,code(t){let{gen:e,schema:r,data:a,it:s}=t;if((0,$p.alwaysValidSchema)(s,r))return;let n=e.name("valid");e.forIn("key",a,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},n),e.if((0,Ql.not)(n),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(n)}};Li.default=Ep});var Vi=M(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});var Gs=Ae(),Ge=j(),wp=vt(),Ks=z(),Sp={message:"must NOT have additional properties",params:({params:t})=>(0,Ge._)`{additionalProperty: ${t.additionalProperty}}`},Cp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Sp,code(t){let{gen:e,schema:r,parentSchema:a,data:s,errsCount:n,it:i}=t;if(!n)throw new Error("ajv implementation error");let{allErrors:c,opts:d}=i;if(i.props=!0,d.removeAdditional!=="all"&&(0,Ks.alwaysValidSchema)(i,r))return;let f=(0,Gs.allSchemaProperties)(a.properties),m=(0,Gs.allSchemaProperties)(a.patternProperties);h(),t.ok((0,Ge._)`${n} === ${wp.default.errors}`);function h(){e.forIn("key",s,E=>{!f.length&&!m.length?_(E):e.if($(E),()=>_(E))})}function $(E){let w;if(f.length>8){let L=(0,Ks.schemaRefOrVal)(i,a.properties,"properties");w=(0,Gs.isOwnProperty)(e,L,E)}else f.length?w=(0,Ge.or)(...f.map(L=>(0,Ge._)`${E} === ${L}`)):w=Ge.nil;return m.length&&(w=(0,Ge.or)(w,...m.map(L=>(0,Ge._)`${(0,Gs.usePattern)(t,L)}.test(${E})`))),(0,Ge.not)(w)}function b(E){e.code((0,Ge._)`delete ${s}[${E}]`)}function _(E){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){b(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,Ks.alwaysValidSchema)(i,r)){let w=e.name("valid");d.removeAdditional==="failing"?(v(E,w,!1),e.if((0,Ge.not)(w),()=>{t.reset(),b(E)})):(v(E,w),c||e.if((0,Ge.not)(w),()=>e.break()))}}function v(E,w,L){let O={keyword:"additionalProperties",dataProp:E,dataPropType:Ks.Type.Str};L===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(O,w)}}};xi.default=Cp});var eu=M(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var Mp=Aa(),Yl=Ae(),Fi=z(),Zl=Vi(),Tp={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:a,data:s,it:n}=t;n.opts.removeAdditional==="all"&&a.additionalProperties===void 0&&Zl.default.code(new Mp.KeywordCxt(n,Zl.default,"additionalProperties"));let i=(0,Yl.allSchemaProperties)(r);for(let h of i)n.definedProperties.add(h);n.opts.unevaluated&&i.length&&n.props!==!0&&(n.props=Fi.mergeEvaluated.props(e,(0,Fi.toHash)(i),n.props));let c=i.filter(h=>!(0,Fi.alwaysValidSchema)(n,r[h]));if(c.length===0)return;let d=e.name("valid");for(let h of c)f(h)?m(h):(e.if((0,Yl.propertyInData)(e,s,h,n.opts.ownProperties)),m(h),n.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(d);function f(h){return n.opts.useDefaults&&!n.compositeRule&&r[h].default!==void 0}function m(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},d)}}};Hi.default=Tp});var su=M(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var tu=Ae(),Bs=j(),ru=z(),au=z(),Pp={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:a,parentSchema:s,it:n}=t,{opts:i}=n,c=(0,tu.allSchemaProperties)(r),d=c.filter(v=>(0,ru.alwaysValidSchema)(n,r[v]));if(c.length===0||d.length===c.length&&(!n.opts.unevaluated||n.props===!0))return;let f=i.strictSchema&&!i.allowMatchingProperties&&s.properties,m=e.name("valid");n.props!==!0&&!(n.props instanceof Bs.Name)&&(n.props=(0,au.evaluatedPropsToName)(e,n.props));let{props:h}=n;$();function $(){for(let v of c)f&&b(v),n.allErrors?_(v):(e.var(m,!0),_(v),e.if(m))}function b(v){for(let E in f)new RegExp(v).test(E)&&(0,ru.checkStrictMode)(n,`property ${E} matches pattern ${v} (use allowMatchingProperties)`)}function _(v){e.forIn("key",a,E=>{e.if((0,Bs._)`${(0,tu.usePattern)(t,v)}.test(${E})`,()=>{let w=d.includes(v);w||t.subschema({keyword:"patternProperties",schemaProp:v,dataProp:E,dataPropType:au.Type.Str},m),n.opts.unevaluated&&h!==!0?e.assign((0,Bs._)`${h}[${E}]`,!0):!w&&!n.allErrors&&e.if((0,Bs.not)(m),()=>e.break())})})}}};Ui.default=Pp});var nu=M(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var Np=z(),Dp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:a}=t;if((0,Np.alwaysValidSchema)(a,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};zi.default=Dp});var iu=M(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var Ip=Ae(),kp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ip.validateUnion,error:{message:"must match a schema in anyOf"}};Gi.default=kp});var ou=M(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var Js=j(),Rp=z(),Op={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Js._)`{passingSchemas: ${t.passing}}`},qp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Op,code(t){let{gen:e,schema:r,parentSchema:a,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&a.discriminator)return;let n=r,i=e.let("valid",!1),c=e.let("passing",null),d=e.name("_valid");t.setParams({passing:c}),e.block(f),t.result(i,()=>t.reset(),()=>t.error(!0));function f(){n.forEach((m,h)=>{let $;(0,Rp.alwaysValidSchema)(s,m)?e.var(d,!0):$=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},d),h>0&&e.if((0,Js._)`${d} && ${i}`).assign(i,!1).assign(c,(0,Js._)`[${c}, ${h}]`).else(),e.if(d,()=>{e.assign(i,!0),e.assign(c,h),$&&t.mergeEvaluated($,Js.Name)})})}}};Ki.default=qp});var cu=M(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var Ap=z(),jp={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((n,i)=>{if((0,Ap.alwaysValidSchema)(a,n))return;let c=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(c)})}};Bi.default=jp});var du=M(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var Ws=j(),uu=z(),Lp={message:({params:t})=>(0,Ws.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Ws._)`{failingKeyword: ${t.ifClause}}`},xp={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Lp,code(t){let{gen:e,parentSchema:r,it:a}=t;r.then===void 0&&r.else===void 0&&(0,uu.checkStrictMode)(a,'"if" without "then" and "else" is ignored');let s=lu(a,"then"),n=lu(a,"else");if(!s&&!n)return;let i=e.let("valid",!0),c=e.name("_valid");if(d(),t.reset(),s&&n){let m=e.let("ifClause");t.setParams({ifClause:m}),e.if(c,f("then",m),f("else",m))}else s?e.if(c,f("then")):e.if((0,Ws.not)(c),f("else"));t.pass(i,()=>t.error(!0));function d(){let m=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(m)}function f(m,h){return()=>{let $=t.subschema({keyword:m},c);e.assign(i,c),t.mergeValidEvaluated($,i),h?e.assign(h,(0,Ws._)`${m}`):t.setParams({ifClause:m})}}}};function lu(t,e){let r=t.schema[e];return r!==void 0&&!(0,uu.alwaysValidSchema)(t,r)}Ji.default=xp});var fu=M(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var Vp=z(),Fp={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Vp.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Wi.default=Fp});var mu=M(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var Hp=ki(),Up=Ul(),zp=Ri(),Gp=Gl(),Kp=Kl(),Bp=Wl(),Jp=Xl(),Wp=Vi(),Qp=eu(),Xp=su(),Yp=nu(),Zp=iu(),eg=ou(),tg=cu(),rg=du(),ag=fu();function sg(t=!1){let e=[Yp.default,Zp.default,eg.default,tg.default,rg.default,ag.default,Jp.default,Wp.default,Bp.default,Qp.default,Xp.default];return t?e.push(Up.default,Gp.default):e.push(Hp.default,zp.default),e.push(Kp.default),e}Qi.default=sg});var hu=M(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var ne=j(),ng={message:({schemaCode:t})=>(0,ne.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,ne._)`{format: ${t}}`},ig={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ng,code(t,e){let{gen:r,data:a,$data:s,schema:n,schemaCode:i,it:c}=t,{opts:d,errSchemaPath:f,schemaEnv:m,self:h}=c;if(!d.validateFormats)return;s?$():b();function $(){let _=r.scopeValue("formats",{ref:h.formats,code:d.code.formats}),v=r.const("fDef",(0,ne._)`${_}[${i}]`),E=r.let("fType"),w=r.let("format");r.if((0,ne._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>r.assign(E,(0,ne._)`${v}.type || "string"`).assign(w,(0,ne._)`${v}.validate`),()=>r.assign(E,(0,ne._)`"string"`).assign(w,v)),t.fail$data((0,ne.or)(L(),O()));function L(){return d.strictSchema===!1?ne.nil:(0,ne._)`${i} && !${w}`}function O(){let B=m.$async?(0,ne._)`(${v}.async ? await ${w}(${a}) : ${w}(${a}))`:(0,ne._)`${w}(${a})`,N=(0,ne._)`(typeof ${w} == "function" ? ${B} : ${w}.test(${a}))`;return(0,ne._)`${w} && ${w} !== true && ${E} === ${e} && !${N}`}}function b(){let _=h.formats[n];if(!_){L();return}if(_===!0)return;let[v,E,w]=O(_);v===e&&t.pass(B());function L(){if(d.strictSchema===!1){h.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${n}" ignored in schema at path "${f}"`}}function O(N){let Ne=N instanceof RegExp?(0,ne.regexpCode)(N):d.code.formats?(0,ne._)`${d.code.formats}${(0,ne.getProperty)(n)}`:void 0,$t=r.scopeValue("formats",{key:n,ref:N,code:Ne});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,ne._)`${$t}.validate`]:["string",N,$t]}function B(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!m.$async)throw new Error("async format in sync schema");return(0,ne._)`await ${w}(${a})`}return typeof E=="function"?(0,ne._)`${w}(${a})`:(0,ne._)`${w}.test(${a})`}}}};Xi.default=ig});var pu=M(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var og=hu(),cg=[og.default];Yi.default=cg});var gu=M(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.contentVocabulary=Br.metadataVocabulary=void 0;Br.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Br.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var vu=M(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var lg=Cl(),ug=xl(),dg=mu(),fg=pu(),yu=gu(),mg=[lg.default,ug.default,(0,dg.default)(),fg.default,yu.metadataVocabulary,yu.contentVocabulary];Zi.default=mg});var _u=M(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.DiscrError=void 0;var hg;(function(t){t.Tag="tag",t.Mapping="mapping"})(hg=Wa.DiscrError||(Wa.DiscrError={}))});var bu=M(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});var Jr=j(),eo=_u(),$u=Os(),pg=z(),gg={message:({params:{discrError:t,tagName:e}})=>t===eo.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Jr._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},yg={keyword:"discriminator",type:"object",schemaType:"object",error:gg,code(t){let{gen:e,data:r,schema:a,parentSchema:s,it:n}=t,{oneOf:i}=s;if(!n.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=a.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let d=e.let("valid",!1),f=e.const("tag",(0,Jr._)`${r}${(0,Jr.getProperty)(c)}`);e.if((0,Jr._)`typeof ${f} == "string"`,()=>m(),()=>t.error(!1,{discrError:eo.DiscrError.Tag,tag:f,tagName:c})),t.ok(d);function m(){let b=$();e.if(!1);for(let _ in b)e.elseIf((0,Jr._)`${f} === ${_}`),e.assign(d,h(b[_]));e.else(),t.error(!1,{discrError:eo.DiscrError.Mapping,tag:f,tagName:c}),e.endIf()}function h(b){let _=e.name("valid"),v=t.subschema({keyword:"oneOf",schemaProp:b},_);return t.mergeEvaluated(v,Jr.Name),_}function $(){var b;let _={},v=w(s),E=!0;for(let B=0;B<i.length;B++){let N=i[B];(N==null?void 0:N.$ref)&&!(0,pg.schemaHasRulesButRef)(N,n.self.RULES)&&(N=$u.resolveRef.call(n.self,n.schemaEnv.root,n.baseId,N==null?void 0:N.$ref),N instanceof $u.SchemaEnv&&(N=N.schema));let Ne=(b=N==null?void 0:N.properties)===null||b===void 0?void 0:b[c];if(typeof Ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);E=E&&(v||w(N)),L(Ne,B)}if(!E)throw new Error(`discriminator: "${c}" must be required`);return _;function w({required:B}){return Array.isArray(B)&&B.includes(c)}function L(B,N){if(B.const)O(B.const,N);else if(B.enum)for(let Ne of B.enum)O(Ne,N);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function O(B,N){if(typeof B!="string"||B in _)throw new Error(`discriminator: "${c}" values must be unique strings`);_[B]=N}}}};to.default=yg});var Eu=M((v0,vg)=>{vg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Cu=M((ae,Su)=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.MissingRefError=ae.ValidationError=ae.CodeGen=ae.Name=ae.nil=ae.stringify=ae.str=ae._=ae.KeywordCxt=void 0;var _g=_l(),$g=vu(),bg=bu(),wu=Eu(),Eg=["/properties"],Qs="http://json-schema.org/draft-07/schema",Xs=class extends _g.default{_addVocabularies(){super._addVocabularies(),$g.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(bg.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(wu,Eg):wu;this.addMetaSchema(e,Qs,!1),this.refs["http://json-schema.org/schema"]=Qs}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Qs)?Qs:void 0)}};Su.exports=ae=Xs;Object.defineProperty(ae,"__esModule",{value:!0});ae.default=Xs;var wg=Aa();Object.defineProperty(ae,"KeywordCxt",{enumerable:!0,get:function(){return wg.KeywordCxt}});var Wr=j();Object.defineProperty(ae,"_",{enumerable:!0,get:function(){return Wr._}});Object.defineProperty(ae,"str",{enumerable:!0,get:function(){return Wr.str}});Object.defineProperty(ae,"stringify",{enumerable:!0,get:function(){return Wr.stringify}});Object.defineProperty(ae,"nil",{enumerable:!0,get:function(){return Wr.nil}});Object.defineProperty(ae,"Name",{enumerable:!0,get:function(){return Wr.Name}});Object.defineProperty(ae,"CodeGen",{enumerable:!0,get:function(){return Wr.CodeGen}});var Sg=Is();Object.defineProperty(ae,"ValidationError",{enumerable:!0,get:function(){return Sg.default}});var Cg=ks();Object.defineProperty(ae,"MissingRefError",{enumerable:!0,get:function(){return Cg.default}})});var To=(t,e)=>(t+e)/2,rs=(t,e)=>Math.random()*(e-t)+t;var cn=(t,e,r)=>Math.max(e,Math.min(t,r));function as(t,e){if(!t||!e){console.error(t,e);return}let r=t.querySelectorAll(":scope > [data-tab-target]");r.forEach(a=>{a.addEventListener("click",()=>{var i;r.forEach(c=>c.classList.toggle("selected",c===a));let s=a.getAttribute("data-tab-target"),n=e.querySelector(`[data-tab-content="${s}"]`);Array.from(((i=n==null?void 0:n.parentElement)==null?void 0:i.children)||[]).filter(c=>c.hasAttribute("data-tab-content")).forEach(c=>{c.classList.toggle("hidden",c.getAttribute("data-tab-content")!==s)})})})}function ln(t,e){let r="data-highlight",a=()=>t.removeAttribute(r);switch(t.setAttribute(r,""),e){case"click":t.addEventListener("click",a);break;case"mouseover":t.addEventListener("mouseover",a);break}}var lt,ss,ut=class{constructor(){C(this,lt,new Map);C(this,ss,0)}listen(e,r){let a=ts(this,ss)._++,s={callback:e,id:a,opts:r};return y(this,lt).set(a,s),a}removeListener(e){y(this,lt).delete(e)}removeAllListeners(){y(this,lt).clear()}invoke(e){var r;y(this,lt).forEach(a=>{a.callback(e)});for(let[a,s]of y(this,lt).entries())(r=s.opts)!=null&&r.once&&y(this,lt).delete(a)}};lt=new WeakMap,ss=new WeakMap;var sa,_e,dt,ee=class{constructor(e){C(this,sa,void 0);C(this,_e,void 0);C(this,dt,void 0);T(this,sa,e),T(this,_e,e),T(this,dt,new ut)}get value(){return y(this,_e)}get onChange(){return y(this,dt)}set(e){T(this,_e,e),y(this,dt).invoke(y(this,_e))}get(){return y(this,_e)}add(e){typeof y(this,_e)=="number"&&(T(this,_e,y(this,_e)+e),y(this,dt).invoke(y(this,_e)))}subtract(e){typeof y(this,_e)=="number"&&(T(this,_e,y(this,_e)-e),y(this,dt).invoke(y(this,_e)))}reset(){T(this,_e,y(this,sa)),y(this,dt).removeAllListeners()}};sa=new WeakMap,_e=new WeakMap,dt=new WeakMap;var Xe={None:1<<0,Attack:1<<1,Physical:1<<2,Elemental:1<<3,Chaos:1<<4},un=[{desc:"#% Increased Physical Damage",tags:["Physical"],stats:[{name:"Damage",valueType:"Inc",flags:Xe.Physical}]},{desc:"#% More Physical Damage",tags:["Physical"],stats:[{name:"Damage",valueType:"More",flags:Xe.Physical}]},{desc:"Adds # To # Physical Damage",tags:["Physical"],stats:[{name:"MinDamage",valueType:"Base",flags:Xe.Physical},{name:"MaxDamage",valueType:"Base",flags:Xe.Physical}]},{desc:"+#% Hit Chance",stats:[{name:"HitChance",valueType:"Base"}]},{desc:"#% Increased Attack Speed",tags:["Speed"],stats:[{name:"AttackSpeed",valueType:"Inc"}]},{desc:"#% More Attack Speed",tags:["Speed"],stats:[{name:"AttackSpeed",valueType:"More"}]},{desc:"#% Increased Maximum Mana",tags:["Mana"],stats:[{name:"MaxMana",valueType:"Inc"}]},{desc:"+# Maximum Mana",tags:["Mana"],stats:[{name:"MaxMana",valueType:"Base"}]},{desc:"+# Mana Regeneration",tags:["Mana"],stats:[{name:"ManaRegen",valueType:"Base"}]},{desc:"+#% Critical Hit Chance",tags:["Critical"],stats:[{name:"CritChance",valueType:"Base"}]},{desc:"+#% Critical Hit Multiplier",tags:["Critical"],stats:[{name:"CritMulti",valueType:"Base"}]},{desc:"+# Gold Per Second",tags:["Gold"],stats:[{name:"GoldPerSecond",valueType:"Base"}]}],na,ia,oa,_r,dn=class{constructor(e){C(this,na,void 0);C(this,ia,void 0);C(this,oa,[]);C(this,_r,[]);T(this,na,e);let r=[...e.matchAll(new RegExp("{(?<v1>\\d+(\\.\\d+)?)(-(?<v2>\\d+(\\.\\d+)?))?\\}","g"))],a=e.replace(/{[^}]+}/g,"#"),s=un.find(n=>n.desc===a);T(this,ia,s),T(this,oa,[...(s==null?void 0:s.tags)||[]]);for(let n of s.stats){let i=r[s.stats.indexOf(n)].groups;if(!i)throw Error();let{v1:c,v2:d}=i,f=parseFloat(c),m=parseFloat(d)||f,h=f;y(this,_r).push(new Ut({name:n.name,valueType:n.valueType,value:h,min:f,max:m,flags:n.flags||0}))}}get desc(){let e=0;return this.templateDesc.replace(/#+/g,r=>{var n;return((n=y(this,_r)[e++].value)==null?void 0:n.toFixed(r.length-1))||"#"})}get templateDesc(){return y(this,ia).desc}get tags(){return[...y(this,oa)]}get stats(){return y(this,_r)}compare(e){return un.findIndex(r=>r.desc===this.templateDesc)-un.findIndex(r=>r.desc===e.templateDesc)}static compare(e,r){return e.compare(r)}copy(){return new dn(y(this,na))}},xe=dn;na=new WeakMap,ia=new WeakMap,oa=new WeakMap,_r=new WeakMap;var ca,la,Vt,ua,Ft,$r,br,Ut=class{constructor(e){C(this,ca,void 0);C(this,la,void 0);C(this,Vt,void 0);C(this,ua,void 0);C(this,Ft,void 0);C(this,$r,void 0);C(this,br,void 0);T(this,ca,e.name),T(this,la,e.valueType),T(this,ua,e.flags),T(this,Ft,e.min),T(this,$r,e.max),T(this,Vt,e.value),T(this,br,e.source)}get name(){return y(this,ca)}get valueType(){return y(this,la)}get flags(){return y(this,ua)}get min(){return y(this,Ft)}get max(){return y(this,$r)}get value(){return y(this,Vt)}set value(e){T(this,Vt,e)}get source(){return y(this,br)}set source(e){T(this,br,e)}randomizeValue(){T(this,Vt,Math.random()*(y(this,$r)-y(this,Ft))+y(this,Ft))}};ca=new WeakMap,la=new WeakMap,Vt=new WeakMap,ua=new WeakMap,Ft=new WeakMap,$r=new WeakMap,br=new WeakMap;var ft,Ht,ns=class{constructor(){C(this,ft,void 0);C(this,Ht,new ut);T(this,ft,[])}get modList(){return y(this,ft)}get onChange(){return y(this,Ht)}add(e,r){e.forEach(a=>a.source=r),y(this,ft).push(...e),y(this,Ht).invoke([...this.modList])}removeBySource(e){T(this,ft,y(this,ft).filter(r=>!r||r.source!=e)),y(this,Ht).invoke([...this.modList])}clear(){y(this,ft).splice(0),y(this,Ht).invoke([...this.modList])}};ft=new WeakMap,Ht=new WeakMap;var is={Physical:1<<0,Elemental:1<<1,Chaos:1<<2},hd=(()=>{let t=[],e=Object.values(is).reduce((r,a)=>r+a);for(let r=0;r<=e;r++){let a=["Damage"];Object.entries(is).forEach(([s,n])=>{if(n&r){let i=`${s}Damage`;a.push(i)}}),t.push(a)}return t})();function Po(t){let e={statModList:t,flags:Xe.Attack,calcMinMax:rs},r=Oe("HitChance",e)/100,a=rs(0,1),s=r>=a;if(!s)return{hit:!1};e.flags=Xe.Attack;let n=mn(e).totalBaseDamage,i=Math.min(Oe("CritChance",e),100)/100,c=rs(0,1),d=i>=c,f=1;d&&(f=Oe("CritMulti",e)/100);let h=mt("BaseDamageMultiplier",e)/100*f,$=n*h;return{hit:s,crit:d,totalDamage:$}}function mn(t){t.conversionTable=pd(t);let e={totalBaseDamage:0,minPhysicalDamage:0,maxPhysicalDamage:0,physicalDamage:0,minElementalDamage:0,maxElementalDamage:0,elementalDamage:0,minChaosDamage:0,maxChaosDamage:0,chaosDamage:0},r=0;{t.flags|=Xe.Physical;let{min:a,max:s}=No("Physical",t);e.minPhysicalDamage=a,e.maxPhysicalDamage=s;let n=t.calcMinMax(a,s);e.physicalDamage=n,r+=n}return e.totalBaseDamage=r,e}function No(t,e,r=0){var h;r|=is[t];let a=0,s=0,n=["Physical","Elemental","Chaos"];for(let $ of n){if($===t)break;let b=((h=e.conversionTable)==null?void 0:h[$])[t];if(b>0){let{min:_,max:v}=No($,e,r);a+=Math.ceil(_*b),s+=Math.ceil(v*b)}}let i=mt("MinDamage",e),c=mt("MaxDamage",e),d=hd[r],f=Math.round(fn(d,i,e)+a),m=Math.round(fn(d,c,e)+s);return{min:f,max:m}}function pd(t){let e={},r=Object.keys(is);for(let a=0;a<r.length;a++){let s=r[a],n={},i={},c={},d=0,f=0;for(let h=a+1;h<r.length;h++){let $=r[a],b=`${s}ConvertedTo${$}`;n[$]=mt(b,t),d+=n[$],i[$]=mt(b,t),f+=i[$],c[$]=mt(`${s}GainAs${$}`,t)}if(f>100){let h=100/f;for(let $ of Object.keys(i))i[$]*=h}else if(d+f>100){let h=(100-f)/d;for(let $ of Object.keys(n))n[$]*=h}let m={multi:1};for(let[h,$]of Object.entries(n)){let b=i[h]||0,_=c[h]||0;m[h]=($+b+_)/100}m.multi=1-Math.min((d+f)/100,1),e[s]=m}return e.Chaos={multi:1},e}function Do(t){let e={statModList:t,flags:Xe.Attack,calcMinMax:To},r=Oe("HitChance",e)/100,a=cn(r,0,1),s=Oe("AttackSpeed",e),n=mt("BaseDamageMultiplier",e)/100,i=Oe("MaxMana",e),c=Oe("ManaRegen",e),d=Oe("AttackManaCost",e),f=Oe("CritChance",e)/100,m=cn(f,0,1),h=Math.max(Oe("CritMulti",e),100)/100,$=1+m*h,b=mn(e),_=n*$,v=b.totalBaseDamage*a*s*_;return{hitChance:r*100,clampedHitChance:a*100,attackSpeed:s,critChance:f*100,clampedCritChance:m*100,critMulti:h*100,maxMana:i,manaRegen:c,attackManaCost:d,dps:v,minPhysicalDamage:b.minPhysicalDamage,maxPhysicalDamage:b.maxPhysicalDamage,goldPerSecond:Oe("GoldPerSecond",e)}}function mt(t,e){return hn("Base",t,e)}function Io(t,e){return Math.max(0,1+hn("Inc",t,e)/100)}function ko(t,e){return Math.max(0,hn("More",t,e))}function fn(t,e,r){if(e<=0)return 0;let a=Io(t,r),s=ko(t,r);return e*a*s}function Oe(t,e){let r=mt(t,e);if(r===0)return 0;let a=Io(t,e),s=ko(t,e);return r*a*s}function hn(t,e,r){e=Array.isArray(e)?e:[e];let a=t==="More"?1:0,s=(i,c)=>(i&c)===c,n=r.statModList.filter(i=>!(!e.includes(i.name)||i.valueType!==t||!s(r.flags,i.flags||0)));for(let i of n){let c=i.value;t==="More"?a*=1+c/100:a+=c}return Math.max(0,a)}var gd=document.querySelector(".p-combat [data-healthbar]"),da=new ee(0),wr=new ee(0),Er=0,pn=new ut;function Ro(t){wr.onChange.removeAllListeners(),wr.onChange.listen(e=>{e<=0&&(Er=Math.min(Er+1,t.enemyList.length-1),pn.invoke(Er),da.set(t.enemyList[Er]),wr.set(da.get())),yd()}),Er=0,da.set(t.enemyList[Er]),wr.set(da.get())}function Oo(t){wr.subtract(t)}function yd(){let t=wr.get()/da.get()*100;gd.style.width=t+"%"}var Sr=(t,e)=>{let r=new IntersectionObserver(a);return r.observe(t),r;function a(s,n){s.forEach(i=>{e(i.isIntersecting)})}};var Cr={"Time Played":{value:new ee(0),formatType:"time"},"Gold Generated":{value:new ee(0)},"Mana Generated":{value:new ee(0)},Hits:{value:new ee(0)},"Critical Hits":{value:new ee(0)},"Total Damage":{value:new ee(0)},"Total Physical Damage":{value:new ee(0)},"Prestige Count":{value:new ee(0)}},qo;Sr(document.querySelector(".p-game .p-statistics"),vd);function vd(t){console.log(t),t?(Object.entries(Cr).forEach(([e,r])=>Ao(e,r.value)),qo=ge.subscribe(()=>Object.entries(Cr).forEach(([e,r])=>Ao(e,r.value)),{intervalMilliseconds:1e3})):ge.unsubscribe(qo)}function jo(){let t=[],e=r=>{let a=document.createElement("li");a.classList.add("g-field","hidden");let s=document.createElement("div");a.appendChild(s);let n=document.createElement("var");return a.appendChild(n),s.textContent=r,n.setAttribute("data-stat",r),n.setAttribute("data-format-type",Cr[r].formatType||""),a};for(let r of Object.keys(Cr)){let a=e(r);t.push(a)}document.querySelector(".p-statistics ul").replaceChildren(...t)}function Ao(t,e){let r=document.querySelector(`.p-statistics [data-stat="${t}"]`);if(!r)return;let a=e.get()===0;if(r.parentElement.classList.toggle("hidden",a),a)return;switch(r.getAttribute("data-format-type")){case"time":let n=new Date(null);n.setSeconds(e.get());let i=n.toISOString().substring(11,19);r.textContent=i;break;default:r.textContent=e.get().toFixed(0)}}var le=Object.fromEntries(Object.keys(Cr).map(t=>[t,Cr[t].value]));var os=document.querySelector(".p-game > .s-stats"),_d=document.querySelector(".p-combat [data-manabar]"),Lo,$e=new ns;$e.onChange.listen(Fo);var I=Object.freeze({level:new ee(1),gold:new ee(0),goldPerSecond:new ee(0),attackSpeed:new ee(0),attackManaCost:new ee(0),maxMana:new ee(0),curMana:new ee(0),manaRegen:new ee(0)});I.level.onChange.listen(t=>os.querySelector('[data-stat="level"]').textContent=t.toString());I.gold.onChange.listen(t=>os.querySelector('[data-stat="gold"]').textContent=t.toString());I.curMana.onChange.listen(t=>{let e=I.maxMana.get();I.curMana.get()>e&&I.curMana.set(e),$d()});pn.listen(t=>{let e=t+1;e!==I.level.get()&&I.level.set(e)});function xo(t){t&&t.modList.forEach(e=>{$e.add(new xe(e).stats,"Player")}),ge.subscribe(()=>{let e=I.goldPerSecond.get();I.gold.add(e),le["Gold Generated"].add(e)},{intervalMilliseconds:1e3}),ge.subscribe(e=>{let r=I.manaRegen.get()*e;I.curMana.add(r),le["Mana Generated"].add(r)}),bd()}async function Vo(){await Fo(),I.curMana.set(I.maxMana.get())}async function Fo(){return new Promise((t,e)=>{clearTimeout(Lo),Lo=setTimeout(async()=>{let r=Do($e.modList);I.attackSpeed.set(r.attackSpeed),I.goldPerSecond.set(r.goldPerSecond),I.maxMana.set(r.maxMana),I.manaRegen.set(r.manaRegen),I.attackManaCost.set(r.attackManaCost),os.querySelector('[data-stat="dps"]').textContent=r.dps.toFixed(),os.querySelectorAll("[data-stat]").forEach(a=>{let s=a.getAttribute("data-stat"),n=r[s];if(typeof n=="number"){let i=Number(a.getAttribute("data-digits")||0);a.textContent=n.toFixed(i)}}),t(null)},1)})}function $d(){let t=I.curMana.get()/I.maxMana.get()*100;_d.style.width=t+"%"}function bd(){let t=0;ge.subscribe(e=>{let r=I.attackSpeed.get();if(typeof r!="number")throw Error();if(t+=e*r,t>=1){let a=I.curMana.get(),s=I.attackManaCost.get();a>s&&(t-=1,I.curMana.subtract(s),Ed())}})}function Ed(){let t=Po($e.modList);!t.hit||(le.Hits.add(1),le["Total Damage"].add(t.totalDamage),le["Total Physical Damage"].add(t.totalDamage),t.crit&&le["Critical Hits"].add(1),Oo(t.totalDamage))}var Ho;(Ho=document.querySelector(".p-skills .s-skill-info [data-enable]"))==null||Ho.addEventListener("click",()=>{Mr.selected.enable()});function Uo(t){var r,a;if(t.skillList.sort((s,n)=>s.levelReq-n.levelReq),t.skillList[0].levelReq>1)throw new Error("Skill levelReq at 0 index must have a minimum value of 1");let e=[];for(let s of t.skillList){let n=((r=s.mods)==null?void 0:r.map(c=>new xe(c)))||[],i=new Mr({name:s.name,levelReq:s.levelReq,attackSpeed:s.attackSpeed,manaCost:s.manaCost,baseDamageMultiplier:s.baseDamageMultiplier,mods:n});e.push(i)}(a=document.querySelector(".p-skills ul[data-skill-list]"))==null||a.replaceChildren(...e.map(s=>s.element)),e[0].select(),e[0].enable()}var Et,Tr,zt,Gt,Kt,fa,wt,ma,ha,gn,cs,zo,bt=class{constructor(e){C(this,ha);C(this,cs);C(this,Et,void 0);C(this,Tr,void 0);C(this,zt,void 0);C(this,Gt,void 0);C(this,Kt,void 0);C(this,fa,void 0);C(this,wt,void 0);C(this,ma,void 0);T(this,Et,e.name),T(this,Tr,e.levelReq),T(this,zt,e.attackSpeed),T(this,Gt,e.baseDamageMultiplier),T(this,Kt,e.manaCost),T(this,fa,e.mods),T(this,wt,ce(this,cs,zo).call(this)),T(this,ma,I.level.onChange.listen(()=>ce(this,ha,gn).call(this))),ce(this,ha,gn).call(this)}get name(){return y(this,Et)}get levelReq(){return y(this,Tr)}get attackSpeed(){return y(this,zt)}get baseDamageMultiplier(){return y(this,Gt)}get manaCost(){return y(this,Kt)}get mods(){return y(this,fa)}get element(){return y(this,wt)}get sourceName(){return`Skills/${y(this,Et)}`}select(){bt.selected=this,document.querySelectorAll(".p-skills ul[data-skill-list] li").forEach(e=>{e.classList.toggle("selected",e===y(this,wt))}),this.show()}enable(){var e;document.querySelectorAll(".p-skills ul[data-skill-list] li").forEach(r=>{r.classList.toggle("enabled",r===y(this,wt))}),$e.removeBySource((e=bt.enabled)==null?void 0:e.sourceName),bt.enabled=this,$e.add([new Ut({name:"BaseDamageMultiplier",valueType:"Base",value:y(this,Gt)})],this.sourceName),$e.add([new Ut({name:"AttackSpeed",valueType:"Base",value:y(this,zt)})],this.sourceName),$e.add([new Ut({name:"AttackManaCost",valueType:"Base",value:y(this,Kt)})],this.sourceName),this.mods.forEach(r=>$e.add(r.stats,this.sourceName)),this.show()}show(){var a;document.querySelector(".p-skills .s-skill-info [data-title]").textContent=y(this,Et),document.querySelector('.p-skills .s-skill-info [data-stat="attackSpeed"]').textContent=y(this,zt).toFixed(2),document.querySelector('.p-skills .s-skill-info [data-stat="manaCost"]').textContent=y(this,Kt).toFixed(0),document.querySelector('.p-skills .s-skill-info [data-stat="baseDamageMultiplier"]').textContent=y(this,Gt).toFixed(0)+"%";let e=[];for(let s of this.mods){let n=document.createElement("div");n.classList.add("g-mod-desc"),n.textContent=s.desc,e.push(n)}(a=document.querySelector(".p-skills .s-skill-info [data-mod-list]"))==null||a.replaceChildren(...e);let r=document.querySelector(".p-skills [data-enable]");r.toggleAttribute("disabled",this===bt.enabled),r.textContent=this===bt.enabled?"Enabled":"Enable",this.element.classList.toggle("enabled",this===bt.enabled)}},Mr=bt;Et=new WeakMap,Tr=new WeakMap,zt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,fa=new WeakMap,wt=new WeakMap,ma=new WeakMap,ha=new WeakSet,gn=function(){y(this,Tr)>I.level.get()||(y(this,wt).classList.remove("hidden"),console.log("unlocked",this.sourceName),I.level.onChange.removeListener(y(this,ma)))},cs=new WeakSet,zo=function(){let e=document.createElement("li");return e.textContent=y(this,Et),e.classList.add("g-list-item","hidden"),e.addEventListener("click",()=>{document.querySelectorAll(".p-skills ul[data-skill-list]").forEach(r=>{r.classList.toggle("selected",r===e)}),this.select(),this.show()}),e},ct(Mr,"enabled"),ct(Mr,"selected");var ls=1e3/25,Bt,Jt,Pr,us,pa=class{constructor(){C(this,Bt,new Map);C(this,Jt,!1);C(this,Pr,void 0);C(this,us,0)}get running(){return y(this,Jt)}subscribe(e,r){let a=ts(this,us)._++,s={callback:e,time:0,id:a,options:r};return y(this,Bt).set(a,s),a}unsubscribe(e){y(this,Bt).delete(e)}reset(){y(this,Bt).clear(),T(this,Jt,!1)}start(){this.running||(T(this,Jt,!0),this.beginLoop())}stop(){T(this,Jt,!1),clearTimeout(y(this,Pr))}beginLoop(){let e=0,r=performance.now(),a=()=>{clearTimeout(y(this,Pr)),T(this,Pr,setTimeout(()=>{let s=performance.now()-r+e;for(r=performance.now();s>ls;){let n=Math.min(s,ls);s-=ls;let i=n/1e3;y(this,Bt).forEach(c=>{var f;c.time+=n;let d=((f=c.options)==null?void 0:f.intervalMilliseconds)||0;c.time>d&&(c.callback(i),c.time-=d||c.time)})}a()},ls))};a()}};Bt=new WeakMap,Jt=new WeakMap,Pr=new WeakMap,us=new WeakMap;var wd=6,Sd=20,Cd=.02,Wt={reforge:{desc:"Reforge the item with new random modifiers",validate:t=>new ue().modsIsNotEmpty(t.modTables.general),getItemMods:t=>new de().addMultiple(t.modTables.general,Nr(0)).modList},reforgeIncludePhysical:{desc:"Reforge the item with new random modifiers, including a [physical] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Physical"),getItemMods:t=>new de().addOneByTag(t.modTables.general,"Physical").addMultiple(t.modTables.general,Nr(1)).modList},reforgeIncludeMana:{desc:"Reforge the item with new random modifiers, including a [mana] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Mana"),getItemMods:t=>new de().addOneByTag(t.modTables.general,"Mana").addMultiple(t.modTables.general,Nr(1)).modList},reforgeIncludeCritical:{desc:"Reforge the item with new random modifiers, including a [critical] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Critical"),getItemMods:t=>new de().addOneByTag(t.modTables.general,"Critical").addMultiple(t.modTables.general,Nr(1)).modList},reforgeHigherChanceSameMods:{desc:"Reforge the item with a higher chance of receiving the same modifiers",validate:t=>new ue().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>{let e=[...t.modTables.general].reduce((r,a)=>(t.itemModList.some(s=>s===a)&&(a.weight*=Sd),r.push(a),r),[]);return new de().addMultiple(e,Nr(0)).modList}},reforgeLowerChanceSameMods:{desc:"Reforge the item with a lower chance of receiving the same modifiers",validate:t=>new ue().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>{let e=[...t.modTables.general].reduce((r,a)=>(t.itemModList.some(s=>s===a)&&(a.weight*=Cd),r.push(a),r),[]);return new de().addMultiple(e,Nr(0)).modList}},addRandom:{desc:"Add a random modifier",validate:t=>new ue().itemHasSpaceForMods(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>new de(t.itemModList).addOne(t.modTables.general).modList},addPhysical:{desc:"Add a [physical] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Physical"),getItemMods:t=>new de(t.itemModList).addOneByTag(t.modTables.general,"Physical").modList},addMana:{desc:"Add a [mana] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Mana"),getItemMods:t=>new de(t.itemModList).addOneByTag(t.modTables.general,"Mana").modList},addCritical:{desc:"Add a [critical] modifier",validate:t=>new ue().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Critical"),getItemMods:t=>new de(t.itemModList).addOneByTag(t.modTables.general,"Critical").modList},removeRandom:{desc:"Remove a random modifier",validate:t=>new ue().itemHasModifiers(t.itemModList),getItemMods:t=>new de(t.itemModList).removeRandom().modList},removeRandomAddRandom:{desc:"Remove a random modifier and add a new random modifier",validate:t=>new ue().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>new de(t.itemModList).removeRandom().addOne(t.modTables.general).modList},removeRandomAddPhysical:{desc:"Remove a random modifier and add a new [physical] modifier",validate:t=>new ue().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Physical").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Physical"),getItemMods:t=>new de(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Physical").modList},removeRandomAddMana:{desc:"Remove a random modifier and add a new [mana] modifier",validate:t=>new ue().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Mana").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Mana"),getItemMods:t=>new de(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Mana").modList},removeRandomAddCritical:{desc:"Remove a random modifier and add a new [critical] modifier",validate:t=>new ue().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Critical").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Critical"),getItemMods:t=>new de(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Critical").modList}},ue=class{constructor(){ct(this,"errors",[]);this.errors=[]}itemHasSpaceForMods(e){return e.length>=wd&&this.errors.push("Item cannot have any more modifiers"),this}itemHasModifiers(e){return e.length===0&&this.errors.push("Item has no modifiers"),this}itemCanCraftModWithTag(e,r,a){return r.filter(n=>{var i;return((i=n.tags)==null?void 0:i.includes(a))&&!e.some(c=>c===n)}).length===0&&this.errors.push(`There are no ${a} modifiers available`),this}modsIsNotEmpty(e){return e.length===0&&this.errors.push("No modifiers available"),this}modsContainsTag(e,r){return e.some(a=>{var s;return(s=a.tags)==null?void 0:s.includes(r)})||this.errors.push(`No modifier was available with the tag: ${r}`),this}},Dr,ds,fs,Go,de=class{constructor(e=[]){C(this,Dr);C(this,fs);ct(this,"modList");this.modList=[...e]}addOne(e){return this.modList.push(...ce(this,Dr,ds).call(this,e,this.modList,1)),this}addOneByTag(e,r){return e=e.filter(a=>{var s;return(s=a.tags)==null?void 0:s.includes(r)}),this.modList.push(...ce(this,Dr,ds).call(this,e,this.modList,1)),this}addMultiple(e,r){return this.modList.push(...ce(this,Dr,ds).call(this,e,this.modList,r)),this}removeRandom(){let e=ce(this,fs,Go).call(this,0,this.modList.length);return this.modList.splice(e,1),this}};Dr=new WeakSet,ds=function(e,r=[],a){let s=[];for(let n=0;n<a;n++){let i=[...s,...r];e=e.filter(f=>!i.some(m=>f.templateDesc===m.templateDesc));let c=e.reduce((f,m)=>f+=m.weight,0),d=Math.random()*c;for(let f of e)if(c-=f.weight,c<=d){let m=f.copy();m.stats.forEach(h=>h.randomizeValue()),console.log(m.desc),s.push(m);break}}return s},fs=new WeakSet,Go=function(e,r){return Math.floor(Math.random()*(r-e)+e)};var Nr=(t=0)=>{let e=[0,0,40,50,30,20].slice(t,6),r=e.reduce((s,n)=>s+n),a=Math.random()*r;for(let s=0;s<e.length;s++)if(r-=e[s],r<=a)return s+1;throw Error()};document.querySelector(".p-items .s-craft-container [data-craft-button]").addEventListener("click",Pd);document.querySelector(".p-items .s-preset-container [data-new]").addEventListener("click",()=>{let t=new Ve("New Preset",[]);t.select(),t.edit()});document.querySelector(".p-items .s-preset-container [data-edit]").addEventListener("click",()=>{var t;(t=Ve.active)==null||t.edit()});document.querySelector(".p-items .s-preset-container [data-remove]").addEventListener("click",()=>{var t;(t=Ve.active)==null||t.delete()});var Qt=document.querySelector(".p-items [data-preset-modal]"),Ko;(Ko=Qt.querySelector('input[type="submit"]'))==null||Ko.addEventListener("click",()=>{var t;return(t=Ve.active)==null?void 0:t.apply()});var Bo=[],St={cost:0,id:"reforge"};Sr(document.querySelector(".p-items"),t=>{Ir()});async function Jo(t){var r;for(let a of t.modTables.general)for(let s=0;s<a.length;s++){let n=a[s];Bo.push(new yn(n,a))}let e=[];for(let a of t.itemList){let s=new Ze(a);e.push(s);let n=()=>I.level.get()<s.levelReq;if(n()){let i=I.level.onChange.listen(c=>{n()||(s.unlock(),I.level.onChange.removeListener(i))})}s.element.classList.toggle("hidden",n())}(r=document.querySelector(".p-items [data-item-list]"))==null||r.replaceChildren(...e.map(a=>a.element)),Md(t.craftList),Td(t.craftList),new Ve("All",Object.keys(Wt)).select(),new Ve("Reforge",["reforge","reforgeIncludePhysical","reforgeIncludeMana","reforgeIncludeCritical"]),e[0].element.click(),I.gold.onChange.listen(_n)}function Md(t){var r;let e=Wo(t);e.forEach(a=>{a.addEventListener("click",()=>{e.forEach(n=>{n.classList.toggle("selected",n===a)});let s=a.getAttribute("data-craft-id");St.id=s,St.cost=t.find(n=>n.id===s).cost,_n()})}),Ir(),I.gold.onChange.listen(a=>{document.querySelector(".p-items").classList.contains("hidden")||Ir()}),(r=document.querySelector(".p-items .s-craft-container [data-craft-list]"))==null||r.replaceChildren(...e)}function Td(t){var r;let e=Wo(t);e.forEach(a=>{a.addEventListener("click",()=>{a.classList.toggle("selected",!a.classList.contains("selected"))})}),(r=document.querySelector(".p-items [data-preset-modal] [data-craft-list]"))==null||r.replaceChildren(...e)}function Wo(t){let e=[];for(let r of t){let a=document.createElement("li");a.classList.add("g-field","g-list-item");let s=Wt[r.id].desc.replace(/\[\w+\]/g,n=>`<span>${n.substring(1,n.length-1)}</span>`);a.insertAdjacentHTML("beforeend",`<div>${s}</div>`),a.insertAdjacentHTML("beforeend",`<i data-cost="${r.cost}">${r.cost}</i>`),a.setAttribute("data-craft-id",r.id),e.push(a)}return e}function Qo(){var t,e;if((t=Ze.active)!=null&&t.mods){let r=[];for(let a of Ze.active.mods.sort(xe.compare)){let s=a.desc,n=document.createElement("li");n.classList.add("g-mod-desc"),n.textContent=s,r.push(n)}(e=document.querySelector(".p-items [data-mod-list]"))==null||e.replaceChildren(...r)}}function Ir(){var a;if(!Ve.active)return;let t=Ve.active.ids;document.querySelectorAll(".p-items .s-craft-container [data-craft-id]").forEach(s=>{let n=s.getAttribute("data-craft-id"),i=!t.includes(n);if(s.classList.toggle("hidden",i),!i){let c=s.querySelector("i"),d=c.getAttribute("data-cost"),f=parseInt(d),m=I.gold.get()>=f;c.toggleAttribute("data-insufficient-cost",!m)}}),document.querySelector(".p-items .s-craft-container .selected[data-craft-id]:not(.hidden)")||(a=document.querySelector(".p-items .s-craft-container [data-craft-id]:not(.hidden)"))==null||a.click()}function Xo(){return{itemModList:Ze.active.mods,modTables:{general:Bo.filter(t=>t.levelReq<=I.level.get())}}}function _n(){if(!Ze.active||!Wt[St.id])return;let t="",e=Wt[St.id];if(!e){console.error("invalid craft id");return}I.gold.get()<St.cost&&(t="You cannot afford this craft");let r=Xo(),a=e.validate(r);a.errors.length>0&&(t=a.errors[0]),document.querySelector(".p-items .s-craft-container [data-craft-message]").textContent=t,document.querySelector(".p-items .s-craft-container [data-craft-button]").toggleAttribute("disabled",t.length>0)}function Pd(){if(!Ze.active||!Wt[St.id])return;console.log("perform craft");let t=Wt[St.id],e=Xo();Ze.active.mods=t.getItemMods(e),I.gold.subtract(St.cost),Qo()}var ga,ya,Xt,va,kr,ms,Yo,$n=class{constructor({name:e,levelReq:r}){C(this,ms);C(this,ga,void 0);C(this,ya,void 0);C(this,Xt,void 0);C(this,va,void 0);C(this,kr,void 0);T(this,ga,e),T(this,ya,r),T(this,Xt,[]),T(this,va,ce(this,ms,Yo).call(this)),T(this,kr,`Skills/${e}`)}get name(){return y(this,ga)}get levelReq(){return y(this,ya)}get mods(){return[...y(this,Xt)]}set mods(e){$e.removeBySource(y(this,kr)),T(this,Xt,e),$e.add(y(this,Xt).flatMap(r=>r.stats),y(this,kr))}get element(){return y(this,va)}unlock(){this.element.classList.remove("hidden")}},Ze=$n;ga=new WeakMap,ya=new WeakMap,Xt=new WeakMap,va=new WeakMap,kr=new WeakMap,ms=new WeakSet,Yo=function(){let e=document.createElement("li");return e.classList.add("g-list-item","item"),e.textContent=this.name,e.addEventListener("click",()=>{$n.active=this,document.querySelectorAll(".p-items [data-item-list] .item").forEach(r=>{r.classList.toggle("selected",r===e)}),Qo(),_n()}),e},ct(Ze,"active");var _a,$a,Rr,ba,Or,bn=class extends xe{constructor(r,a){super(r.mod);C(this,_a,void 0);C(this,$a,void 0);C(this,Rr,void 0);C(this,ba,void 0);C(this,Or,void 0);T(this,_a,r),T(this,$a,r.levelReq),T(this,Rr,r.weight),T(this,ba,a.findIndex(s=>s===r)),T(this,Or,a)}get levelReq(){return y(this,$a)}get weight(){return y(this,Rr)}set weight(r){T(this,Rr,r)}get tier(){let r=y(this,Or).filter(a=>a.levelReq<=I.level.get()).length-1;return Math.max(1,r-y(this,ba))}copy(){return new bn(y(this,_a),y(this,Or))}},yn=bn;_a=new WeakMap,$a=new WeakMap,Rr=new WeakMap,ba=new WeakMap,Or=new WeakMap;var Yt,qr,Ye,hs,Zo,ps,ec,vn,Nd,gs=class{constructor(e,r=[]){C(this,hs);C(this,ps);C(this,vn);C(this,Yt,void 0);C(this,qr,void 0);C(this,Ye,void 0);T(this,Yt,e),T(this,qr,[...r]),T(this,Ye,ce(this,hs,Zo).call(this)),this.setName(this.name)}get name(){return y(this,Yt)}get ids(){return y(this,qr)}select(){y(this,Ye).click()}setName(e){T(this,Yt,e.replace(/[^A-Za-z 0-9]/g,"")),y(this,Ye).textContent=this.name}edit(){ce(this,ps,ec).call(this)}delete(){var e,r;gs.active=null,y(this,Ye).previousElementSibling?(e=y(this,Ye).previousElementSibling)==null||e.click():(r=y(this,Ye).nextElementSibling)==null||r.click(),y(this,Ye).remove(),Ir()}apply(){this.setName(Qt.querySelector("[data-name]").value),T(this,qr,Array.from(Qt.querySelectorAll("[data-craft-list] [data-craft-id].selected")).map(e=>e.getAttribute("data-craft-id"))),Ir()}},Ve=gs;Yt=new WeakMap,qr=new WeakMap,Ye=new WeakMap,hs=new WeakSet,Zo=function(){var r;let e=document.createElement("li");return e.classList.add("g-list-item","preset"),e.addEventListener("click",()=>{gs.active=this,document.querySelectorAll(".p-items [data-preset-list] li").forEach(a=>{a.classList.toggle("selected",a===e)}),Ir()}),(r=document.querySelector(".p-items [data-preset-list]"))==null||r.appendChild(e),e},ps=new WeakSet,ec=function(){Qt.querySelector("input[data-name]").value=y(this,Yt),Qt.querySelectorAll("[data-craft-list] [data-craft-id]").forEach(e=>{e.classList.toggle("selected",this.ids.includes(e.getAttribute("data-craft-id")))}),Qt.showModal()},vn=new WeakSet,Nd=function(e){Qt.close()},ct(Ve,"active");var Dd=[[/^Reach Level {(\d+)}$/,()=>I.level.get().toFixed()],[/^Prestige {\d+}?$/,()=>le["Prestige Count"].get().toFixed()],[/^Deal Damage {(\d+)}$/,()=>le["Total Damage"].get().toFixed()],[/^Deal Physical Damage {(\d+)}$/,()=>le["Total Physical Damage"].get().toFixed()],[/^Perform Hits {(\d+)}$/,()=>le.Hits.get().toFixed()],[/^Perform Critical Hits {(\d+)}$/,()=>le["Critical Hits"].get().toFixed()],[/^Generate Gold {(\d+)}$/,()=>le["Gold Generated"].get().toFixed()],[/^Regenerate Mana {(\d+)}$/,()=>le["Mana Generated"].get().toFixed()]],Ar=[],tc=-1;Sr(document.querySelector(".p-game .p-achievements"),Id);function rc(t){Ar.splice(0);for(let e of t.list)Ar.push(new En(e));document.querySelector(".p-achievements ul").replaceChildren(...Ar.map(e=>e.element)),ge.subscribe(()=>{Ar.filter(e=>!e.completed).forEach(e=>{e.validate()&&e.complete()})},{intervalMilliseconds:1e3})}function Id(t){t?(Ar.forEach(e=>e.updateDescription()),tc=ge.subscribe(()=>Ar.forEach(e=>e.updateDescription()),{intervalMilliseconds:1e3})):ge.unsubscribe(tc)}var Ct,ht,jr,Mt,Zt,Tt,pt,ys,ac,vs,sc,_s,nc,En=class{constructor(e){C(this,ys);C(this,vs);C(this,_s);C(this,Ct,!1);C(this,ht,void 0);C(this,jr,void 0);C(this,Mt,void 0);C(this,Zt,void 0);C(this,Tt,void 0);C(this,pt,void 0);T(this,Zt,e.description.replace(/[{}]/g,"")),T(this,Tt,[...(e==null?void 0:e.modList)||[]]);let r=Dd.find(s=>s[0].exec(e.description));if(!r)throw Error("no achievement validator found");T(this,ht,r);let a=r[0].exec(e.description);T(this,Mt,Number(a[1])),T(this,jr,e.description.match(/{\d+}/).index),T(this,pt,ce(this,_s,nc).call(this))}get completed(){return y(this,Ct)}get modList(){return y(this,Tt)}get element(){return y(this,pt)}updateDescription(){y(this,Ct)||(y(this,pt).querySelector("[data-cur-value]").textContent=y(this,ht)[1]())}validate(){if(y(this,Ct))return;let e=Number(y(this,ht)[1]()),r=!1;return y(this,ht)[2]?r=y(this,ht)[2](e,y(this,Mt)):r=e>=y(this,Mt),r}complete(){T(this,Ct,!0),ce(this,ys,ac).call(this),ce(this,vs,sc).call(this),y(this,pt).querySelector("var").toggleAttribute("data-valid",y(this,Ct)),console.log("test"),ln(document.querySelector('.p-game menu [data-tab-target="achievements"]'),"click"),ln(y(this,pt),"mouseover")}};Ct=new WeakMap,ht=new WeakMap,jr=new WeakMap,Mt=new WeakMap,Zt=new WeakMap,Tt=new WeakMap,pt=new WeakMap,ys=new WeakSet,ac=function(){let e=y(this,Tt).map(r=>new xe(r));$e.add(e.flatMap(r=>r.stats),"Achievement/"+y(this,Zt))},vs=new WeakSet,sc=function(){let e=y(this,pt).querySelector("var"),r=e.innerHTML,a=r.indexOf("</span>");e.innerHTML=r.substring(a+8)},_s=new WeakSet,nc=function(){let e=document.createElement("li");e.classList.add("g-accordion");let r=document.createElement("div");if(e.appendChild(r),r.classList.add("header"),r.insertAdjacentHTML("beforeend",`<div>${y(this,Zt).substring(0,y(this,jr))}<var><span data-cur-value>${y(this,ht)[1]()}</span>/${y(this,Mt).toString()}</var>${y(this,Zt).substring(y(this,jr)+y(this,Mt).toString().length)}</div>`),y(this,Tt).length>0){let a=document.createElement("div");e.appendChild(a),a.classList.add("content");for(let s of y(this,Tt))a.insertAdjacentHTML("beforeend",`<div class="g-mod-desc">${s.replace(/[{}]/g,"")}</div>`);r.insertAdjacentHTML("beforeend","<i></i>"),r.addEventListener("click",()=>{r.toggleAttribute("data-open")})}return e};function wn(t){ic("items",t.items,Jo),ic("achievements",t.achievements,rc)}function ic(t,e,r){e?(e.levelReq>1&&document.querySelector(`.p-game > menu [data-tab-target="${t}"]`).classList.add("hidden"),r(e)):(document.querySelector(`.p-game > menu [data-tab-target="${t}"]`).classList.add("hide"),document.querySelector(`.p-game .p-${t}`).remove())}as(document.querySelector(".p-game > menu"),document.querySelector(".p-game"));globalThis.dev={game:{playerStats:I}};var ge=new pa;(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&document.addEventListener("keydown",t=>{t.code==="Space"&&(ge.running?(document.title="Tinkerers Subject (Stopped)",ge.stop()):(ge.start(),document.title="Tinkerers Subject (Running)"))});async function oc(t){ge.reset(),Ro(t.enemies),xo(t.player),Uo(t.skills),wn({items:t.items,achievements:t.achievements}),ge.subscribe(e=>{le["Time Played"].add(1)},{intervalMilliseconds:1e3}),await Vo(),jo()}var Tu=md(Cu(),1);var Mu=new Tu.default;globalThis.initTabs=as;Mg();async function Mg(){var a;let t=await(await fetch("/public/gconfig/schema.json")).json(),e=await(await fetch("/public/gconfig/demo.json")).json();if(!Mu.validate(t,e)){console.error(Mu.errors);return}console.log("%c Module is valid","color: #10782b"),await oc(e),(a=document.querySelector(".p-game menu li:nth-child(1)[data-tab-target]"))==null||a.click(),document.body.classList.remove("hidden")}})();
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
//# sourceMappingURL=main.js.map

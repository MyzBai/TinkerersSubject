"use strict";(()=>{var Ed=Object.create;var ii=Object.defineProperty,Sd=Object.defineProperties,wd=Object.getOwnPropertyDescriptor,Cd=Object.getOwnPropertyDescriptors,Td=Object.getOwnPropertyNames,lc=Object.getOwnPropertySymbols,Md=Object.getPrototypeOf,uc=Object.prototype.hasOwnProperty,Pd=Object.prototype.propertyIsEnumerable;var si=(t,e,r)=>e in t?ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,De=(t,e)=>{for(var r in e||(e={}))uc.call(e,r)&&si(t,r,e[r]);if(lc)for(var r of lc(e))Pd.call(e,r)&&si(t,r,e[r]);return t},ut=(t,e)=>Sd(t,Cd(e));var Hn=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Id=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Td(e))!uc.call(t,a)&&a!==r&&ii(t,a,{get:()=>e[a],enumerable:!(n=wd(e,a))||n.enumerable});return t};var dc=(t,e,r)=>(r=t!=null?Ed(Md(t)):{},Id(e||!t||!t.__esModule?ii(r,"default",{value:t,enumerable:!0}):r,t));var Nt=(t,e,r)=>(si(t,typeof e!="symbol"?e+"":e,r),r),oi=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var C=(t,e,r)=>(oi(t,e,"read from private field"),r?r.call(t):e.get(t)),L=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},F=(t,e,r,n)=>(oi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ts=(t,e,r,n)=>({set _(a){F(t,e,a,r)},get _(){return C(t,e,n)}}),qe=(t,e,r)=>(oi(t,e,"access private method"),r);var Zc=x((Xc,Ci)=>{(function(t){if(typeof Xc=="object"&&typeof Ci<"u")Ci.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=t()}})(function(){var t,e,r;return function n(a,s,i){function l(y,$){if(!s[y]){if(!a[y]){var b=typeof Hn=="function"&&Hn;if(!$&&b)return b(y,!0);if(f)return f(y,!0);var S=new Error("Cannot find module '"+y+"'");throw S.code="MODULE_NOT_FOUND",S}var M=s[y]={exports:{}};a[y][0].call(M.exports,function(T){var N=a[y][1][T];return l(N||T)},M,M.exports,n,a,s,i)}return s[y].exports}for(var f=typeof Hn=="function"&&Hn,g=0;g<i.length;g++)l(i[g]);return l}({1:[function(n,a,s){(function(i){"use strict";var l=i.MutationObserver||i.WebKitMutationObserver,f;if(l){var g=0,y=new l(T),$=i.document.createTextNode("");y.observe($,{characterData:!0}),f=function(){$.data=g=++g%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var b=new i.MessageChannel;b.port1.onmessage=T,f=function(){b.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?f=function(){var A=i.document.createElement("script");A.onreadystatechange=function(){T(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},i.document.documentElement.appendChild(A)}:f=function(){setTimeout(T,0)};var S,M=[];function T(){S=!0;for(var A,z,V=M.length;V;){for(z=M,M=[],A=-1;++A<V;)z[A]();V=M.length}S=!1}a.exports=N;function N(A){M.push(A)===1&&!S&&f()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,a,s){"use strict";var i=n(1);function l(){}var f={},g=["REJECTED"],y=["FULFILLED"],$=["PENDING"];a.exports=b;function b(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=$,this.queue=[],this.outcome=void 0,k!==l&&N(this,k)}b.prototype.catch=function(k){return this.then(null,k)},b.prototype.then=function(k,Q){if(typeof k!="function"&&this.state===y||typeof Q!="function"&&this.state===g)return this;var K=new this.constructor(l);if(this.state!==$){var re=this.state===y?k:Q;M(K,re,this.outcome)}else this.queue.push(new S(K,k,Q));return K};function S(k,Q,K){this.promise=k,typeof Q=="function"&&(this.onFulfilled=Q,this.callFulfilled=this.otherCallFulfilled),typeof K=="function"&&(this.onRejected=K,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(k){f.resolve(this.promise,k)},S.prototype.otherCallFulfilled=function(k){M(this.promise,this.onFulfilled,k)},S.prototype.callRejected=function(k){f.reject(this.promise,k)},S.prototype.otherCallRejected=function(k){M(this.promise,this.onRejected,k)};function M(k,Q,K){i(function(){var re;try{re=Q(K)}catch(se){return f.reject(k,se)}re===k?f.reject(k,new TypeError("Cannot resolve promise with itself")):f.resolve(k,re)})}f.resolve=function(k,Q){var K=A(T,Q);if(K.status==="error")return f.reject(k,K.value);var re=K.value;if(re)N(k,re);else{k.state=y,k.outcome=Q;for(var se=-1,Ie=k.queue.length;++se<Ie;)k.queue[se].callFulfilled(Q)}return k},f.reject=function(k,Q){k.state=g,k.outcome=Q;for(var K=-1,re=k.queue.length;++K<re;)k.queue[K].callRejected(Q);return k};function T(k){var Q=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof Q=="function")return function(){Q.apply(k,arguments)}}function N(k,Q){var K=!1;function re(ke){K||(K=!0,f.reject(k,ke))}function se(ke){K||(K=!0,f.resolve(k,ke))}function Ie(){Q(se,re)}var Ce=A(Ie);Ce.status==="error"&&re(Ce.value)}function A(k,Q){var K={};try{K.value=k(Q),K.status="success"}catch(re){K.status="error",K.value=re}return K}b.resolve=z;function z(k){return k instanceof this?k:f.resolve(new this(l),k)}b.reject=V;function V(k){var Q=new this(l);return f.reject(Q,k)}b.all=ce;function ce(k){var Q=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var K=k.length,re=!1;if(!K)return this.resolve([]);for(var se=new Array(K),Ie=0,Ce=-1,ke=new this(l);++Ce<K;)et(k[Ce],Ce);return ke;function et(Xt,Gr){Q.resolve(Xt).then(Nn,function(jt){re||(re=!0,f.reject(ke,jt))});function Nn(jt){se[Gr]=jt,++Ie===K&&!re&&(re=!0,f.resolve(ke,se))}}}b.race=B;function B(k){var Q=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var K=k.length,re=!1;if(!K)return this.resolve([]);for(var se=-1,Ie=new this(l);++se<K;)Ce(k[se]);return Ie;function Ce(ke){Q.resolve(ke).then(function(et){re||(re=!0,f.resolve(Ie,et))},function(et){re||(re=!0,f.reject(Ie,et))})}}},{1:1}],3:[function(n,a,s){(function(i){"use strict";typeof i.Promise!="function"&&(i.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,a,s){"use strict";var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function l(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(o){return}}var g=f();function y(){try{if(!g||!g.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),d=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||d)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(c){return!1}}function $(o,d){o=o||[],d=d||{};try{return new Blob(o,d)}catch(p){if(p.name!=="TypeError")throw p;for(var c=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,v=new c,_=0;_<o.length;_+=1)v.append(o[_]);return v.getBlob(d.type)}}typeof Promise>"u"&&n(3);var b=Promise;function S(o,d){d&&o.then(function(c){d(null,c)},function(c){d(c)})}function M(o,d,c){typeof d=="function"&&o.then(d),typeof c=="function"&&o.catch(c)}function T(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var A="local-forage-detect-blob-support",z=void 0,V={},ce=Object.prototype.toString,B="readonly",k="readwrite";function Q(o){for(var d=o.length,c=new ArrayBuffer(d),v=new Uint8Array(c),_=0;_<d;_++)v[_]=o.charCodeAt(_);return c}function K(o){return new b(function(d){var c=o.transaction(A,k),v=$([""]);c.objectStore(A).put(v,"key"),c.onabort=function(_){_.preventDefault(),_.stopPropagation(),d(!1)},c.oncomplete=function(){var _=navigator.userAgent.match(/Chrome\/(\d+)/),p=navigator.userAgent.match(/Edge\//);d(p||!_||parseInt(_[1],10)>=43)}}).catch(function(){return!1})}function re(o){return typeof z=="boolean"?b.resolve(z):K(o).then(function(d){return z=d,z})}function se(o){var d=V[o.name],c={};c.promise=new b(function(v,_){c.resolve=v,c.reject=_}),d.deferredOperations.push(c),d.dbReady?d.dbReady=d.dbReady.then(function(){return c.promise}):d.dbReady=c.promise}function Ie(o){var d=V[o.name],c=d.deferredOperations.pop();if(c)return c.resolve(),c.promise}function Ce(o,d){var c=V[o.name],v=c.deferredOperations.pop();if(v)return v.reject(d),v.promise}function ke(o,d){return new b(function(c,v){if(V[o.name]=V[o.name]||xa(),o.db)if(d)se(o),o.db.close();else return c(o.db);var _=[o.name];d&&_.push(o.version);var p=g.open.apply(g,_);d&&(p.onupgradeneeded=function(P){var I=p.result;try{I.createObjectStore(o.storeName),P.oldVersion<=1&&I.createObjectStore(A)}catch(D){if(D.name==="ConstraintError")console.warn('The database "'+o.name+'" has been upgraded from version '+P.oldVersion+" to version "+P.newVersion+', but the storage "'+o.storeName+'" already exists.');else throw D}}),p.onerror=function(P){P.preventDefault(),v(p.error)},p.onsuccess=function(){var P=p.result;P.onversionchange=function(I){I.target.close()},c(P),Ie(o)}})}function et(o){return ke(o,!1)}function Xt(o){return ke(o,!0)}function Gr(o,d){if(!o.db)return!0;var c=!o.db.objectStoreNames.contains(o.storeName),v=o.version<o.db.version,_=o.version>o.db.version;if(v&&(o.version!==d&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),_||c){if(c){var p=o.db.version+1;p>o.version&&(o.version=p)}return!0}return!1}function Nn(o){return new b(function(d,c){var v=new FileReader;v.onerror=c,v.onloadend=function(_){var p=btoa(_.target.result||"");d({__local_forage_encoded_blob:!0,data:p,type:o.type})},v.readAsBinaryString(o)})}function jt(o){var d=Q(atob(o.data));return $([d],{type:o.type})}function An(o){return o&&o.__local_forage_encoded_blob}function qa(o){var d=this,c=d._initReady().then(function(){var v=V[d._dbInfo.name];if(v&&v.dbReady)return v.dbReady});return M(c,o,o),c}function La(o){se(o);for(var d=V[o.name],c=d.forages,v=0;v<c.length;v++){var _=c[v];_._dbInfo.db&&(_._dbInfo.db.close(),_._dbInfo.db=null)}return o.db=null,et(o).then(function(p){return o.db=p,Gr(o)?Xt(o):p}).then(function(p){o.db=d.db=p;for(var P=0;P<c.length;P++)c[P]._dbInfo.db=p}).catch(function(p){throw Ce(o,p),p})}function vt(o,d,c,v){v===void 0&&(v=1);try{var _=o.db.transaction(o.storeName,d);c(null,_)}catch(p){if(v>0&&(!o.db||p.name==="InvalidStateError"||p.name==="NotFoundError"))return b.resolve().then(function(){if(!o.db||p.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),Xt(o)}).then(function(){return La(o).then(function(){vt(o,d,c,v-1)})}).catch(c);c(p)}}function xa(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Zt(o){var d=this,c={db:null};if(o)for(var v in o)c[v]=o[v];var _=V[c.name];_||(_=xa(),V[c.name]=_),_.forages.push(d),d._initReady||(d._initReady=d.ready,d.ready=qa);var p=[];function P(){return b.resolve()}for(var I=0;I<_.forages.length;I++){var D=_.forages[I];D!==d&&p.push(D._initReady().catch(P))}var R=_.forages.slice(0);return b.all(p).then(function(){return c.db=_.db,et(c)}).then(function(O){return c.db=O,Gr(c,d._defaultConfig.version)?Xt(c):O}).then(function(O){c.db=_.db=O,d._dbInfo=c;for(var j=0;j<R.length;j++){var J=R[j];J!==d&&(J._dbInfo.db=c.db,J._dbInfo.version=c.version)}})}function tt(o,d){var c=this;o=T(o);var v=new b(function(_,p){c.ready().then(function(){vt(c._dbInfo,B,function(P,I){if(P)return p(P);try{var D=I.objectStore(c._dbInfo.storeName),R=D.get(o);R.onsuccess=function(){var O=R.result;O===void 0&&(O=null),An(O)&&(O=jt(O)),_(O)},R.onerror=function(){p(R.error)}}catch(O){p(O)}})}).catch(p)});return S(v,d),v}function ot(o,d){var c=this,v=new b(function(_,p){c.ready().then(function(){vt(c._dbInfo,B,function(P,I){if(P)return p(P);try{var D=I.objectStore(c._dbInfo.storeName),R=D.openCursor(),O=1;R.onsuccess=function(){var j=R.result;if(j){var J=j.value;An(J)&&(J=jt(J));var le=o(J,j.key,O++);le!==void 0?_(le):j.continue()}else _()},R.onerror=function(){p(R.error)}}catch(j){p(j)}})}).catch(p)});return S(v,d),v}function er(o,d,c){var v=this;o=T(o);var _=new b(function(p,P){var I;v.ready().then(function(){return I=v._dbInfo,ce.call(d)==="[object Blob]"?re(I.db).then(function(D){return D?d:Nn(d)}):d}).then(function(D){vt(v._dbInfo,k,function(R,O){if(R)return P(R);try{var j=O.objectStore(v._dbInfo.storeName);D===null&&(D=void 0);var J=j.put(D,o);O.oncomplete=function(){D===void 0&&(D=null),p(D)},O.onabort=O.onerror=function(){var le=J.error?J.error:J.transaction.error;P(le)}}catch(le){P(le)}})}).catch(P)});return S(_,c),_}function On(o,d){var c=this;o=T(o);var v=new b(function(_,p){c.ready().then(function(){vt(c._dbInfo,k,function(P,I){if(P)return p(P);try{var D=I.objectStore(c._dbInfo.storeName),R=D.delete(o);I.oncomplete=function(){_()},I.onerror=function(){p(R.error)},I.onabort=function(){var O=R.error?R.error:R.transaction.error;p(O)}}catch(O){p(O)}})}).catch(p)});return S(v,d),v}function kn(o){var d=this,c=new b(function(v,_){d.ready().then(function(){vt(d._dbInfo,k,function(p,P){if(p)return _(p);try{var I=P.objectStore(d._dbInfo.storeName),D=I.clear();P.oncomplete=function(){v()},P.onabort=P.onerror=function(){var R=D.error?D.error:D.transaction.error;_(R)}}catch(R){_(R)}})}).catch(_)});return S(c,o),c}function qn(o){var d=this,c=new b(function(v,_){d.ready().then(function(){vt(d._dbInfo,B,function(p,P){if(p)return _(p);try{var I=P.objectStore(d._dbInfo.storeName),D=I.count();D.onsuccess=function(){v(D.result)},D.onerror=function(){_(D.error)}}catch(R){_(R)}})}).catch(_)});return S(c,o),c}function ja(o,d){var c=this,v=new b(function(_,p){if(o<0){_(null);return}c.ready().then(function(){vt(c._dbInfo,B,function(P,I){if(P)return p(P);try{var D=I.objectStore(c._dbInfo.storeName),R=!1,O=D.openKeyCursor();O.onsuccess=function(){var j=O.result;if(!j){_(null);return}o===0||R?_(j.key):(R=!0,j.advance(o))},O.onerror=function(){p(O.error)}}catch(j){p(j)}})}).catch(p)});return S(v,d),v}function Ys(o){var d=this,c=new b(function(v,_){d.ready().then(function(){vt(d._dbInfo,B,function(p,P){if(p)return _(p);try{var I=P.objectStore(d._dbInfo.storeName),D=I.openKeyCursor(),R=[];D.onsuccess=function(){var O=D.result;if(!O){v(R);return}R.push(O.key),O.continue()},D.onerror=function(){_(D.error)}}catch(O){_(O)}})}).catch(_)});return S(c,o),c}function Js(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var v=this,_;if(!o.name)_=b.reject("Invalid arguments");else{var p=o.name===c.name&&v._dbInfo.db,P=p?b.resolve(v._dbInfo.db):et(o).then(function(I){var D=V[o.name],R=D.forages;D.db=I;for(var O=0;O<R.length;O++)R[O]._dbInfo.db=I;return I});o.storeName?_=P.then(function(I){if(!!I.objectStoreNames.contains(o.storeName)){var D=I.version+1;se(o);var R=V[o.name],O=R.forages;I.close();for(var j=0;j<O.length;j++){var J=O[j];J._dbInfo.db=null,J._dbInfo.version=D}var le=new b(function(me,ve){var ge=g.open(o.name,D);ge.onerror=function(Be){var It=ge.result;It.close(),ve(Be)},ge.onupgradeneeded=function(){var Be=ge.result;Be.deleteObjectStore(o.storeName)},ge.onsuccess=function(){var Be=ge.result;Be.close(),me(Be)}});return le.then(function(me){R.db=me;for(var ve=0;ve<O.length;ve++){var ge=O[ve];ge._dbInfo.db=me,Ie(ge._dbInfo)}}).catch(function(me){throw(Ce(o,me)||b.resolve()).catch(function(){}),me})}}):_=P.then(function(I){se(o);var D=V[o.name],R=D.forages;I.close();for(var O=0;O<R.length;O++){var j=R[O];j._dbInfo.db=null}var J=new b(function(le,me){var ve=g.deleteDatabase(o.name);ve.onerror=function(){var ge=ve.result;ge&&ge.close(),me(ve.error)},ve.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},ve.onsuccess=function(){var ge=ve.result;ge&&ge.close(),le(ge)}});return J.then(function(le){D.db=le;for(var me=0;me<R.length;me++){var ve=R[me];Ie(ve._dbInfo)}}).catch(function(le){throw(Ce(o,le)||b.resolve()).catch(function(){}),le})})}return S(_,d),_}var gt={_driver:"asyncStorage",_initStorage:Zt,_support:y(),iterate:ot,getItem:tt,setItem:er,removeItem:On,clear:kn,length:qn,key:ja,keys:Ys,dropInstance:Js};function Qs(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fa="~~local_forage_type~",Ln=/^~~local_forage_type~([^~]+)~/,Kr="__lfsc__:",Mt=Kr.length,rt="arbf",Wr="blob",Va="si08",Ua="ui08",Ha="uic8",Ba="si16",ct="si32",tr="ur16",xn="ui32",jn="fl32",rr="fl64",Fn=Mt+rt.length,za=Object.prototype.toString;function Ga(o){var d=o.length*.75,c=o.length,v,_=0,p,P,I,D;o[o.length-1]==="="&&(d--,o[o.length-2]==="="&&d--);var R=new ArrayBuffer(d),O=new Uint8Array(R);for(v=0;v<c;v+=4)p=yt.indexOf(o[v]),P=yt.indexOf(o[v+1]),I=yt.indexOf(o[v+2]),D=yt.indexOf(o[v+3]),O[_++]=p<<2|P>>4,O[_++]=(P&15)<<4|I>>2,O[_++]=(I&3)<<6|D&63;return R}function Yr(o){var d=new Uint8Array(o),c="",v;for(v=0;v<d.length;v+=3)c+=yt[d[v]>>2],c+=yt[(d[v]&3)<<4|d[v+1]>>4],c+=yt[(d[v+1]&15)<<2|d[v+2]>>6],c+=yt[d[v+2]&63];return d.length%3===2?c=c.substring(0,c.length-1)+"=":d.length%3===1&&(c=c.substring(0,c.length-2)+"=="),c}function lt(o,d){var c="";if(o&&(c=za.call(o)),o&&(c==="[object ArrayBuffer]"||o.buffer&&za.call(o.buffer)==="[object ArrayBuffer]")){var v,_=Kr;o instanceof ArrayBuffer?(v=o,_+=rt):(v=o.buffer,c==="[object Int8Array]"?_+=Va:c==="[object Uint8Array]"?_+=Ua:c==="[object Uint8ClampedArray]"?_+=Ha:c==="[object Int16Array]"?_+=Ba:c==="[object Uint16Array]"?_+=tr:c==="[object Int32Array]"?_+=ct:c==="[object Uint32Array]"?_+=xn:c==="[object Float32Array]"?_+=jn:c==="[object Float64Array]"?_+=rr:d(new Error("Failed to get type for BinaryArray"))),d(_+Yr(v))}else if(c==="[object Blob]"){var p=new FileReader;p.onload=function(){var P=Fa+o.type+"~"+Yr(this.result);d(Kr+Wr+P)},p.readAsArrayBuffer(o)}else try{d(JSON.stringify(o))}catch(P){console.error("Couldn't convert value into a JSON string: ",o),d(null,P)}}function Xs(o){if(o.substring(0,Mt)!==Kr)return JSON.parse(o);var d=o.substring(Fn),c=o.substring(Mt,Fn),v;if(c===Wr&&Ln.test(d)){var _=d.match(Ln);v=_[1],d=d.substring(_[0].length)}var p=Ga(d);switch(c){case rt:return p;case Wr:return $([p],{type:v});case Va:return new Int8Array(p);case Ua:return new Uint8Array(p);case Ha:return new Uint8ClampedArray(p);case Ba:return new Int16Array(p);case tr:return new Uint16Array(p);case ct:return new Int32Array(p);case xn:return new Uint32Array(p);case jn:return new Float32Array(p);case rr:return new Float64Array(p);default:throw new Error("Unkown type: "+c)}}var Vn={serialize:lt,deserialize:Xs,stringToBuffer:Ga,bufferToString:Yr};function Ka(o,d,c,v){o.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],c,v)}function Zs(o){var d=this,c={db:null};if(o)for(var v in o)c[v]=typeof o[v]!="string"?o[v].toString():o[v];var _=new b(function(p,P){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(I){return P(I)}c.db.transaction(function(I){Ka(I,c,function(){d._dbInfo=c,p()},function(D,R){P(R)})},P)});return c.serializer=Vn,_}function Pt(o,d,c,v,_,p){o.executeSql(c,v,_,function(P,I){I.code===I.SYNTAX_ERR?P.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[d.storeName],function(D,R){R.rows.length?p(D,I):Ka(D,d,function(){D.executeSql(c,v,_,p)},p)},p):p(P,I)},p)}function ei(o,d){var c=this;o=T(o);var v=new b(function(_,p){c.ready().then(function(){var P=c._dbInfo;P.db.transaction(function(I){Pt(I,P,"SELECT * FROM "+P.storeName+" WHERE key = ? LIMIT 1",[o],function(D,R){var O=R.rows.length?R.rows.item(0).value:null;O&&(O=P.serializer.deserialize(O)),_(O)},function(D,R){p(R)})})}).catch(p)});return S(v,d),v}function nr(o,d){var c=this,v=new b(function(_,p){c.ready().then(function(){var P=c._dbInfo;P.db.transaction(function(I){Pt(I,P,"SELECT * FROM "+P.storeName,[],function(D,R){for(var O=R.rows,j=O.length,J=0;J<j;J++){var le=O.item(J),me=le.value;if(me&&(me=P.serializer.deserialize(me)),me=o(me,le.key,J+1),me!==void 0){_(me);return}}_()},function(D,R){p(R)})})}).catch(p)});return S(v,d),v}function Wa(o,d,c,v){var _=this;o=T(o);var p=new b(function(P,I){_.ready().then(function(){d===void 0&&(d=null);var D=d,R=_._dbInfo;R.serializer.serialize(d,function(O,j){j?I(j):R.db.transaction(function(J){Pt(J,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[o,O],function(){P(D)},function(le,me){I(me)})},function(J){if(J.code===J.QUOTA_ERR){if(v>0){P(Wa.apply(_,[o,D,c,v-1]));return}I(J)}})})}).catch(I)});return S(p,c),p}function Ya(o,d,c){return Wa.apply(this,[o,d,c,1])}function ti(o,d){var c=this;o=T(o);var v=new b(function(_,p){c.ready().then(function(){var P=c._dbInfo;P.db.transaction(function(I){Pt(I,P,"DELETE FROM "+P.storeName+" WHERE key = ?",[o],function(){_()},function(D,R){p(R)})})}).catch(p)});return S(v,d),v}function Un(o){var d=this,c=new b(function(v,_){d.ready().then(function(){var p=d._dbInfo;p.db.transaction(function(P){Pt(P,p,"DELETE FROM "+p.storeName,[],function(){v()},function(I,D){_(D)})})}).catch(_)});return S(c,o),c}function Ja(o){var d=this,c=new b(function(v,_){d.ready().then(function(){var p=d._dbInfo;p.db.transaction(function(P){Pt(P,p,"SELECT COUNT(key) as c FROM "+p.storeName,[],function(I,D){var R=D.rows.item(0).c;v(R)},function(I,D){_(D)})})}).catch(_)});return S(c,o),c}function ri(o,d){var c=this,v=new b(function(_,p){c.ready().then(function(){var P=c._dbInfo;P.db.transaction(function(I){Pt(I,P,"SELECT key FROM "+P.storeName+" WHERE id = ? LIMIT 1",[o+1],function(D,R){var O=R.rows.length?R.rows.item(0).key:null;_(O)},function(D,R){p(R)})})}).catch(p)});return S(v,d),v}function Qa(o){var d=this,c=new b(function(v,_){d.ready().then(function(){var p=d._dbInfo;p.db.transaction(function(P){Pt(P,p,"SELECT key FROM "+p.storeName,[],function(I,D){for(var R=[],O=0;O<D.rows.length;O++)R.push(D.rows.item(O).key);v(R)},function(I,D){_(D)})})}).catch(_)});return S(c,o),c}function ni(o){return new b(function(d,c){o.transaction(function(v){v.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(_,p){for(var P=[],I=0;I<p.rows.length;I++)P.push(p.rows.item(I).name);d({db:o,storeNames:P})},function(_,p){c(p)})},function(v){c(v)})})}function Xa(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var v=this,_;return o.name?_=new b(function(p){var P;o.name===c.name?P=v._dbInfo.db:P=openDatabase(o.name,"","",0),o.storeName?p({db:P,storeNames:[o.storeName]}):p(ni(P))}).then(function(p){return new b(function(P,I){p.db.transaction(function(D){function R(le){return new b(function(me,ve){D.executeSql("DROP TABLE IF EXISTS "+le,[],function(){me()},function(ge,Be){ve(Be)})})}for(var O=[],j=0,J=p.storeNames.length;j<J;j++)O.push(R(p.storeNames[j]));b.all(O).then(function(){P()}).catch(function(le){I(le)})},function(D){I(D)})})}):_=b.reject("Invalid arguments"),S(_,d),_}var m={_driver:"webSQLStorage",_initStorage:Zs,_support:Qs(),iterate:nr,getItem:ei,setItem:Ya,removeItem:ti,clear:Un,length:Ja,key:ri,keys:Qa,dropInstance:Xa};function u(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(o){return!1}}function h(o,d){var c=o.name+"/";return o.storeName!==d.storeName&&(c+=o.storeName+"/"),c}function E(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch(d){return!0}}function w(){return!E()||localStorage.length>0}function q(o){var d=this,c={};if(o)for(var v in o)c[v]=o[v];return c.keyPrefix=h(o,d._defaultConfig),w()?(d._dbInfo=c,c.serializer=Vn,b.resolve()):b.reject()}function W(o){var d=this,c=d.ready().then(function(){for(var v=d._dbInfo.keyPrefix,_=localStorage.length-1;_>=0;_--){var p=localStorage.key(_);p.indexOf(v)===0&&localStorage.removeItem(p)}});return S(c,o),c}function ne(o,d){var c=this;o=T(o);var v=c.ready().then(function(){var _=c._dbInfo,p=localStorage.getItem(_.keyPrefix+o);return p&&(p=_.serializer.deserialize(p)),p});return S(v,d),v}function fe(o,d){var c=this,v=c.ready().then(function(){for(var _=c._dbInfo,p=_.keyPrefix,P=p.length,I=localStorage.length,D=1,R=0;R<I;R++){var O=localStorage.key(R);if(O.indexOf(p)===0){var j=localStorage.getItem(O);if(j&&(j=_.serializer.deserialize(j)),j=o(j,O.substring(P),D++),j!==void 0)return j}}});return S(v,d),v}function Me(o,d){var c=this,v=c.ready().then(function(){var _=c._dbInfo,p;try{p=localStorage.key(o)}catch(P){p=null}return p&&(p=p.substring(_.keyPrefix.length)),p});return S(v,d),v}function te(o){var d=this,c=d.ready().then(function(){for(var v=d._dbInfo,_=localStorage.length,p=[],P=0;P<_;P++){var I=localStorage.key(P);I.indexOf(v.keyPrefix)===0&&p.push(I.substring(v.keyPrefix.length))}return p});return S(c,o),c}function $e(o){var d=this,c=d.keys().then(function(v){return v.length});return S(c,o),c}function Pe(o,d){var c=this;o=T(o);var v=c.ready().then(function(){var _=c._dbInfo;localStorage.removeItem(_.keyPrefix+o)});return S(v,d),v}function be(o,d,c){var v=this;o=T(o);var _=v.ready().then(function(){d===void 0&&(d=null);var p=d;return new b(function(P,I){var D=v._dbInfo;D.serializer.serialize(d,function(R,O){if(O)I(O);else try{localStorage.setItem(D.keyPrefix+o,R),P(p)}catch(j){(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")&&I(j),I(j)}})})});return S(_,c),_}function ie(o,d){if(d=N.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var c=this.config();o.name=o.name||c.name,o.storeName=o.storeName||c.storeName}var v=this,_;return o.name?_=new b(function(p){o.storeName?p(h(o,v._defaultConfig)):p(o.name+"/")}).then(function(p){for(var P=localStorage.length-1;P>=0;P--){var I=localStorage.key(P);I.indexOf(p)===0&&localStorage.removeItem(I)}}):_=b.reject("Invalid arguments"),S(_,d),_}var Ee={_driver:"localStorageWrapper",_initStorage:q,_support:u(),iterate:fe,getItem:ne,setItem:be,removeItem:Pe,clear:W,length:$e,key:Me,keys:te,dropInstance:ie},he=function(d,c){return d===c||typeof d=="number"&&typeof c=="number"&&isNaN(d)&&isNaN(c)},Ft=function(d,c){for(var v=d.length,_=0;_<v;){if(he(d[_],c))return!0;_++}return!1},He=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},Ae={},pe={},Ne={INDEXEDDB:gt,WEBSQL:m,LOCALSTORAGE:Ee},nt=[Ne.INDEXEDDB._driver,Ne.WEBSQL._driver,Ne.LOCALSTORAGE._driver],We=["dropInstance"],_t=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(We),bt={description:"",driver:nt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function br(o,d){o[d]=function(){var c=arguments;return o.ready().then(function(){return o[d].apply(o,c)})}}function ar(){for(var o=1;o<arguments.length;o++){var d=arguments[o];if(d)for(var c in d)d.hasOwnProperty(c)&&(He(d[c])?arguments[0][c]=d[c].slice():arguments[0][c]=d[c])}return arguments[0]}var Jr=function(){function o(d){l(this,o);for(var c in Ne)if(Ne.hasOwnProperty(c)){var v=Ne[c],_=v._driver;this[c]=_,Ae[_]||this.defineDriver(v)}this._defaultConfig=ar({},bt),this._config=ar({},this._defaultConfig,d),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(c){if((typeof c>"u"?"undefined":i(c))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var v in c){if(v==="storeName"&&(c[v]=c[v].replace(/\W/g,"_")),v==="version"&&typeof c[v]!="number")return new Error("Database version must be a number.");this._config[v]=c[v]}return"driver"in c&&c.driver?this.setDriver(this._config.driver):!0}else return typeof c=="string"?this._config[c]:this._config},o.prototype.defineDriver=function(c,v,_){var p=new b(function(P,I){try{var D=c._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!c._driver){I(R);return}for(var O=_t.concat("_initStorage"),j=0,J=O.length;j<J;j++){var le=O[j],me=!Ft(We,le);if((me||c[le])&&typeof c[le]!="function"){I(R);return}}var ve=function(){for(var It=function(Za){return function(){var ai=new Error("Method "+Za+" is not implemented by the current driver"),es=b.reject(ai);return S(es,arguments[arguments.length-1]),es}},Dt=0,cc=We.length;Dt<cc;Dt++){var Rt=We[Dt];c[Rt]||(c[Rt]=It(Rt))}};ve();var ge=function(It){Ae[D]&&console.info("Redefining LocalForage driver: "+D),Ae[D]=c,pe[D]=It,P()};"_support"in c?c._support&&typeof c._support=="function"?c._support().then(ge,I):ge(!!c._support):ge(!0)}catch(Be){I(Be)}});return M(p,v,_),p},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(c,v,_){var p=Ae[c]?b.resolve(Ae[c]):b.reject(new Error("Driver not found."));return M(p,v,_),p},o.prototype.getSerializer=function(c){var v=b.resolve(Vn);return M(v,c),v},o.prototype.ready=function(c){var v=this,_=v._driverSet.then(function(){return v._ready===null&&(v._ready=v._initDriver()),v._ready});return M(_,c,c),_},o.prototype.setDriver=function(c,v,_){var p=this;He(c)||(c=[c]);var P=this._getSupportedDrivers(c);function I(){p._config.driver=p.driver()}function D(j){return p._extend(j),I(),p._ready=p._initStorage(p._config),p._ready}function R(j){return function(){var J=0;function le(){for(;J<j.length;){var me=j[J];return J++,p._dbInfo=null,p._ready=null,p.getDriver(me).then(D).catch(le)}I();var ve=new Error("No available storage method found.");return p._driverSet=b.reject(ve),p._driverSet}return le()}}var O=this._driverSet!==null?this._driverSet.catch(function(){return b.resolve()}):b.resolve();return this._driverSet=O.then(function(){var j=P[0];return p._dbInfo=null,p._ready=null,p.getDriver(j).then(function(J){p._driver=J._driver,I(),p._wrapLibraryMethodsWithReady(),p._initDriver=R(P)})}).catch(function(){I();var j=new Error("No available storage method found.");return p._driverSet=b.reject(j),p._driverSet}),M(this._driverSet,v,_),this._driverSet},o.prototype.supports=function(c){return!!pe[c]},o.prototype._extend=function(c){ar(this,c)},o.prototype._getSupportedDrivers=function(c){for(var v=[],_=0,p=c.length;_<p;_++){var P=c[_];this.supports(P)&&v.push(P)}return v},o.prototype._wrapLibraryMethodsWithReady=function(){for(var c=0,v=_t.length;c<v;c++)br(this,_t[c])},o.prototype.createInstance=function(c){return new o(c)},o}(),sr=new Jr;a.exports=sr},{3:3}]},{},[4])(4)})});var ua=x(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.regexpCode=ue.getEsmExportName=ue.getProperty=ue.safeStringify=ue.stringify=ue.strConcat=ue.addCodeArg=ue.str=ue._=ue.nil=ue._Code=ue.Name=ue.IDENTIFIER=ue._CodeOrName=void 0;var ca=class{};ue._CodeOrName=ca;ue.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Lr=class extends ca{constructor(e){if(super(),!ue.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ue.Name=Lr;var ft=class extends ca{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Lr&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ue._Code=ft;ue.nil=new ft("");function tl(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Di(r,e[n]),r.push(t[++n]);return new ft(r)}ue._=tl;var Ii=new ft("+");function rl(t,...e){let r=[la(t[0])],n=0;for(;n<e.length;)r.push(Ii),Di(r,e[n]),r.push(Ii,la(t[++n]));return Wd(r),new ft(r)}ue.str=rl;function Di(t,e){e instanceof ft?t.push(...e._items):e instanceof Lr?t.push(e):t.push(Qd(e))}ue.addCodeArg=Di;function Wd(t){let e=1;for(;e<t.length-1;){if(t[e]===Ii){let r=Yd(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Yd(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Lr||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Lr))return`"${t}${e.slice(1)}`}function Jd(t,e){return e.emptyStr()?t:t.emptyStr()?e:rl`${t}${e}`}ue.strConcat=Jd;function Qd(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:la(Array.isArray(t)?t.join(","):t)}function Xd(t){return new ft(la(t))}ue.stringify=Xd;function la(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ue.safeStringify=la;function Zd(t){return typeof t=="string"&&ue.IDENTIFIER.test(t)?new ft(`.${t}`):tl`[${t}]`}ue.getProperty=Zd;function ef(t){if(typeof t=="string"&&ue.IDENTIFIER.test(t))return new ft(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}ue.getEsmExportName=ef;function tf(t){return new ft(t.toString())}ue.regexpCode=tf});var Oi=x(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.ValueScope=Qe.ValueScopeName=Qe.Scope=Qe.varKinds=Qe.UsedValueState=void 0;var at=ua(),Ri=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Ni;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Ni=Qe.UsedValueState||(Qe.UsedValueState={}));Qe.varKinds={const:new at.Name("const"),let:new at.Name("let"),var:new at.Name("var")};var gs=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof at.Name?e:this.name(e)}name(e){return new at.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Qe.Scope=gs;var ys=class extends at.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,at._)`.${new at.Name(r)}[${n}]`}};Qe.ValueScopeName=ys;var rf=(0,at._)`\n`,Ai=class extends gs{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=ut(De({},e),{_n:e.lines?rf:at.nil})}get(){return this._scope}name(e){return new ys(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let a=this.toName(e),{prefix:s}=a,i=(n=r.key)!==null&&n!==void 0?n:r.ref,l=this._values[s];if(l){let y=l.get(i);if(y)return y}else l=this._values[s]=new Map;l.set(i,a);let f=this._scope[s]||(this._scope[s]=[]),g=f.length;return f[g]=r.ref,a.setValue(r,{property:s,itemIndex:g}),a}getValue(e,r){let n=this._values[e];if(!!n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,at._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,a=>{if(a.value===void 0)throw new Error(`CodeGen: name "${a}" has no value`);return a.value.code},r,n)}_reduceValues(e,r,n={},a){let s=at.nil;for(let i in e){let l=e[i];if(!l)continue;let f=n[i]=n[i]||new Map;l.forEach(g=>{if(f.has(g))return;f.set(g,Ni.Started);let y=r(g);if(y){let $=this.opts.es5?Qe.varKinds.var:Qe.varKinds.const;s=(0,at._)`${s}${$} ${g} = ${y};${this.opts._n}`}else if(y=a==null?void 0:a(g))s=(0,at._)`${s}${y}${this.opts._n}`;else throw new Ri(g);f.set(g,Ni.Completed)})}return s}};Qe.ValueScope=Ai});var ee=x(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.or=X.and=X.not=X.CodeGen=X.operators=X.varKinds=X.ValueScopeName=X.ValueScope=X.Scope=X.Name=X.regexpCode=X.stringify=X.getProperty=X.nil=X.strConcat=X.str=X._=void 0;var ae=ua(),Et=Oi(),mr=ua();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return mr._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return mr.str}});Object.defineProperty(X,"strConcat",{enumerable:!0,get:function(){return mr.strConcat}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return mr.nil}});Object.defineProperty(X,"getProperty",{enumerable:!0,get:function(){return mr.getProperty}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return mr.stringify}});Object.defineProperty(X,"regexpCode",{enumerable:!0,get:function(){return mr.regexpCode}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return mr.Name}});var Es=Oi();Object.defineProperty(X,"Scope",{enumerable:!0,get:function(){return Es.Scope}});Object.defineProperty(X,"ValueScope",{enumerable:!0,get:function(){return Es.ValueScope}});Object.defineProperty(X,"ValueScopeName",{enumerable:!0,get:function(){return Es.ValueScopeName}});Object.defineProperty(X,"varKinds",{enumerable:!0,get:function(){return Es.varKinds}});X.operators={GT:new ae._Code(">"),GTE:new ae._Code(">="),LT:new ae._Code("<"),LTE:new ae._Code("<="),EQ:new ae._Code("==="),NEQ:new ae._Code("!=="),NOT:new ae._Code("!"),OR:new ae._Code("||"),AND:new ae._Code("&&"),ADD:new ae._Code("+")};var Wt=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},ki=class extends Wt{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Et.varKinds.var:this.varKind,a=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${a};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=$n(this.rhs,e,r)),this}get names(){return this.rhs instanceof ae._CodeOrName?this.rhs.names:{}}},_s=class extends Wt{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof ae.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=$n(this.rhs,e,r),this}get names(){let e=this.lhs instanceof ae.Name?{}:De({},this.lhs.names);return $s(e,this.rhs)}},qi=class extends _s{constructor(e,r,n,a){super(e,n,a),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Li=class extends Wt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},xi=class extends Wt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},ji=class extends Wt{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Fi=class extends Wt{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=$n(this.code,e,r),this}get names(){return this.code instanceof ae._CodeOrName?this.code.names:{}}},da=class extends Wt{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,a=n.length;for(;a--;){let s=n[a];s.optimizeNames(e,r)||(nf(e,s.names),n.splice(a,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>jr(e,r.names),{})}},Yt=class extends da{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Vi=class extends da{},bn=class extends Yt{};bn.kind="else";var St=class extends Yt{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new bn(n):n}if(r)return e===!1?r instanceof St?r:r.nodes:this.nodes.length?this:new St(nl(e),r instanceof St?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=$n(this.condition,e,r),this}get names(){let e=super.names;return $s(e,this.condition),this.else&&jr(e,this.else.names),e}};St.kind="if";var xr=class extends Yt{};xr.kind="for";var Ui=class extends xr{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=$n(this.iteration,e,r),this}get names(){return jr(super.names,this.iteration.names)}},Hi=class extends xr{constructor(e,r,n,a){super(),this.varKind=e,this.name=r,this.from=n,this.to=a}render(e){let r=e.es5?Et.varKinds.var:this.varKind,{name:n,from:a,to:s}=this;return`for(${r} ${n}=${a}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){let e=$s(super.names,this.from);return $s(e,this.to)}},bs=class extends xr{constructor(e,r,n,a){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=a}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=$n(this.iterable,e,r),this}get names(){return jr(super.names,this.iterable.names)}},fa=class extends Yt{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};fa.kind="func";var ma=class extends da{render(e){return"return "+super.render(e)}};ma.kind="return";var Bi=class extends Yt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,a;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(a=this.finally)===null||a===void 0||a.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&jr(e,this.catch.names),this.finally&&jr(e,this.finally.names),e}},ha=class extends Yt{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};ha.kind="catch";var pa=class extends Yt{render(e){return"finally"+super.render(e)}};pa.kind="finally";var zi=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=ut(De({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new Et.Scope({parent:e}),this._nodes=[new Vi]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,a){let s=this._scope.toName(r);return n!==void 0&&a&&(this._constants[s.str]=n),this._leafNode(new ki(e,s,n)),s}const(e,r,n){return this._def(Et.varKinds.const,e,r,n)}let(e,r,n){return this._def(Et.varKinds.let,e,r,n)}var(e,r,n){return this._def(Et.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new _s(e,r,n))}add(e,r){return this._leafNode(new qi(e,X.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==ae.nil&&this._leafNode(new Fi(e)),this}object(...e){let r=["{"];for(let[n,a]of e)r.length>1&&r.push(","),r.push(n),(n!==a||this.opts.es5)&&(r.push(":"),(0,ae.addCodeArg)(r,a));return r.push("}"),new ae._Code(r)}if(e,r,n){if(this._blockNode(new St(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new St(e))}else(){return this._elseNode(new bn)}endIf(){return this._endBlockNode(St,bn)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Ui(e),r)}forRange(e,r,n,a,s=this.opts.es5?Et.varKinds.var:Et.varKinds.let){let i=this._scope.toName(e);return this._for(new Hi(s,i,r,n),()=>a(i))}forOf(e,r,n,a=Et.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let i=r instanceof ae.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,ae._)`${i}.length`,l=>{this.var(s,(0,ae._)`${i}[${l}]`),n(s)})}return this._for(new bs("of",a,s,r),()=>n(s))}forIn(e,r,n,a=this.opts.es5?Et.varKinds.var:Et.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,ae._)`Object.keys(${r})`,n);let s=this._scope.toName(e);return this._for(new bs("in",a,s,r),()=>n(s))}endFor(){return this._endBlockNode(xr)}label(e){return this._leafNode(new Li(e))}break(e){return this._leafNode(new xi(e))}return(e){let r=new ma;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ma)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let a=new Bi;if(this._blockNode(a),this.code(e),r){let s=this.name("e");this._currNode=a.catch=new ha(s),r(s)}return n&&(this._currNode=a.finally=new pa,this.code(n)),this._endBlockNode(ha,pa)}throw(e){return this._leafNode(new ji(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=ae.nil,n,a){return this._blockNode(new fa(e,r,n)),a&&this.code(a).endFunc(),this}endFunc(){return this._endBlockNode(fa)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof St))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};X.CodeGen=zi;function jr(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function $s(t,e){return e instanceof ae._CodeOrName?jr(t,e.names):t}function $n(t,e,r){if(t instanceof ae.Name)return n(t);if(!a(t))return t;return new ae._Code(t._items.reduce((s,i)=>(i instanceof ae.Name&&(i=n(i)),i instanceof ae._Code?s.push(...i._items):s.push(i),s),[]));function n(s){let i=r[s.str];return i===void 0||e[s.str]!==1?s:(delete e[s.str],i)}function a(s){return s instanceof ae._Code&&s._items.some(i=>i instanceof ae.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function nf(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function nl(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,ae._)`!${Gi(t)}`}X.not=nl;var af=al(X.operators.AND);function sf(...t){return t.reduce(af)}X.and=sf;var of=al(X.operators.OR);function cf(...t){return t.reduce(of)}X.or=cf;function al(t){return(e,r)=>e===ae.nil?r:r===ae.nil?e:(0,ae._)`${Gi(e)} ${t} ${Gi(r)}`}function Gi(t){return t instanceof ae.Name?t:(0,ae._)`(${t})`}});var de=x(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.checkStrictMode=Z.getErrorPath=Z.Type=Z.useFunc=Z.setEvaluated=Z.evaluatedPropsToName=Z.mergeEvaluated=Z.eachItem=Z.unescapeJsonPointer=Z.escapeJsonPointer=Z.escapeFragment=Z.unescapeFragment=Z.schemaRefOrVal=Z.schemaHasRulesButRef=Z.schemaHasRules=Z.checkUnknownRules=Z.alwaysValidSchema=Z.toHash=void 0;var _e=ee(),lf=ua();function uf(t){let e={};for(let r of t)e[r]=!0;return e}Z.toHash=uf;function df(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(ol(t,e),!cl(e,t.self.RULES.all))}Z.alwaysValidSchema=df;function ol(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let a=n.RULES.keywords;for(let s in e)a[s]||fl(t,`unknown keyword: "${s}"`)}Z.checkUnknownRules=ol;function cl(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Z.schemaHasRules=cl;function ff(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Z.schemaHasRulesButRef=ff;function mf({topSchemaRef:t,schemaPath:e},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,_e._)`${r}`}return(0,_e._)`${t}${e}${(0,_e.getProperty)(n)}`}Z.schemaRefOrVal=mf;function hf(t){return ll(decodeURIComponent(t))}Z.unescapeFragment=hf;function pf(t){return encodeURIComponent(Ki(t))}Z.escapeFragment=pf;function Ki(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Z.escapeJsonPointer=Ki;function ll(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Z.unescapeJsonPointer=ll;function vf(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Z.eachItem=vf;function sl({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(a,s,i,l)=>{let f=i===void 0?s:i instanceof _e.Name?(s instanceof _e.Name?t(a,s,i):e(a,s,i),i):s instanceof _e.Name?(e(a,i,s),s):r(s,i);return l===_e.Name&&!(f instanceof _e.Name)?n(a,f):f}}Z.mergeEvaluated={props:sl({mergeNames:(t,e,r)=>t.if((0,_e._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,_e._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,_e._)`${r} || {}`).code((0,_e._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,_e._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,_e._)`${r} || {}`),Wi(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:De(De({},t),e),resultToName:ul}),items:sl({mergeNames:(t,e,r)=>t.if((0,_e._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,_e._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,_e._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,_e._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function ul(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,_e._)`{}`);return e!==void 0&&Wi(t,r,e),r}Z.evaluatedPropsToName=ul;function Wi(t,e,r){Object.keys(r).forEach(n=>t.assign((0,_e._)`${e}${(0,_e.getProperty)(n)}`,!0))}Z.setEvaluated=Wi;var il={};function gf(t,e){return t.scopeValue("func",{ref:e,code:il[e.code]||(il[e.code]=new lf._Code(e.code))})}Z.useFunc=gf;var dl;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(dl=Z.Type||(Z.Type={}));function yf(t,e,r){if(t instanceof _e.Name){let n=e===dl.Num;return r?n?(0,_e._)`"[" + ${t} + "]"`:(0,_e._)`"['" + ${t} + "']"`:n?(0,_e._)`"/" + ${t}`:(0,_e._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,_e.getProperty)(t).toString():"/"+Ki(t)}Z.getErrorPath=yf;function fl(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Z.checkStrictMode=fl});var Jt=x(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var Ge=ee(),_f={data:new Ge.Name("data"),valCxt:new Ge.Name("valCxt"),instancePath:new Ge.Name("instancePath"),parentData:new Ge.Name("parentData"),parentDataProperty:new Ge.Name("parentDataProperty"),rootData:new Ge.Name("rootData"),dynamicAnchors:new Ge.Name("dynamicAnchors"),vErrors:new Ge.Name("vErrors"),errors:new Ge.Name("errors"),this:new Ge.Name("this"),self:new Ge.Name("self"),scope:new Ge.Name("scope"),json:new Ge.Name("json"),jsonPos:new Ge.Name("jsonPos"),jsonLen:new Ge.Name("jsonLen"),jsonPart:new Ge.Name("jsonPart")};Yi.default=_f});var va=x(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.extendErrors=Ke.resetErrorsCount=Ke.reportExtraError=Ke.reportError=Ke.keyword$DataError=Ke.keywordError=void 0;var oe=ee(),Ss=de(),Xe=Jt();Ke.keywordError={message:({keyword:t})=>(0,oe.str)`must pass "${t}" keyword validation`};Ke.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,oe.str)`"${t}" keyword must be ${e} ($data)`:(0,oe.str)`"${t}" keyword is invalid ($data)`};function bf(t,e=Ke.keywordError,r,n){let{it:a}=t,{gen:s,compositeRule:i,allErrors:l}=a,f=pl(t,e,r);(n!=null?n:i||l)?ml(s,f):hl(a,(0,oe._)`[${f}]`)}Ke.reportError=bf;function $f(t,e=Ke.keywordError,r){let{it:n}=t,{gen:a,compositeRule:s,allErrors:i}=n,l=pl(t,e,r);ml(a,l),s||i||hl(n,Xe.default.vErrors)}Ke.reportExtraError=$f;function Ef(t,e){t.assign(Xe.default.errors,e),t.if((0,oe._)`${Xe.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,oe._)`${Xe.default.vErrors}.length`,e),()=>t.assign(Xe.default.vErrors,null)))}Ke.resetErrorsCount=Ef;function Sf({gen:t,keyword:e,schemaValue:r,data:n,errsCount:a,it:s}){if(a===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",a,Xe.default.errors,l=>{t.const(i,(0,oe._)`${Xe.default.vErrors}[${l}]`),t.if((0,oe._)`${i}.instancePath === undefined`,()=>t.assign((0,oe._)`${i}.instancePath`,(0,oe.strConcat)(Xe.default.instancePath,s.errorPath))),t.assign((0,oe._)`${i}.schemaPath`,(0,oe.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,oe._)`${i}.schema`,r),t.assign((0,oe._)`${i}.data`,n))})}Ke.extendErrors=Sf;function ml(t,e){let r=t.const("err",e);t.if((0,oe._)`${Xe.default.vErrors} === null`,()=>t.assign(Xe.default.vErrors,(0,oe._)`[${r}]`),(0,oe._)`${Xe.default.vErrors}.push(${r})`),t.code((0,oe._)`${Xe.default.errors}++`)}function hl(t,e){let{gen:r,validateName:n,schemaEnv:a}=t;a.$async?r.throw((0,oe._)`new ${t.ValidationError}(${e})`):(r.assign((0,oe._)`${n}.errors`,e),r.return(!1))}var Fr={keyword:new oe.Name("keyword"),schemaPath:new oe.Name("schemaPath"),params:new oe.Name("params"),propertyName:new oe.Name("propertyName"),message:new oe.Name("message"),schema:new oe.Name("schema"),parentSchema:new oe.Name("parentSchema")};function pl(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,oe._)`{}`:wf(t,e,r)}function wf(t,e,r={}){let{gen:n,it:a}=t,s=[Cf(a,r),Tf(t,r)];return Mf(t,e,s),n.object(...s)}function Cf({errorPath:t},{instancePath:e}){let r=e?(0,oe.str)`${t}${(0,Ss.getErrorPath)(e,Ss.Type.Str)}`:t;return[Xe.default.instancePath,(0,oe.strConcat)(Xe.default.instancePath,r)]}function Tf({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let a=n?e:(0,oe.str)`${e}/${t}`;return r&&(a=(0,oe.str)`${a}${(0,Ss.getErrorPath)(r,Ss.Type.Str)}`),[Fr.schemaPath,a]}function Mf(t,{params:e,message:r},n){let{keyword:a,data:s,schemaValue:i,it:l}=t,{opts:f,propertyName:g,topSchemaRef:y,schemaPath:$}=l;n.push([Fr.keyword,a],[Fr.params,typeof e=="function"?e(t):e||(0,oe._)`{}`]),f.messages&&n.push([Fr.message,typeof r=="function"?r(t):r]),f.verbose&&n.push([Fr.schema,i],[Fr.parentSchema,(0,oe._)`${y}${$}`],[Xe.default.data,s]),g&&n.push([Fr.propertyName,g])}});var gl=x(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.boolOrEmptySchema=En.topBoolOrEmptySchema=void 0;var Pf=va(),If=ee(),Df=Jt(),Rf={message:"boolean schema is false"};function Nf(t){let{gen:e,schema:r,validateName:n}=t;r===!1?vl(t,!1):typeof r=="object"&&r.$async===!0?e.return(Df.default.data):(e.assign((0,If._)`${n}.errors`,null),e.return(!0))}En.topBoolOrEmptySchema=Nf;function Af(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),vl(t)):r.var(e,!0)}En.boolOrEmptySchema=Af;function vl(t,e){let{gen:r,data:n}=t,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Pf.reportError)(a,Rf,void 0,e)}});var Ji=x(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.getRules=Sn.isJSONType=void 0;var Of=["string","number","integer","boolean","null","object","array"],kf=new Set(Of);function qf(t){return typeof t=="string"&&kf.has(t)}Sn.isJSONType=qf;function Lf(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:ut(De({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Sn.getRules=Lf});var Qi=x(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.shouldUseRule=hr.shouldUseGroup=hr.schemaHasRulesForType=void 0;function xf({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&yl(t,n)}hr.schemaHasRulesForType=xf;function yl(t,e){return e.rules.some(r=>_l(t,r))}hr.shouldUseGroup=yl;function _l(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}hr.shouldUseRule=_l});var ya=x(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.reportTypeError=Fe.checkDataTypes=Fe.checkDataType=Fe.coerceAndCheckDataType=Fe.getJSONTypes=Fe.getSchemaTypes=Fe.DataType=void 0;var jf=Ji(),Ff=Qi(),Vf=va(),Y=ee(),bl=de(),ga;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ga=Fe.DataType||(Fe.DataType={}));function Uf(t){let e=$l(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Fe.getSchemaTypes=Uf;function $l(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(jf.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Fe.getJSONTypes=$l;function Hf(t,e){let{gen:r,data:n,opts:a}=t,s=Bf(e,a.coerceTypes),i=e.length>0&&!(s.length===0&&e.length===1&&(0,Ff.schemaHasRulesForType)(t,e[0]));if(i){let l=Zi(e,n,a.strictNumbers,ga.Wrong);r.if(l,()=>{s.length?zf(t,e,s):eo(t)})}return i}Fe.coerceAndCheckDataType=Hf;var El=new Set(["string","number","integer","boolean","null"]);function Bf(t,e){return e?t.filter(r=>El.has(r)||e==="array"&&r==="array"):[]}function zf(t,e,r){let{gen:n,data:a,opts:s}=t,i=n.let("dataType",(0,Y._)`typeof ${a}`),l=n.let("coerced",(0,Y._)`undefined`);s.coerceTypes==="array"&&n.if((0,Y._)`${i} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,Y._)`${a}[0]`).assign(i,(0,Y._)`typeof ${a}`).if(Zi(e,a,s.strictNumbers),()=>n.assign(l,a))),n.if((0,Y._)`${l} !== undefined`);for(let g of r)(El.has(g)||g==="array"&&s.coerceTypes==="array")&&f(g);n.else(),eo(t),n.endIf(),n.if((0,Y._)`${l} !== undefined`,()=>{n.assign(a,l),Gf(t,l)});function f(g){switch(g){case"string":n.elseIf((0,Y._)`${i} == "number" || ${i} == "boolean"`).assign(l,(0,Y._)`"" + ${a}`).elseIf((0,Y._)`${a} === null`).assign(l,(0,Y._)`""`);return;case"number":n.elseIf((0,Y._)`${i} == "boolean" || ${a} === null
              || (${i} == "string" && ${a} && ${a} == +${a})`).assign(l,(0,Y._)`+${a}`);return;case"integer":n.elseIf((0,Y._)`${i} === "boolean" || ${a} === null
              || (${i} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(l,(0,Y._)`+${a}`);return;case"boolean":n.elseIf((0,Y._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(l,!1).elseIf((0,Y._)`${a} === "true" || ${a} === 1`).assign(l,!0);return;case"null":n.elseIf((0,Y._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(l,null);return;case"array":n.elseIf((0,Y._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${a} === null`).assign(l,(0,Y._)`[${a}]`)}}}function Gf({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Y._)`${e} !== undefined`,()=>t.assign((0,Y._)`${e}[${r}]`,n))}function Xi(t,e,r,n=ga.Correct){let a=n===ga.Correct?Y.operators.EQ:Y.operators.NEQ,s;switch(t){case"null":return(0,Y._)`${e} ${a} null`;case"array":s=(0,Y._)`Array.isArray(${e})`;break;case"object":s=(0,Y._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=i((0,Y._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=i();break;default:return(0,Y._)`typeof ${e} ${a} ${t}`}return n===ga.Correct?s:(0,Y.not)(s);function i(l=Y.nil){return(0,Y.and)((0,Y._)`typeof ${e} == "number"`,l,r?(0,Y._)`isFinite(${e})`:Y.nil)}}Fe.checkDataType=Xi;function Zi(t,e,r,n){if(t.length===1)return Xi(t[0],e,r,n);let a,s=(0,bl.toHash)(t);if(s.array&&s.object){let i=(0,Y._)`typeof ${e} != "object"`;a=s.null?i:(0,Y._)`!${e} || ${i}`,delete s.null,delete s.array,delete s.object}else a=Y.nil;s.number&&delete s.integer;for(let i in s)a=(0,Y.and)(a,Xi(i,e,r,n));return a}Fe.checkDataTypes=Zi;var Kf={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Y._)`{type: ${t}}`:(0,Y._)`{type: ${e}}`};function eo(t){let e=Wf(t);(0,Vf.reportError)(e,Kf)}Fe.reportTypeError=eo;function Wf(t){let{gen:e,data:r,schema:n}=t,a=(0,bl.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:t}}});var wl=x(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.assignDefaults=void 0;var wn=ee(),Yf=de();function Jf(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let a in r)Sl(t,a,r[a].default);else e==="array"&&Array.isArray(n)&&n.forEach((a,s)=>Sl(t,s,a.default))}ws.assignDefaults=Jf;function Sl(t,e,r){let{gen:n,compositeRule:a,data:s,opts:i}=t;if(r===void 0)return;let l=(0,wn._)`${s}${(0,wn.getProperty)(e)}`;if(a){(0,Yf.checkStrictMode)(t,`default is ignored for: ${l}`);return}let f=(0,wn._)`${l} === undefined`;i.useDefaults==="empty"&&(f=(0,wn._)`${f} || ${l} === null || ${l} === ""`),n.if(f,(0,wn._)`${l} = ${(0,wn.stringify)(r)}`)}});var mt=x(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.validateUnion=ye.validateArray=ye.usePattern=ye.callValidateCode=ye.schemaProperties=ye.allSchemaProperties=ye.noPropertyInData=ye.propertyInData=ye.isOwnProperty=ye.hasPropFunc=ye.reportMissingProp=ye.checkMissingProp=ye.checkReportMissingProp=void 0;var Se=ee(),to=de(),pr=Jt(),Qf=de();function Xf(t,e){let{gen:r,data:n,it:a}=t;r.if(no(r,n,e,a.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Se._)`${e}`},!0),t.error()})}ye.checkReportMissingProp=Xf;function Zf({gen:t,data:e,it:{opts:r}},n,a){return(0,Se.or)(...n.map(s=>(0,Se.and)(no(t,e,s,r.ownProperties),(0,Se._)`${a} = ${s}`)))}ye.checkMissingProp=Zf;function em(t,e){t.setParams({missingProperty:e},!0),t.error()}ye.reportMissingProp=em;function Cl(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Se._)`Object.prototype.hasOwnProperty`})}ye.hasPropFunc=Cl;function ro(t,e,r){return(0,Se._)`${Cl(t)}.call(${e}, ${r})`}ye.isOwnProperty=ro;function tm(t,e,r,n){let a=(0,Se._)`${e}${(0,Se.getProperty)(r)} !== undefined`;return n?(0,Se._)`${a} && ${ro(t,e,r)}`:a}ye.propertyInData=tm;function no(t,e,r,n){let a=(0,Se._)`${e}${(0,Se.getProperty)(r)} === undefined`;return n?(0,Se.or)(a,(0,Se.not)(ro(t,e,r))):a}ye.noPropertyInData=no;function Tl(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ye.allSchemaProperties=Tl;function rm(t,e){return Tl(e).filter(r=>!(0,to.alwaysValidSchema)(t,e[r]))}ye.schemaProperties=rm;function nm({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:s},it:i},l,f,g){let y=g?(0,Se._)`${t}, ${e}, ${n}${a}`:e,$=[[pr.default.instancePath,(0,Se.strConcat)(pr.default.instancePath,s)],[pr.default.parentData,i.parentData],[pr.default.parentDataProperty,i.parentDataProperty],[pr.default.rootData,pr.default.rootData]];i.opts.dynamicRef&&$.push([pr.default.dynamicAnchors,pr.default.dynamicAnchors]);let b=(0,Se._)`${y}, ${r.object(...$)}`;return f!==Se.nil?(0,Se._)`${l}.call(${f}, ${b})`:(0,Se._)`${l}(${b})`}ye.callValidateCode=nm;var am=(0,Se._)`new RegExp`;function sm({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:a}=e.code,s=a(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Se._)`${a.code==="new RegExp"?am:(0,Qf.useFunc)(t,a)}(${r}, ${n})`})}ye.usePattern=sm;function im(t){let{gen:e,data:r,keyword:n,it:a}=t,s=e.name("valid");if(a.allErrors){let l=e.let("valid",!0);return i(()=>e.assign(l,!1)),l}return e.var(s,!0),i(()=>e.break()),s;function i(l){let f=e.const("len",(0,Se._)`${r}.length`);e.forRange("i",0,f,g=>{t.subschema({keyword:n,dataProp:g,dataPropType:to.Type.Num},s),e.if((0,Se.not)(s),l)})}}ye.validateArray=im;function om(t){let{gen:e,schema:r,keyword:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(f=>(0,to.alwaysValidSchema)(a,f))&&!a.opts.unevaluated)return;let i=e.let("valid",!1),l=e.name("_valid");e.block(()=>r.forEach((f,g)=>{let y=t.subschema({keyword:n,schemaProp:g,compositeRule:!0},l);e.assign(i,(0,Se._)`${i} || ${l}`),t.mergeValidEvaluated(y,l)||e.if((0,Se.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}ye.validateUnion=om});var Il=x(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateKeywordUsage=qt.validSchemaType=qt.funcKeywordCode=qt.macroKeywordCode=void 0;var Ze=ee(),Vr=Jt(),cm=mt(),lm=va();function um(t,e){let{gen:r,keyword:n,schema:a,parentSchema:s,it:i}=t,l=e.macro.call(i.self,a,s,i),f=Pl(r,n,l);i.opts.validateSchema!==!1&&i.self.validateSchema(l,!0);let g=r.name("valid");t.subschema({schema:l,schemaPath:Ze.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:f,compositeRule:!0},g),t.pass(g,()=>t.error(!0))}qt.macroKeywordCode=um;function dm(t,e){var r;let{gen:n,keyword:a,schema:s,parentSchema:i,$data:l,it:f}=t;mm(f,e);let g=!l&&e.compile?e.compile.call(f.self,s,i,f):e.validate,y=Pl(n,a,g),$=n.let("valid");t.block$data($,b),t.ok((r=e.valid)!==null&&r!==void 0?r:$);function b(){if(e.errors===!1)T(),e.modifying&&Ml(t),N(()=>t.error());else{let A=e.async?S():M();e.modifying&&Ml(t),N(()=>fm(t,A))}}function S(){let A=n.let("ruleErrs",null);return n.try(()=>T((0,Ze._)`await `),z=>n.assign($,!1).if((0,Ze._)`${z} instanceof ${f.ValidationError}`,()=>n.assign(A,(0,Ze._)`${z}.errors`),()=>n.throw(z))),A}function M(){let A=(0,Ze._)`${y}.errors`;return n.assign(A,null),T(Ze.nil),A}function T(A=e.async?(0,Ze._)`await `:Ze.nil){let z=f.opts.passContext?Vr.default.this:Vr.default.self,V=!("compile"in e&&!l||e.schema===!1);n.assign($,(0,Ze._)`${A}${(0,cm.callValidateCode)(t,y,z,V)}`,e.modifying)}function N(A){var z;n.if((0,Ze.not)((z=e.valid)!==null&&z!==void 0?z:$),A)}}qt.funcKeywordCode=dm;function Ml(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Ze._)`${n.parentData}[${n.parentDataProperty}]`))}function fm(t,e){let{gen:r}=t;r.if((0,Ze._)`Array.isArray(${e})`,()=>{r.assign(Vr.default.vErrors,(0,Ze._)`${Vr.default.vErrors} === null ? ${e} : ${Vr.default.vErrors}.concat(${e})`).assign(Vr.default.errors,(0,Ze._)`${Vr.default.vErrors}.length`),(0,lm.extendErrors)(t)},()=>t.error())}function mm({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Pl(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ze.stringify)(r)})}function hm(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}qt.validSchemaType=hm;function pm({schema:t,opts:e,self:r,errSchemaPath:n},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");let i=a.dependencies;if(i!=null&&i.some(l=>!Object.prototype.hasOwnProperty.call(t,l)))throw new Error(`parent schema must have dependencies of ${s}: ${i.join(",")}`);if(a.validateSchema&&!a.validateSchema(t[s])){let f=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(f);else throw new Error(f)}}qt.validateKeywordUsage=pm});var Rl=x(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.extendSubschemaMode=vr.extendSubschemaData=vr.getSubschema=void 0;var Lt=ee(),Dl=de();function vm(t,{keyword:e,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:s,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let l=t.schema[e];return r===void 0?{schema:l,schemaPath:(0,Lt._)`${t.schemaPath}${(0,Lt.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:l[r],schemaPath:(0,Lt._)`${t.schemaPath}${(0,Lt.getProperty)(e)}${(0,Lt.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Dl.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||s===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:i,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}vr.getSubschema=vm;function gm(t,e,{dataProp:r,dataPropType:n,data:a,dataTypes:s,propertyName:i}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:l}=e;if(r!==void 0){let{errorPath:g,dataPathArr:y,opts:$}=e,b=l.let("data",(0,Lt._)`${e.data}${(0,Lt.getProperty)(r)}`,!0);f(b),t.errorPath=(0,Lt.str)`${g}${(0,Dl.getErrorPath)(r,n,$.jsPropertySyntax)}`,t.parentDataProperty=(0,Lt._)`${r}`,t.dataPathArr=[...y,t.parentDataProperty]}if(a!==void 0){let g=a instanceof Lt.Name?a:l.let("data",a,!0);f(g),i!==void 0&&(t.propertyName=i)}s&&(t.dataTypes=s);function f(g){t.data=g,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,g]}}vr.extendSubschemaData=gm;function ym(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:s}){n!==void 0&&(t.compositeRule=n),a!==void 0&&(t.createErrors=a),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}vr.extendSubschemaMode=ym});var ao=x((By,Nl)=>{"use strict";Nl.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var i=s[a];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var Ol=x((zy,Al)=>{"use strict";var gr=Al.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};Cs(e,n,a,t,"",t)};gr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};gr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};gr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};gr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Cs(t,e,r,n,a,s,i,l,f,g){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,a,s,i,l,f,g);for(var y in n){var $=n[y];if(Array.isArray($)){if(y in gr.arrayKeywords)for(var b=0;b<$.length;b++)Cs(t,e,r,$[b],a+"/"+y+"/"+b,s,a,y,n,b)}else if(y in gr.propsKeywords){if($&&typeof $=="object")for(var S in $)Cs(t,e,r,$[S],a+"/"+y+"/"+_m(S),s,a,y,n,S)}else(y in gr.keywords||t.allKeys&&!(y in gr.skipKeywords))&&Cs(t,e,r,$,a+"/"+y,s,a,y,n)}r(n,a,s,i,l,f,g)}}function _m(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var _a=x(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.getSchemaRefs=st.resolveUrl=st.normalizeId=st._getFullPath=st.getFullPath=st.inlineRef=void 0;var bm=de(),$m=ao(),Em=Ol(),Sm=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function wm(t,e=!0){return typeof t=="boolean"?!0:e===!0?!so(t):e?kl(t)<=e:!1}st.inlineRef=wm;var Cm=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function so(t){for(let e in t){if(Cm.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(so)||typeof r=="object"&&so(r))return!0}return!1}function kl(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Sm.has(r)&&(typeof t[r]=="object"&&(0,bm.eachItem)(t[r],n=>e+=kl(n)),e===1/0))return 1/0}return e}function ql(t,e="",r){r!==!1&&(e=Cn(e));let n=t.parse(e);return Ll(t,n)}st.getFullPath=ql;function Ll(t,e){return t.serialize(e).split("#")[0]+"#"}st._getFullPath=Ll;var Tm=/#\/?$/;function Cn(t){return t?t.replace(Tm,""):""}st.normalizeId=Cn;function Mm(t,e,r){return r=Cn(r),t.resolve(e,r)}st.resolveUrl=Mm;var Pm=/^[a-z_][-a-z0-9._]*$/i;function Im(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,a=Cn(t[r]||e),s={"":a},i=ql(n,a,!1),l={},f=new Set;return Em(t,{allKeys:!0},($,b,S,M)=>{if(M===void 0)return;let T=i+b,N=s[M];typeof $[r]=="string"&&(N=A.call(this,$[r])),z.call(this,$.$anchor),z.call(this,$.$dynamicAnchor),s[b]=N;function A(V){let ce=this.opts.uriResolver.resolve;if(V=Cn(N?ce(N,V):V),f.has(V))throw y(V);f.add(V);let B=this.refs[V];return typeof B=="string"&&(B=this.refs[B]),typeof B=="object"?g($,B.schema,V):V!==Cn(T)&&(V[0]==="#"?(g($,l[V],V),l[V]=$):this.refs[V]=T),V}function z(V){if(typeof V=="string"){if(!Pm.test(V))throw new Error(`invalid anchor "${V}"`);A.call(this,`#${V}`)}}}),l;function g($,b,S){if(b!==void 0&&!$m($,b))throw y(S)}function y($){return new Error(`reference "${$}" resolves to more than one schema`)}}st.getSchemaRefs=Im});var Ea=x(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.getData=yr.KeywordCxt=yr.validateFunctionCode=void 0;var Hl=gl(),xl=ya(),oo=Qi(),Ts=ya(),Dm=wl(),$a=Il(),io=Rl(),U=ee(),G=Jt(),Rm=_a(),Qt=de(),ba=va();function Nm(t){if(Gl(t)&&(Kl(t),zl(t))){km(t);return}Bl(t,()=>(0,Hl.topBoolOrEmptySchema)(t))}yr.validateFunctionCode=Nm;function Bl({gen:t,validateName:e,schema:r,schemaEnv:n,opts:a},s){a.code.es5?t.func(e,(0,U._)`${G.default.data}, ${G.default.valCxt}`,n.$async,()=>{t.code((0,U._)`"use strict"; ${jl(r,a)}`),Om(t,a),t.code(s)}):t.func(e,(0,U._)`${G.default.data}, ${Am(a)}`,n.$async,()=>t.code(jl(r,a)).code(s))}function Am(t){return(0,U._)`{${G.default.instancePath}="", ${G.default.parentData}, ${G.default.parentDataProperty}, ${G.default.rootData}=${G.default.data}${t.dynamicRef?(0,U._)`, ${G.default.dynamicAnchors}={}`:U.nil}}={}`}function Om(t,e){t.if(G.default.valCxt,()=>{t.var(G.default.instancePath,(0,U._)`${G.default.valCxt}.${G.default.instancePath}`),t.var(G.default.parentData,(0,U._)`${G.default.valCxt}.${G.default.parentData}`),t.var(G.default.parentDataProperty,(0,U._)`${G.default.valCxt}.${G.default.parentDataProperty}`),t.var(G.default.rootData,(0,U._)`${G.default.valCxt}.${G.default.rootData}`),e.dynamicRef&&t.var(G.default.dynamicAnchors,(0,U._)`${G.default.valCxt}.${G.default.dynamicAnchors}`)},()=>{t.var(G.default.instancePath,(0,U._)`""`),t.var(G.default.parentData,(0,U._)`undefined`),t.var(G.default.parentDataProperty,(0,U._)`undefined`),t.var(G.default.rootData,G.default.data),e.dynamicRef&&t.var(G.default.dynamicAnchors,(0,U._)`{}`)})}function km(t){let{schema:e,opts:r,gen:n}=t;Bl(t,()=>{r.$comment&&e.$comment&&Yl(t),Fm(t),n.let(G.default.vErrors,null),n.let(G.default.errors,0),r.unevaluated&&qm(t),Wl(t),Hm(t)})}function qm(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,U._)`${r}.evaluated`),e.if((0,U._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,U._)`${t.evaluated}.props`,(0,U._)`undefined`)),e.if((0,U._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,U._)`${t.evaluated}.items`,(0,U._)`undefined`))}function jl(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,U._)`/*# sourceURL=${r} */`:U.nil}function Lm(t,e){if(Gl(t)&&(Kl(t),zl(t))){xm(t,e);return}(0,Hl.boolOrEmptySchema)(t,e)}function zl({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Gl(t){return typeof t.schema!="boolean"}function xm(t,e){let{schema:r,gen:n,opts:a}=t;a.$comment&&r.$comment&&Yl(t),Vm(t),Um(t);let s=n.const("_errs",G.default.errors);Wl(t,s),n.var(e,(0,U._)`${s} === ${G.default.errors}`)}function Kl(t){(0,Qt.checkUnknownRules)(t),jm(t)}function Wl(t,e){if(t.opts.jtd)return Fl(t,[],!1,e);let r=(0,xl.getSchemaTypes)(t.schema),n=(0,xl.coerceAndCheckDataType)(t,r);Fl(t,r,!n,e)}function jm(t){let{schema:e,errSchemaPath:r,opts:n,self:a}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Qt.schemaHasRulesButRef)(e,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Fm(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Qt.checkStrictMode)(t,"default is ignored in the schema root")}function Vm(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Rm.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Um(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Yl({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:a}){let s=r.$comment;if(a.$comment===!0)t.code((0,U._)`${G.default.self}.logger.log(${s})`);else if(typeof a.$comment=="function"){let i=(0,U.str)`${n}/$comment`,l=t.scopeValue("root",{ref:e.root});t.code((0,U._)`${G.default.self}.opts.$comment(${s}, ${i}, ${l}.schema)`)}}function Hm(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:a,opts:s}=t;r.$async?e.if((0,U._)`${G.default.errors} === 0`,()=>e.return(G.default.data),()=>e.throw((0,U._)`new ${a}(${G.default.vErrors})`)):(e.assign((0,U._)`${n}.errors`,G.default.vErrors),s.unevaluated&&Bm(t),e.return((0,U._)`${G.default.errors} === 0`))}function Bm({gen:t,evaluated:e,props:r,items:n}){r instanceof U.Name&&t.assign((0,U._)`${e}.props`,r),n instanceof U.Name&&t.assign((0,U._)`${e}.items`,n)}function Fl(t,e,r,n){let{gen:a,schema:s,data:i,allErrors:l,opts:f,self:g}=t,{RULES:y}=g;if(s.$ref&&(f.ignoreKeywordsWithRef||!(0,Qt.schemaHasRulesButRef)(s,y))){a.block(()=>Jl(t,"$ref",y.all.$ref.definition));return}f.jtd||zm(t,e),a.block(()=>{for(let b of y.rules)$(b);$(y.post)});function $(b){!(0,oo.shouldUseGroup)(s,b)||(b.type?(a.if((0,Ts.checkDataType)(b.type,i,f.strictNumbers)),Vl(t,b),e.length===1&&e[0]===b.type&&r&&(a.else(),(0,Ts.reportTypeError)(t)),a.endIf()):Vl(t,b),l||a.if((0,U._)`${G.default.errors} === ${n||0}`))}}function Vl(t,e){let{gen:r,schema:n,opts:{useDefaults:a}}=t;a&&(0,Dm.assignDefaults)(t,e.type),r.block(()=>{for(let s of e.rules)(0,oo.shouldUseRule)(n,s)&&Jl(t,s.keyword,s.definition,e.type)})}function zm(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Gm(t,e),t.opts.allowUnionTypes||Km(t,e),Wm(t,t.dataTypes))}function Gm(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Ul(t.dataTypes,r)||co(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>Ul(e,r))}}function Km(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&co(t,"use allowUnionTypes to allow union type keyword")}function Wm(t,e){let r=t.self.RULES.all;for(let n in r){let a=r[n];if(typeof a=="object"&&(0,oo.shouldUseRule)(t.schema,a)){let{type:s}=a.definition;s.length&&!s.some(i=>Ym(e,i))&&co(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function Ym(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Ul(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function co(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Qt.checkStrictMode)(t,e,t.opts.strictTypes)}var Ms=class{constructor(e,r,n){if((0,$a.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Qt.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ql(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,$a.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",G.default.errors))}result(e,r,n){this.failResult((0,U.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,U.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,U._)`${r} !== undefined && (${(0,U.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?ba.reportExtraError:ba.reportError)(this,this.def.error,r)}$dataError(){(0,ba.reportError)(this,this.def.$dataError||ba.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ba.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=U.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=U.nil,r=U.nil){if(!this.$data)return;let{gen:n,schemaCode:a,schemaType:s,def:i}=this;n.if((0,U.or)((0,U._)`${a} === undefined`,r)),e!==U.nil&&n.assign(e,!0),(s.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==U.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:a,it:s}=this;return(0,U.or)(i(),l());function i(){if(n.length){if(!(r instanceof U.Name))throw new Error("ajv implementation error");let f=Array.isArray(n)?n:[n];return(0,U._)`${(0,Ts.checkDataTypes)(f,r,s.opts.strictNumbers,Ts.DataType.Wrong)}`}return U.nil}function l(){if(a.validateSchema){let f=e.scopeValue("validate$data",{ref:a.validateSchema});return(0,U._)`!${f}(${r})`}return U.nil}}subschema(e,r){let n=(0,io.getSubschema)(this.it,e);(0,io.extendSubschemaData)(n,this.it,e),(0,io.extendSubschemaMode)(n,e);let a=ut(De(De({},this.it),n),{items:void 0,props:void 0});return Lm(a,r),a}mergeEvaluated(e,r){let{it:n,gen:a}=this;!n.opts.unevaluated||(n.props!==!0&&e.props!==void 0&&(n.props=Qt.mergeEvaluated.props(a,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Qt.mergeEvaluated.items(a,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(e,U.Name)),!0}};yr.KeywordCxt=Ms;function Jl(t,e,r,n){let a=new Ms(t,r,e);"code"in r?r.code(a,n):a.$data&&r.validate?(0,$a.funcKeywordCode)(a,r):"macro"in r?(0,$a.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,$a.funcKeywordCode)(a,r)}var Jm=/^\/(?:[^~]|~0|~1)*$/,Qm=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ql(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let a,s;if(t==="")return G.default.rootData;if(t[0]==="/"){if(!Jm.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);a=t,s=G.default.rootData}else{let g=Qm.exec(t);if(!g)throw new Error(`Invalid JSON-pointer: ${t}`);let y=+g[1];if(a=g[2],a==="#"){if(y>=e)throw new Error(f("property/index",y));return n[e-y]}if(y>e)throw new Error(f("data",y));if(s=r[e-y],!a)return s}let i=s,l=a.split("/");for(let g of l)g&&(s=(0,U._)`${s}${(0,U.getProperty)((0,Qt.unescapeJsonPointer)(g))}`,i=(0,U._)`${i} && ${s}`);return i;function f(g,y){return`Cannot access ${g} ${y} levels up, current level is ${e}`}}yr.getData=Ql});var Ps=x(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});var lo=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};uo.default=lo});var Is=x(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});var fo=_a(),mo=class extends Error{constructor(e,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,fo.resolveUrl)(e,r,n),this.missingSchema=(0,fo.normalizeId)((0,fo.getFullPath)(e,this.missingRef))}};ho.default=mo});var Rs=x(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.resolveSchema=ht.getCompilingSchema=ht.resolveRef=ht.compileSchema=ht.SchemaEnv=void 0;var wt=ee(),Xm=Ps(),Ur=Jt(),Ct=_a(),Xl=de(),Zm=Ea(),Tn=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ct.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};ht.SchemaEnv=Tn;function vo(t){let e=Zl.call(this,t);if(e)return e;let r=(0,Ct.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:s}=this.opts,i=new wt.CodeGen(this.scope,{es5:n,lines:a,ownProperties:s}),l;t.$async&&(l=i.scopeValue("Error",{ref:Xm.default,code:(0,wt._)`require("ajv/dist/runtime/validation_error").default`}));let f=i.scopeName("validate");t.validateName=f;let g={gen:i,allErrors:this.opts.allErrors,data:Ur.default.data,parentData:Ur.default.parentData,parentDataProperty:Ur.default.parentDataProperty,dataNames:[Ur.default.data],dataPathArr:[wt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,wt.stringify)(t.schema)}:{ref:t.schema}),validateName:f,ValidationError:l,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:wt.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,wt._)`""`,opts:this.opts,self:this},y;try{this._compilations.add(t),(0,Zm.validateFunctionCode)(g),i.optimize(this.opts.code.optimize);let $=i.toString();y=`${i.scopeRefs(Ur.default.scope)}return ${$}`,this.opts.code.process&&(y=this.opts.code.process(y,t));let S=new Function(`${Ur.default.self}`,`${Ur.default.scope}`,y)(this,this.scope.get());if(this.scope.value(f,{ref:S}),S.errors=null,S.schema=t.schema,S.schemaEnv=t,t.$async&&(S.$async=!0),this.opts.code.source===!0&&(S.source={validateName:f,validateCode:$,scopeValues:i._values}),this.opts.unevaluated){let{props:M,items:T}=g;S.evaluated={props:M instanceof wt.Name?void 0:M,items:T instanceof wt.Name?void 0:T,dynamicProps:M instanceof wt.Name,dynamicItems:T instanceof wt.Name},S.source&&(S.source.evaluated=(0,wt.stringify)(S.evaluated))}return t.validate=S,t}catch($){throw delete t.validate,delete t.validateName,y&&this.logger.error("Error compiling schema, function code:",y),$}finally{this._compilations.delete(t)}}ht.compileSchema=vo;function eh(t,e,r){var n;r=(0,Ct.resolveUrl)(this.opts.uriResolver,e,r);let a=t.refs[r];if(a)return a;let s=nh.call(this,t,r);if(s===void 0){let i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:l}=this.opts;i&&(s=new Tn({schema:i,schemaId:l,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=th.call(this,s)}ht.resolveRef=eh;function th(t){return(0,Ct.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:vo.call(this,t)}function Zl(t){for(let e of this._compilations)if(rh(e,t))return e}ht.getCompilingSchema=Zl;function rh(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function nh(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ds.call(this,t,e)}function Ds(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ct._getFullPath)(this.opts.uriResolver,r),a=(0,Ct.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===a)return po.call(this,r,t);let s=(0,Ct.normalizeId)(n),i=this.refs[s]||this.schemas[s];if(typeof i=="string"){let l=Ds.call(this,t,i);return typeof(l==null?void 0:l.schema)!="object"?void 0:po.call(this,r,l)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||vo.call(this,i),s===(0,Ct.normalizeId)(e)){let{schema:l}=i,{schemaId:f}=this.opts,g=l[f];return g&&(a=(0,Ct.resolveUrl)(this.opts.uriResolver,a,g)),new Tn({schema:l,schemaId:f,root:t,baseId:a})}return po.call(this,r,i)}}ht.resolveSchema=Ds;var ah=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function po(t,{baseId:e,schema:r,root:n}){var a;if(((a=t.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(let l of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let f=r[(0,Xl.unescapeFragment)(l)];if(f===void 0)return;r=f;let g=typeof r=="object"&&r[this.opts.schemaId];!ah.has(l)&&g&&(e=(0,Ct.resolveUrl)(this.opts.uriResolver,e,g))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Xl.schemaHasRulesButRef)(r,this.RULES)){let l=(0,Ct.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=Ds.call(this,n,l)}let{schemaId:i}=this.opts;if(s=s||new Tn({schema:r,schemaId:i,root:n,baseId:e}),s.schema!==s.root.schema)return s}});var eu=x((Xy,sh)=>{sh.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ru=x((Ns,tu)=>{(function(t,e){typeof Ns=="object"&&typeof tu<"u"?e(Ns):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Ns,function(t){"use strict";function e(){for(var m=arguments.length,u=Array(m),h=0;h<m;h++)u[h]=arguments[h];if(u.length>1){u[0]=u[0].slice(0,-1);for(var E=u.length-1,w=1;w<E;++w)u[w]=u[w].slice(1,-1);return u[E]=u[E].slice(1),u.join("")}else return u[0]}function r(m){return"(?:"+m+")"}function n(m){return m===void 0?"undefined":m===null?"null":Object.prototype.toString.call(m).split(" ").pop().split("]").shift().toLowerCase()}function a(m){return m.toUpperCase()}function s(m){return m!=null?m instanceof Array?m:typeof m.length!="number"||m.split||m.setInterval||m.call?[m]:Array.prototype.slice.call(m):[]}function i(m,u){var h=m;if(u)for(var E in u)h[E]=u[E];return h}function l(m){var u="[A-Za-z]",h="[\\x0D]",E="[0-9]",w="[\\x22]",q=e(E,"[A-Fa-f]"),W="[\\x0A]",ne="[\\x20]",fe=r(r("%[EFef]"+q+"%"+q+q+"%"+q+q)+"|"+r("%[89A-Fa-f]"+q+"%"+q+q)+"|"+r("%"+q+q)),Me="[\\:\\/\\?\\#\\[\\]\\@]",te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",$e=e(Me,te),Pe=m?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",be=m?"[\\uE000-\\uF8FF]":"[]",ie=e(u,E,"[\\-\\.\\_\\~]",Pe),Ee=r(u+e(u,E,"[\\+\\-\\.]")+"*"),he=r(r(fe+"|"+e(ie,te,"[\\:]"))+"*"),Ft=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("[1-9]"+E)+"|"+E),He=r(r("25[0-5]")+"|"+r("2[0-4]"+E)+"|"+r("1"+E+E)+"|"+r("0?[1-9]"+E)+"|0?0?"+E),Ae=r(He+"\\."+He+"\\."+He+"\\."+He),pe=r(q+"{1,4}"),Ne=r(r(pe+"\\:"+pe)+"|"+Ae),nt=r(r(pe+"\\:")+"{6}"+Ne),We=r("\\:\\:"+r(pe+"\\:")+"{5}"+Ne),_t=r(r(pe)+"?\\:\\:"+r(pe+"\\:")+"{4}"+Ne),bt=r(r(r(pe+"\\:")+"{0,1}"+pe)+"?\\:\\:"+r(pe+"\\:")+"{3}"+Ne),br=r(r(r(pe+"\\:")+"{0,2}"+pe)+"?\\:\\:"+r(pe+"\\:")+"{2}"+Ne),ar=r(r(r(pe+"\\:")+"{0,3}"+pe)+"?\\:\\:"+pe+"\\:"+Ne),Jr=r(r(r(pe+"\\:")+"{0,4}"+pe)+"?\\:\\:"+Ne),sr=r(r(r(pe+"\\:")+"{0,5}"+pe)+"?\\:\\:"+pe),o=r(r(r(pe+"\\:")+"{0,6}"+pe)+"?\\:\\:"),d=r([nt,We,_t,bt,br,ar,Jr,sr,o].join("|")),c=r(r(ie+"|"+fe)+"+"),v=r(d+"\\%25"+c),_=r(d+r("\\%25|\\%(?!"+q+"{2})")+c),p=r("[vV]"+q+"+\\."+e(ie,te,"[\\:]")+"+"),P=r("\\["+r(_+"|"+d+"|"+p)+"\\]"),I=r(r(fe+"|"+e(ie,te))+"*"),D=r(P+"|"+Ae+"(?!"+I+")|"+I),R=r(E+"*"),O=r(r(he+"@")+"?"+D+r("\\:"+R)+"?"),j=r(fe+"|"+e(ie,te,"[\\:\\@]")),J=r(j+"*"),le=r(j+"+"),me=r(r(fe+"|"+e(ie,te,"[\\@]"))+"+"),ve=r(r("\\/"+J)+"*"),ge=r("\\/"+r(le+ve)+"?"),Be=r(me+ve),It=r(le+ve),Dt="(?!"+j+")",cc=r(ve+"|"+ge+"|"+Be+"|"+It+"|"+Dt),Rt=r(r(j+"|"+e("[\\/\\?]",be))+"*"),Qr=r(r(j+"|[\\/\\?]")+"*"),Za=r(r("\\/\\/"+O+ve)+"|"+ge+"|"+It+"|"+Dt),ai=r(Ee+"\\:"+Za+r("\\?"+Rt)+"?"+r("\\#"+Qr)+"?"),es=r(r("\\/\\/"+O+ve)+"|"+ge+"|"+Be+"|"+Dt),$d=r(es+r("\\?"+Rt)+"?"+r("\\#"+Qr)+"?"),Hv=r(ai+"|"+$d),Bv=r(Ee+"\\:"+Za+r("\\?"+Rt)+"?"),zv="^("+Ee+")\\:"+r(r("\\/\\/("+r("("+he+")@")+"?("+D+")"+r("\\:("+R+")")+"?)")+"?("+ve+"|"+ge+"|"+It+"|"+Dt+")")+r("\\?("+Rt+")")+"?"+r("\\#("+Qr+")")+"?$",Gv="^(){0}"+r(r("\\/\\/("+r("("+he+")@")+"?("+D+")"+r("\\:("+R+")")+"?)")+"?("+ve+"|"+ge+"|"+Be+"|"+Dt+")")+r("\\?("+Rt+")")+"?"+r("\\#("+Qr+")")+"?$",Kv="^("+Ee+")\\:"+r(r("\\/\\/("+r("("+he+")@")+"?("+D+")"+r("\\:("+R+")")+"?)")+"?("+ve+"|"+ge+"|"+It+"|"+Dt+")")+r("\\?("+Rt+")")+"?$",Wv="^"+r("\\#("+Qr+")")+"?$",Yv="^"+r("("+he+")@")+"?("+D+")"+r("\\:("+R+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",u,E,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",ie,te),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",ie,te),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",ie,te),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",ie,te),"g"),NOT_QUERY:new RegExp(e("[^\\%]",ie,te,"[\\:\\@\\/\\?]",be),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",ie,te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",ie,te),"g"),UNRESERVED:new RegExp(ie,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",ie,$e),"g"),PCT_ENCODED:new RegExp(fe,"g"),IPV4ADDRESS:new RegExp("^("+Ae+")$"),IPV6ADDRESS:new RegExp("^\\[?("+d+")"+r(r("\\%25|\\%(?!"+q+"{2})")+"("+c+")")+"?\\]?$")}}var f=l(!1),g=l(!0),y=function(){function m(u,h){var E=[],w=!0,q=!1,W=void 0;try{for(var ne=u[Symbol.iterator](),fe;!(w=(fe=ne.next()).done)&&(E.push(fe.value),!(h&&E.length===h));w=!0);}catch(Me){q=!0,W=Me}finally{try{!w&&ne.return&&ne.return()}finally{if(q)throw W}}return E}return function(u,h){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return m(u,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(m){if(Array.isArray(m)){for(var u=0,h=Array(m.length);u<m.length;u++)h[u]=m[u];return h}else return Array.from(m)},b=2147483647,S=36,M=1,T=26,N=38,A=700,z=72,V=128,ce="-",B=/^xn--/,k=/[^\0-\x7E]/,Q=/[\x2E\u3002\uFF0E\uFF61]/g,K={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},re=S-M,se=Math.floor,Ie=String.fromCharCode;function Ce(m){throw new RangeError(K[m])}function ke(m,u){for(var h=[],E=m.length;E--;)h[E]=u(m[E]);return h}function et(m,u){var h=m.split("@"),E="";h.length>1&&(E=h[0]+"@",m=h[1]),m=m.replace(Q,".");var w=m.split("."),q=ke(w,u).join(".");return E+q}function Xt(m){for(var u=[],h=0,E=m.length;h<E;){var w=m.charCodeAt(h++);if(w>=55296&&w<=56319&&h<E){var q=m.charCodeAt(h++);(q&64512)==56320?u.push(((w&1023)<<10)+(q&1023)+65536):(u.push(w),h--)}else u.push(w)}return u}var Gr=function(u){return String.fromCodePoint.apply(String,$(u))},Nn=function(u){return u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:S},jt=function(u,h){return u+22+75*(u<26)-((h!=0)<<5)},An=function(u,h,E){var w=0;for(u=E?se(u/A):u>>1,u+=se(u/h);u>re*T>>1;w+=S)u=se(u/re);return se(w+(re+1)*u/(u+N))},qa=function(u){var h=[],E=u.length,w=0,q=V,W=z,ne=u.lastIndexOf(ce);ne<0&&(ne=0);for(var fe=0;fe<ne;++fe)u.charCodeAt(fe)>=128&&Ce("not-basic"),h.push(u.charCodeAt(fe));for(var Me=ne>0?ne+1:0;Me<E;){for(var te=w,$e=1,Pe=S;;Pe+=S){Me>=E&&Ce("invalid-input");var be=Nn(u.charCodeAt(Me++));(be>=S||be>se((b-w)/$e))&&Ce("overflow"),w+=be*$e;var ie=Pe<=W?M:Pe>=W+T?T:Pe-W;if(be<ie)break;var Ee=S-ie;$e>se(b/Ee)&&Ce("overflow"),$e*=Ee}var he=h.length+1;W=An(w-te,he,te==0),se(w/he)>b-q&&Ce("overflow"),q+=se(w/he),w%=he,h.splice(w++,0,q)}return String.fromCodePoint.apply(String,h)},La=function(u){var h=[];u=Xt(u);var E=u.length,w=V,q=0,W=z,ne=!0,fe=!1,Me=void 0;try{for(var te=u[Symbol.iterator](),$e;!(ne=($e=te.next()).done);ne=!0){var Pe=$e.value;Pe<128&&h.push(Ie(Pe))}}catch(_){fe=!0,Me=_}finally{try{!ne&&te.return&&te.return()}finally{if(fe)throw Me}}var be=h.length,ie=be;for(be&&h.push(ce);ie<E;){var Ee=b,he=!0,Ft=!1,He=void 0;try{for(var Ae=u[Symbol.iterator](),pe;!(he=(pe=Ae.next()).done);he=!0){var Ne=pe.value;Ne>=w&&Ne<Ee&&(Ee=Ne)}}catch(_){Ft=!0,He=_}finally{try{!he&&Ae.return&&Ae.return()}finally{if(Ft)throw He}}var nt=ie+1;Ee-w>se((b-q)/nt)&&Ce("overflow"),q+=(Ee-w)*nt,w=Ee;var We=!0,_t=!1,bt=void 0;try{for(var br=u[Symbol.iterator](),ar;!(We=(ar=br.next()).done);We=!0){var Jr=ar.value;if(Jr<w&&++q>b&&Ce("overflow"),Jr==w){for(var sr=q,o=S;;o+=S){var d=o<=W?M:o>=W+T?T:o-W;if(sr<d)break;var c=sr-d,v=S-d;h.push(Ie(jt(d+c%v,0))),sr=se(c/v)}h.push(Ie(jt(sr,0))),W=An(q,nt,ie==be),q=0,++ie}}}catch(_){_t=!0,bt=_}finally{try{!We&&br.return&&br.return()}finally{if(_t)throw bt}}++q,++w}return h.join("")},vt=function(u){return et(u,function(h){return B.test(h)?qa(h.slice(4).toLowerCase()):h})},xa=function(u){return et(u,function(h){return k.test(h)?"xn--"+La(h):h})},Zt={version:"2.1.0",ucs2:{decode:Xt,encode:Gr},decode:qa,encode:La,toASCII:xa,toUnicode:vt},tt={};function ot(m){var u=m.charCodeAt(0),h=void 0;return u<16?h="%0"+u.toString(16).toUpperCase():u<128?h="%"+u.toString(16).toUpperCase():u<2048?h="%"+(u>>6|192).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase():h="%"+(u>>12|224).toString(16).toUpperCase()+"%"+(u>>6&63|128).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase(),h}function er(m){for(var u="",h=0,E=m.length;h<E;){var w=parseInt(m.substr(h+1,2),16);if(w<128)u+=String.fromCharCode(w),h+=3;else if(w>=194&&w<224){if(E-h>=6){var q=parseInt(m.substr(h+4,2),16);u+=String.fromCharCode((w&31)<<6|q&63)}else u+=m.substr(h,6);h+=6}else if(w>=224){if(E-h>=9){var W=parseInt(m.substr(h+4,2),16),ne=parseInt(m.substr(h+7,2),16);u+=String.fromCharCode((w&15)<<12|(W&63)<<6|ne&63)}else u+=m.substr(h,9);h+=9}else u+=m.substr(h,3),h+=3}return u}function On(m,u){function h(E){var w=er(E);return w.match(u.UNRESERVED)?w:E}return m.scheme&&(m.scheme=String(m.scheme).replace(u.PCT_ENCODED,h).toLowerCase().replace(u.NOT_SCHEME,"")),m.userinfo!==void 0&&(m.userinfo=String(m.userinfo).replace(u.PCT_ENCODED,h).replace(u.NOT_USERINFO,ot).replace(u.PCT_ENCODED,a)),m.host!==void 0&&(m.host=String(m.host).replace(u.PCT_ENCODED,h).toLowerCase().replace(u.NOT_HOST,ot).replace(u.PCT_ENCODED,a)),m.path!==void 0&&(m.path=String(m.path).replace(u.PCT_ENCODED,h).replace(m.scheme?u.NOT_PATH:u.NOT_PATH_NOSCHEME,ot).replace(u.PCT_ENCODED,a)),m.query!==void 0&&(m.query=String(m.query).replace(u.PCT_ENCODED,h).replace(u.NOT_QUERY,ot).replace(u.PCT_ENCODED,a)),m.fragment!==void 0&&(m.fragment=String(m.fragment).replace(u.PCT_ENCODED,h).replace(u.NOT_FRAGMENT,ot).replace(u.PCT_ENCODED,a)),m}function kn(m){return m.replace(/^0*(.*)/,"$1")||"0"}function qn(m,u){var h=m.match(u.IPV4ADDRESS)||[],E=y(h,2),w=E[1];return w?w.split(".").map(kn).join("."):m}function ja(m,u){var h=m.match(u.IPV6ADDRESS)||[],E=y(h,3),w=E[1],q=E[2];if(w){for(var W=w.toLowerCase().split("::").reverse(),ne=y(W,2),fe=ne[0],Me=ne[1],te=Me?Me.split(":").map(kn):[],$e=fe.split(":").map(kn),Pe=u.IPV4ADDRESS.test($e[$e.length-1]),be=Pe?7:8,ie=$e.length-be,Ee=Array(be),he=0;he<be;++he)Ee[he]=te[he]||$e[ie+he]||"";Pe&&(Ee[be-1]=qn(Ee[be-1],u));var Ft=Ee.reduce(function(nt,We,_t){if(!We||We==="0"){var bt=nt[nt.length-1];bt&&bt.index+bt.length===_t?bt.length++:nt.push({index:_t,length:1})}return nt},[]),He=Ft.sort(function(nt,We){return We.length-nt.length})[0],Ae=void 0;if(He&&He.length>1){var pe=Ee.slice(0,He.index),Ne=Ee.slice(He.index+He.length);Ae=pe.join(":")+"::"+Ne.join(":")}else Ae=Ee.join(":");return q&&(Ae+="%"+q),Ae}else return m}var Ys=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Js="".match(/(){0}/)[1]===void 0;function gt(m){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={},E=u.iri!==!1?g:f;u.reference==="suffix"&&(m=(u.scheme?u.scheme+":":"")+"//"+m);var w=m.match(Ys);if(w){Js?(h.scheme=w[1],h.userinfo=w[3],h.host=w[4],h.port=parseInt(w[5],10),h.path=w[6]||"",h.query=w[7],h.fragment=w[8],isNaN(h.port)&&(h.port=w[5])):(h.scheme=w[1]||void 0,h.userinfo=m.indexOf("@")!==-1?w[3]:void 0,h.host=m.indexOf("//")!==-1?w[4]:void 0,h.port=parseInt(w[5],10),h.path=w[6]||"",h.query=m.indexOf("?")!==-1?w[7]:void 0,h.fragment=m.indexOf("#")!==-1?w[8]:void 0,isNaN(h.port)&&(h.port=m.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?w[4]:void 0)),h.host&&(h.host=ja(qn(h.host,E),E)),h.scheme===void 0&&h.userinfo===void 0&&h.host===void 0&&h.port===void 0&&!h.path&&h.query===void 0?h.reference="same-document":h.scheme===void 0?h.reference="relative":h.fragment===void 0?h.reference="absolute":h.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==h.reference&&(h.error=h.error||"URI is not a "+u.reference+" reference.");var q=tt[(u.scheme||h.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!q||!q.unicodeSupport)){if(h.host&&(u.domainHost||q&&q.domainHost))try{h.host=Zt.toASCII(h.host.replace(E.PCT_ENCODED,er).toLowerCase())}catch(W){h.error=h.error||"Host's domain name can not be converted to ASCII via punycode: "+W}On(h,f)}else On(h,E);q&&q.parse&&q.parse(h,u)}else h.error=h.error||"URI can not be parsed.";return h}function Qs(m,u){var h=u.iri!==!1?g:f,E=[];return m.userinfo!==void 0&&(E.push(m.userinfo),E.push("@")),m.host!==void 0&&E.push(ja(qn(String(m.host),h),h).replace(h.IPV6ADDRESS,function(w,q,W){return"["+q+(W?"%25"+W:"")+"]"})),(typeof m.port=="number"||typeof m.port=="string")&&(E.push(":"),E.push(String(m.port))),E.length?E.join(""):void 0}var yt=/^\.\.?\//,Fa=/^\/\.(\/|$)/,Ln=/^\/\.\.(\/|$)/,Kr=/^\/?(?:.|\n)*?(?=\/|$)/;function Mt(m){for(var u=[];m.length;)if(m.match(yt))m=m.replace(yt,"");else if(m.match(Fa))m=m.replace(Fa,"/");else if(m.match(Ln))m=m.replace(Ln,"/"),u.pop();else if(m==="."||m==="..")m="";else{var h=m.match(Kr);if(h){var E=h[0];m=m.slice(E.length),u.push(E)}else throw new Error("Unexpected dot segment condition")}return u.join("")}function rt(m){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=u.iri?g:f,E=[],w=tt[(u.scheme||m.scheme||"").toLowerCase()];if(w&&w.serialize&&w.serialize(m,u),m.host&&!h.IPV6ADDRESS.test(m.host)){if(u.domainHost||w&&w.domainHost)try{m.host=u.iri?Zt.toUnicode(m.host):Zt.toASCII(m.host.replace(h.PCT_ENCODED,er).toLowerCase())}catch(ne){m.error=m.error||"Host's domain name can not be converted to "+(u.iri?"Unicode":"ASCII")+" via punycode: "+ne}}On(m,h),u.reference!=="suffix"&&m.scheme&&(E.push(m.scheme),E.push(":"));var q=Qs(m,u);if(q!==void 0&&(u.reference!=="suffix"&&E.push("//"),E.push(q),m.path&&m.path.charAt(0)!=="/"&&E.push("/")),m.path!==void 0){var W=m.path;!u.absolutePath&&(!w||!w.absolutePath)&&(W=Mt(W)),q===void 0&&(W=W.replace(/^\/\//,"/%2F")),E.push(W)}return m.query!==void 0&&(E.push("?"),E.push(m.query)),m.fragment!==void 0&&(E.push("#"),E.push(m.fragment)),E.join("")}function Wr(m,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],w={};return E||(m=gt(rt(m,h),h),u=gt(rt(u,h),h)),h=h||{},!h.tolerant&&u.scheme?(w.scheme=u.scheme,w.userinfo=u.userinfo,w.host=u.host,w.port=u.port,w.path=Mt(u.path||""),w.query=u.query):(u.userinfo!==void 0||u.host!==void 0||u.port!==void 0?(w.userinfo=u.userinfo,w.host=u.host,w.port=u.port,w.path=Mt(u.path||""),w.query=u.query):(u.path?(u.path.charAt(0)==="/"?w.path=Mt(u.path):((m.userinfo!==void 0||m.host!==void 0||m.port!==void 0)&&!m.path?w.path="/"+u.path:m.path?w.path=m.path.slice(0,m.path.lastIndexOf("/")+1)+u.path:w.path=u.path,w.path=Mt(w.path)),w.query=u.query):(w.path=m.path,u.query!==void 0?w.query=u.query:w.query=m.query),w.userinfo=m.userinfo,w.host=m.host,w.port=m.port),w.scheme=m.scheme),w.fragment=u.fragment,w}function Va(m,u,h){var E=i({scheme:"null"},h);return rt(Wr(gt(m,E),gt(u,E),E,!0),E)}function Ua(m,u){return typeof m=="string"?m=rt(gt(m,u),u):n(m)==="object"&&(m=gt(rt(m,u),u)),m}function Ha(m,u,h){return typeof m=="string"?m=rt(gt(m,h),h):n(m)==="object"&&(m=rt(m,h)),typeof u=="string"?u=rt(gt(u,h),h):n(u)==="object"&&(u=rt(u,h)),m===u}function Ba(m,u){return m&&m.toString().replace(!u||!u.iri?f.ESCAPE:g.ESCAPE,ot)}function ct(m,u){return m&&m.toString().replace(!u||!u.iri?f.PCT_ENCODED:g.PCT_ENCODED,er)}var tr={scheme:"http",domainHost:!0,parse:function(u,h){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u},serialize:function(u,h){var E=String(u.scheme).toLowerCase()==="https";return(u.port===(E?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}},xn={scheme:"https",domainHost:tr.domainHost,parse:tr.parse,serialize:tr.serialize};function jn(m){return typeof m.secure=="boolean"?m.secure:String(m.scheme).toLowerCase()==="wss"}var rr={scheme:"ws",domainHost:!0,parse:function(u,h){var E=u;return E.secure=jn(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(u,h){if((u.port===(jn(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){var E=u.resourceName.split("?"),w=y(E,2),q=w[0],W=w[1];u.path=q&&q!=="/"?q:void 0,u.query=W,u.resourceName=void 0}return u.fragment=void 0,u}},Fn={scheme:"wss",domainHost:rr.domainHost,parse:rr.parse,serialize:rr.serialize},za={},Ga=!0,Yr="[A-Za-z0-9\\-\\.\\_\\~"+(Ga?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",lt="[0-9A-Fa-f]",Xs=r(r("%[EFef]"+lt+"%"+lt+lt+"%"+lt+lt)+"|"+r("%[89A-Fa-f]"+lt+"%"+lt+lt)+"|"+r("%"+lt+lt)),Vn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ka="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Zs=e(Ka,'[\\"\\\\]'),Pt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ei=new RegExp(Yr,"g"),nr=new RegExp(Xs,"g"),Wa=new RegExp(e("[^]",Vn,"[\\.]",'[\\"]',Zs),"g"),Ya=new RegExp(e("[^]",Yr,Pt),"g"),ti=Ya;function Un(m){var u=er(m);return u.match(ei)?u:m}var Ja={scheme:"mailto",parse:function(u,h){var E=u,w=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var q=!1,W={},ne=E.query.split("&"),fe=0,Me=ne.length;fe<Me;++fe){var te=ne[fe].split("=");switch(te[0]){case"to":for(var $e=te[1].split(","),Pe=0,be=$e.length;Pe<be;++Pe)w.push($e[Pe]);break;case"subject":E.subject=ct(te[1],h);break;case"body":E.body=ct(te[1],h);break;default:q=!0,W[ct(te[0],h)]=ct(te[1],h);break}}q&&(E.headers=W)}E.query=void 0;for(var ie=0,Ee=w.length;ie<Ee;++ie){var he=w[ie].split("@");if(he[0]=ct(he[0]),h.unicodeSupport)he[1]=ct(he[1],h).toLowerCase();else try{he[1]=Zt.toASCII(ct(he[1],h).toLowerCase())}catch(Ft){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ft}w[ie]=he.join("@")}return E},serialize:function(u,h){var E=u,w=s(u.to);if(w){for(var q=0,W=w.length;q<W;++q){var ne=String(w[q]),fe=ne.lastIndexOf("@"),Me=ne.slice(0,fe).replace(nr,Un).replace(nr,a).replace(Wa,ot),te=ne.slice(fe+1);try{te=h.iri?Zt.toUnicode(te):Zt.toASCII(ct(te,h).toLowerCase())}catch(ie){E.error=E.error||"Email address's domain name can not be converted to "+(h.iri?"Unicode":"ASCII")+" via punycode: "+ie}w[q]=Me+"@"+te}E.path=w.join(",")}var $e=u.headers=u.headers||{};u.subject&&($e.subject=u.subject),u.body&&($e.body=u.body);var Pe=[];for(var be in $e)$e[be]!==za[be]&&Pe.push(be.replace(nr,Un).replace(nr,a).replace(Ya,ot)+"="+$e[be].replace(nr,Un).replace(nr,a).replace(ti,ot));return Pe.length&&(E.query=Pe.join("&")),E}},ri=/^([^\:]+)\:(.*)/,Qa={scheme:"urn",parse:function(u,h){var E=u.path&&u.path.match(ri),w=u;if(E){var q=h.scheme||w.scheme||"urn",W=E[1].toLowerCase(),ne=E[2],fe=q+":"+(h.nid||W),Me=tt[fe];w.nid=W,w.nss=ne,w.path=void 0,Me&&(w=Me.parse(w,h))}else w.error=w.error||"URN can not be parsed.";return w},serialize:function(u,h){var E=h.scheme||u.scheme||"urn",w=u.nid,q=E+":"+(h.nid||w),W=tt[q];W&&(u=W.serialize(u,h));var ne=u,fe=u.nss;return ne.path=(w||h.nid)+":"+fe,ne}},ni=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Xa={scheme:"urn:uuid",parse:function(u,h){var E=u;return E.uuid=E.nss,E.nss=void 0,!h.tolerant&&(!E.uuid||!E.uuid.match(ni))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(u,h){var E=u;return E.nss=(u.uuid||"").toLowerCase(),E}};tt[tr.scheme]=tr,tt[xn.scheme]=xn,tt[rr.scheme]=rr,tt[Fn.scheme]=Fn,tt[Ja.scheme]=Ja,tt[Qa.scheme]=Qa,tt[Xa.scheme]=Xa,t.SCHEMES=tt,t.pctEncChar=ot,t.pctDecChars=er,t.parse=gt,t.removeDotSegments=Mt,t.serialize=rt,t.resolveComponents=Wr,t.resolve=Va,t.normalize=Ua,t.equal=Ha,t.escapeComponent=Ba,t.unescapeComponent=ct,Object.defineProperty(t,"__esModule",{value:!0})})});var au=x(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});var nu=ru();nu.code='require("ajv/dist/runtime/uri").default';go.default=nu});var fu=x(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.CodeGen=Ve.Name=Ve.nil=Ve.stringify=Ve.str=Ve._=Ve.KeywordCxt=void 0;var ih=Ea();Object.defineProperty(Ve,"KeywordCxt",{enumerable:!0,get:function(){return ih.KeywordCxt}});var Mn=ee();Object.defineProperty(Ve,"_",{enumerable:!0,get:function(){return Mn._}});Object.defineProperty(Ve,"str",{enumerable:!0,get:function(){return Mn.str}});Object.defineProperty(Ve,"stringify",{enumerable:!0,get:function(){return Mn.stringify}});Object.defineProperty(Ve,"nil",{enumerable:!0,get:function(){return Mn.nil}});Object.defineProperty(Ve,"Name",{enumerable:!0,get:function(){return Mn.Name}});Object.defineProperty(Ve,"CodeGen",{enumerable:!0,get:function(){return Mn.CodeGen}});var oh=Ps(),lu=Is(),ch=Ji(),Sa=Rs(),lh=ee(),wa=_a(),As=ya(),_o=de(),su=eu(),uh=au(),uu=(t,e)=>new RegExp(t,e);uu.code="new RegExp";var dh=["removeAdditional","useDefaults","coerceTypes"],fh=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),mh={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hh={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},iu=200;function ph(t){var e,r,n,a,s,i,l,f,g,y,$,b,S,M,T,N,A,z,V,ce,B,k,Q,K,re;let se=t.strict,Ie=(e=t.code)===null||e===void 0?void 0:e.optimize,Ce=Ie===!0||Ie===void 0?1:Ie||0,ke=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:uu,et=(a=t.uriResolver)!==null&&a!==void 0?a:uh.default;return{strictSchema:(i=(s=t.strictSchema)!==null&&s!==void 0?s:se)!==null&&i!==void 0?i:!0,strictNumbers:(f=(l=t.strictNumbers)!==null&&l!==void 0?l:se)!==null&&f!==void 0?f:!0,strictTypes:(y=(g=t.strictTypes)!==null&&g!==void 0?g:se)!==null&&y!==void 0?y:"log",strictTuples:(b=($=t.strictTuples)!==null&&$!==void 0?$:se)!==null&&b!==void 0?b:"log",strictRequired:(M=(S=t.strictRequired)!==null&&S!==void 0?S:se)!==null&&M!==void 0?M:!1,code:t.code?ut(De({},t.code),{optimize:Ce,regExp:ke}):{optimize:Ce,regExp:ke},loopRequired:(T=t.loopRequired)!==null&&T!==void 0?T:iu,loopEnum:(N=t.loopEnum)!==null&&N!==void 0?N:iu,meta:(A=t.meta)!==null&&A!==void 0?A:!0,messages:(z=t.messages)!==null&&z!==void 0?z:!0,inlineRefs:(V=t.inlineRefs)!==null&&V!==void 0?V:!0,schemaId:(ce=t.schemaId)!==null&&ce!==void 0?ce:"$id",addUsedSchema:(B=t.addUsedSchema)!==null&&B!==void 0?B:!0,validateSchema:(k=t.validateSchema)!==null&&k!==void 0?k:!0,validateFormats:(Q=t.validateFormats)!==null&&Q!==void 0?Q:!0,unicodeRegExp:(K=t.unicodeRegExp)!==null&&K!==void 0?K:!0,int32range:(re=t.int32range)!==null&&re!==void 0?re:!0,uriResolver:et}}var Ca=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=De(De({},e),ph(e));let{es5:r,lines:n}=this.opts.code;this.scope=new lh.ValueScope({scope:{},prefixes:fh,es5:r,lines:n}),this.logger=$h(e.logger);let a=e.validateFormats;e.validateFormats=!1,this.RULES=(0,ch.getRules)(),ou.call(this,mh,e,"NOT SUPPORTED"),ou.call(this,hh,e,"DEPRECATED","warn"),this._metaOpts=_h.call(this),e.formats&&gh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&yh.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),vh.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,a=su;n==="id"&&(a=De({},su),a.id=a.$id,delete a.$id),r&&e&&this.addMetaSchema(a,a[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let a=n(r);return"$async"in n||(this.errors=n.errors),a}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return a.call(this,e,r);async function a(y,$){await s.call(this,y.$schema);let b=this._addSchema(y,$);return b.validate||i.call(this,b)}async function s(y){y&&!this.getSchema(y)&&await a.call(this,{$ref:y},!0)}async function i(y){try{return this._compileSchemaEnv(y)}catch($){if(!($ instanceof lu.default))throw $;return l.call(this,$),await f.call(this,$.missingSchema),i.call(this,y)}}function l({missingSchema:y,missingRef:$}){if(this.refs[y])throw new Error(`AnySchema ${y} is loaded but ${$} cannot be resolved`)}async function f(y){let $=await g.call(this,y);this.refs[y]||await s.call(this,$.$schema),this.refs[y]||this.addSchema($,y,r)}async function g(y){let $=this._loading[y];if($)return $;try{return await(this._loading[y]=n(y))}finally{delete this._loading[y]}}}addSchema(e,r,n,a=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,n,a);return this}let s;if(typeof e=="object"){let{schemaId:i}=this.opts;if(s=e[i],s!==void 0&&typeof s!="string")throw new Error(`schema ${i} must be string`)}return r=(0,wa.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,a,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let a=this.validate(n,e);if(!a&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return a}getSchema(e){let r;for(;typeof(r=cu.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,a=new Sa.SchemaEnv({schema:{},schemaId:n});if(r=Sa.resolveSchema.call(this,a,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=cu.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,wa.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Sh.call(this,n,r),!r)return(0,_o.eachItem)(n,s=>yo.call(this,s)),this;Ch.call(this,r);let a=ut(De({},r),{type:(0,As.getJSONTypes)(r.type),schemaType:(0,As.getJSONTypes)(r.schemaType)});return(0,_o.eachItem)(n,a.type.length===0?s=>yo.call(this,s,a):s=>a.type.forEach(i=>yo.call(this,s,a,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let a=n.rules.findIndex(s=>s.keyword===e);a>=0&&n.rules.splice(a,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(a=>`${n}${a.instancePath} ${a.message}`).reduce((a,s)=>a+r+s)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let a of r){let s=a.split("/").slice(1),i=e;for(let l of s)i=i[l];for(let l in n){let f=n[l];if(typeof f!="object")continue;let{$data:g}=f.definition,y=i[l];g&&y&&(i[l]=du(y))}}return e}_removeAllSchemas(e,r){for(let n in e){let a=e[n];(!r||r.test(n))&&(typeof a=="string"?delete e[n]:a&&!a.meta&&(this._cache.delete(a.schema),delete e[n]))}}_addSchema(e,r,n,a=this.opts.validateSchema,s=this.opts.addUsedSchema){let i,{schemaId:l}=this.opts;if(typeof e=="object")i=e[l];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let f=this._cache.get(e);if(f!==void 0)return f;n=(0,wa.normalizeId)(i||n);let g=wa.getSchemaRefs.call(this,e,n);return f=new Sa.SchemaEnv({schema:e,schemaId:l,meta:r,baseId:n,localRefs:g}),this._cache.set(f.schema,f),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=f),a&&this.validateSchema(e,!0),f}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Sa.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Sa.compileSchema.call(this,e)}finally{this.opts=r}}};Ve.default=Ca;Ca.ValidationError=oh.default;Ca.MissingRefError=lu.default;function ou(t,e,r,n="error"){for(let a in t){let s=a;s in e&&this.logger[n](`${r}: option ${a}. ${t[s]}`)}}function cu(t){return t=(0,wa.normalizeId)(t),this.schemas[t]||this.refs[t]}function vh(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function gh(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function yh(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function _h(){let t=De({},this.opts);for(let e of dh)delete t[e];return t}var bh={log(){},warn(){},error(){}};function $h(t){if(t===!1)return bh;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Eh=/^[a-z_$][a-z0-9_$:-]*$/i;function Sh(t,e){let{RULES:r}=this;if((0,_o.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Eh.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function yo(t,e,r){var n;let a=e==null?void 0:e.post;if(r&&a)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,i=a?s.post:s.rules.find(({type:f})=>f===r);if(i||(i={type:r,rules:[]},s.rules.push(i)),s.keywords[t]=!0,!e)return;let l={keyword:t,definition:ut(De({},e),{type:(0,As.getJSONTypes)(e.type),schemaType:(0,As.getJSONTypes)(e.schemaType)})};e.before?wh.call(this,i,l,e.before):i.rules.push(l),s.all[t]=l,(n=e.implements)===null||n===void 0||n.forEach(f=>this.addKeyword(f))}function wh(t,e,r){let n=t.rules.findIndex(a=>a.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Ch(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=du(e)),t.validateSchema=this.compile(e,!0))}var Th={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function du(t){return{anyOf:[t,Th]}}});var mu=x(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var Mh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};bo.default=Mh});var gu=x(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.callRef=Hr.getValidate=void 0;var Ph=Is(),hu=mt(),it=ee(),Pn=Jt(),pu=Rs(),Os=de(),Ih={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:a,schemaEnv:s,validateName:i,opts:l,self:f}=n,{root:g}=s;if((r==="#"||r==="#/")&&a===g.baseId)return $();let y=pu.resolveRef.call(f,g,a,r);if(y===void 0)throw new Ph.default(n.opts.uriResolver,a,r);if(y instanceof pu.SchemaEnv)return b(y);return S(y);function $(){if(s===g)return ks(t,i,s,s.$async);let M=e.scopeValue("root",{ref:g});return ks(t,(0,it._)`${M}.validate`,g,g.$async)}function b(M){let T=vu(t,M);ks(t,T,M,M.$async)}function S(M){let T=e.scopeValue("schema",l.code.source===!0?{ref:M,code:(0,it.stringify)(M)}:{ref:M}),N=e.name("valid"),A=t.subschema({schema:M,dataTypes:[],schemaPath:it.nil,topSchemaRef:T,errSchemaPath:r},N);t.mergeEvaluated(A),t.ok(N)}}};function vu(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,it._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Hr.getValidate=vu;function ks(t,e,r,n){let{gen:a,it:s}=t,{allErrors:i,schemaEnv:l,opts:f}=s,g=f.passContext?Pn.default.this:it.nil;n?y():$();function y(){if(!l.$async)throw new Error("async schema referenced by sync schema");let M=a.let("valid");a.try(()=>{a.code((0,it._)`await ${(0,hu.callValidateCode)(t,e,g)}`),S(e),i||a.assign(M,!0)},T=>{a.if((0,it._)`!(${T} instanceof ${s.ValidationError})`,()=>a.throw(T)),b(T),i||a.assign(M,!1)}),t.ok(M)}function $(){t.result((0,hu.callValidateCode)(t,e,g),()=>S(e),()=>b(e))}function b(M){let T=(0,it._)`${M}.errors`;a.assign(Pn.default.vErrors,(0,it._)`${Pn.default.vErrors} === null ? ${T} : ${Pn.default.vErrors}.concat(${T})`),a.assign(Pn.default.errors,(0,it._)`${Pn.default.vErrors}.length`)}function S(M){var T;if(!s.opts.unevaluated)return;let N=(T=r==null?void 0:r.validate)===null||T===void 0?void 0:T.evaluated;if(s.props!==!0)if(N&&!N.dynamicProps)N.props!==void 0&&(s.props=Os.mergeEvaluated.props(a,N.props,s.props));else{let A=a.var("props",(0,it._)`${M}.evaluated.props`);s.props=Os.mergeEvaluated.props(a,A,s.props,it.Name)}if(s.items!==!0)if(N&&!N.dynamicItems)N.items!==void 0&&(s.items=Os.mergeEvaluated.items(a,N.items,s.items));else{let A=a.var("items",(0,it._)`${M}.evaluated.items`);s.items=Os.mergeEvaluated.items(a,A,s.items,it.Name)}}}Hr.callRef=ks;Hr.default=Ih});var yu=x($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});var Dh=mu(),Rh=gu(),Nh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Dh.default,Rh.default];$o.default=Nh});var _u=x(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});var qs=ee(),_r=qs.operators,Ls={maximum:{okStr:"<=",ok:_r.LTE,fail:_r.GT},minimum:{okStr:">=",ok:_r.GTE,fail:_r.LT},exclusiveMaximum:{okStr:"<",ok:_r.LT,fail:_r.GTE},exclusiveMinimum:{okStr:">",ok:_r.GT,fail:_r.LTE}},Ah={message:({keyword:t,schemaCode:e})=>(0,qs.str)`must be ${Ls[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,qs._)`{comparison: ${Ls[t].okStr}, limit: ${e}}`},Oh={keyword:Object.keys(Ls),type:"number",schemaType:"number",$data:!0,error:Ah,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,qs._)`${r} ${Ls[e].fail} ${n} || isNaN(${r})`)}};Eo.default=Oh});var bu=x(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var Ta=ee(),kh={message:({schemaCode:t})=>(0,Ta.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ta._)`{multipleOf: ${t}}`},qh={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:kh,code(t){let{gen:e,data:r,schemaCode:n,it:a}=t,s=a.opts.multipleOfPrecision,i=e.let("res"),l=s?(0,Ta._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${s}`:(0,Ta._)`${i} !== parseInt(${i})`;t.fail$data((0,Ta._)`(${n} === 0 || (${i} = ${r}/${n}, ${l}))`)}};So.default=qh});var Eu=x(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});function $u(t){let e=t.length,r=0,n=0,a;for(;n<e;)r++,a=t.charCodeAt(n++),a>=55296&&a<=56319&&n<e&&(a=t.charCodeAt(n),(a&64512)===56320&&n++);return r}wo.default=$u;$u.code='require("ajv/dist/runtime/ucs2length").default'});var Su=x(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var Br=ee(),Lh=de(),xh=Eu(),jh={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Br.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Br._)`{limit: ${t}}`},Fh={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:jh,code(t){let{keyword:e,data:r,schemaCode:n,it:a}=t,s=e==="maxLength"?Br.operators.GT:Br.operators.LT,i=a.opts.unicode===!1?(0,Br._)`${r}.length`:(0,Br._)`${(0,Lh.useFunc)(t.gen,xh.default)}(${r})`;t.fail$data((0,Br._)`${i} ${s} ${n}`)}};Co.default=Fh});var wu=x(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var Vh=mt(),xs=ee(),Uh={message:({schemaCode:t})=>(0,xs.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,xs._)`{pattern: ${t}}`},Hh={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Uh,code(t){let{data:e,$data:r,schema:n,schemaCode:a,it:s}=t,i=s.opts.unicodeRegExp?"u":"",l=r?(0,xs._)`(new RegExp(${a}, ${i}))`:(0,Vh.usePattern)(t,n);t.fail$data((0,xs._)`!${l}.test(${e})`)}};To.default=Hh});var Cu=x(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var Ma=ee(),Bh={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Ma.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Ma._)`{limit: ${t}}`},zh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Bh,code(t){let{keyword:e,data:r,schemaCode:n}=t,a=e==="maxProperties"?Ma.operators.GT:Ma.operators.LT;t.fail$data((0,Ma._)`Object.keys(${r}).length ${a} ${n}`)}};Mo.default=zh});var Tu=x(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});var Pa=mt(),Ia=ee(),Gh=de(),Kh={message:({params:{missingProperty:t}})=>(0,Ia.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Ia._)`{missingProperty: ${t}}`},Wh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Kh,code(t){let{gen:e,schema:r,schemaCode:n,data:a,$data:s,it:i}=t,{opts:l}=i;if(!s&&r.length===0)return;let f=r.length>=l.loopRequired;if(i.allErrors?g():y(),l.strictRequired){let S=t.parentSchema.properties,{definedProperties:M}=t.it;for(let T of r)if((S==null?void 0:S[T])===void 0&&!M.has(T)){let N=i.schemaEnv.baseId+i.errSchemaPath,A=`required property "${T}" is not defined at "${N}" (strictRequired)`;(0,Gh.checkStrictMode)(i,A,i.opts.strictRequired)}}function g(){if(f||s)t.block$data(Ia.nil,$);else for(let S of r)(0,Pa.checkReportMissingProp)(t,S)}function y(){let S=e.let("missing");if(f||s){let M=e.let("valid",!0);t.block$data(M,()=>b(S,M)),t.ok(M)}else e.if((0,Pa.checkMissingProp)(t,r,S)),(0,Pa.reportMissingProp)(t,S),e.else()}function $(){e.forOf("prop",n,S=>{t.setParams({missingProperty:S}),e.if((0,Pa.noPropertyInData)(e,a,S,l.ownProperties),()=>t.error())})}function b(S,M){t.setParams({missingProperty:S}),e.forOf(S,n,()=>{e.assign(M,(0,Pa.propertyInData)(e,a,S,l.ownProperties)),e.if((0,Ia.not)(M),()=>{t.error(),e.break()})},Ia.nil)}}};Po.default=Wh});var Mu=x(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var Da=ee(),Yh={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Da.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Da._)`{limit: ${t}}`},Jh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Yh,code(t){let{keyword:e,data:r,schemaCode:n}=t,a=e==="maxItems"?Da.operators.GT:Da.operators.LT;t.fail$data((0,Da._)`${r}.length ${a} ${n}`)}};Io.default=Jh});var js=x(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});var Pu=ao();Pu.code='require("ajv/dist/runtime/equal").default';Do.default=Pu});var Iu=x(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var Ro=ya(),Ue=ee(),Qh=de(),Xh=js(),Zh={message:({params:{i:t,j:e}})=>(0,Ue.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Ue._)`{i: ${t}, j: ${e}}`},ep={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Zh,code(t){let{gen:e,data:r,$data:n,schema:a,parentSchema:s,schemaCode:i,it:l}=t;if(!n&&!a)return;let f=e.let("valid"),g=s.items?(0,Ro.getSchemaTypes)(s.items):[];t.block$data(f,y,(0,Ue._)`${i} === false`),t.ok(f);function y(){let M=e.let("i",(0,Ue._)`${r}.length`),T=e.let("j");t.setParams({i:M,j:T}),e.assign(f,!0),e.if((0,Ue._)`${M} > 1`,()=>($()?b:S)(M,T))}function $(){return g.length>0&&!g.some(M=>M==="object"||M==="array")}function b(M,T){let N=e.name("item"),A=(0,Ro.checkDataTypes)(g,N,l.opts.strictNumbers,Ro.DataType.Wrong),z=e.const("indices",(0,Ue._)`{}`);e.for((0,Ue._)`;${M}--;`,()=>{e.let(N,(0,Ue._)`${r}[${M}]`),e.if(A,(0,Ue._)`continue`),g.length>1&&e.if((0,Ue._)`typeof ${N} == "string"`,(0,Ue._)`${N} += "_"`),e.if((0,Ue._)`typeof ${z}[${N}] == "number"`,()=>{e.assign(T,(0,Ue._)`${z}[${N}]`),t.error(),e.assign(f,!1).break()}).code((0,Ue._)`${z}[${N}] = ${M}`)})}function S(M,T){let N=(0,Qh.useFunc)(e,Xh.default),A=e.name("outer");e.label(A).for((0,Ue._)`;${M}--;`,()=>e.for((0,Ue._)`${T} = ${M}; ${T}--;`,()=>e.if((0,Ue._)`${N}(${r}[${M}], ${r}[${T}])`,()=>{t.error(),e.assign(f,!1).break(A)})))}}};No.default=ep});var Du=x(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});var Ao=ee(),tp=de(),rp=js(),np={message:"must be equal to constant",params:({schemaCode:t})=>(0,Ao._)`{allowedValue: ${t}}`},ap={keyword:"const",$data:!0,error:np,code(t){let{gen:e,data:r,$data:n,schemaCode:a,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,Ao._)`!${(0,tp.useFunc)(e,rp.default)}(${r}, ${a})`):t.fail((0,Ao._)`${s} !== ${r}`)}};Oo.default=ap});var Ru=x(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var Ra=ee(),sp=de(),ip=js(),op={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ra._)`{allowedValues: ${t}}`},cp={keyword:"enum",schemaType:"array",$data:!0,error:op,code(t){let{gen:e,data:r,$data:n,schema:a,schemaCode:s,it:i}=t;if(!n&&a.length===0)throw new Error("enum must have non-empty array");let l=a.length>=i.opts.loopEnum,f,g=()=>f!=null?f:f=(0,sp.useFunc)(e,ip.default),y;if(l||n)y=e.let("valid"),t.block$data(y,$);else{if(!Array.isArray(a))throw new Error("ajv implementation error");let S=e.const("vSchema",s);y=(0,Ra.or)(...a.map((M,T)=>b(S,T)))}t.pass(y);function $(){e.assign(y,!1),e.forOf("v",s,S=>e.if((0,Ra._)`${g()}(${r}, ${S})`,()=>e.assign(y,!0).break()))}function b(S,M){let T=a[M];return typeof T=="object"&&T!==null?(0,Ra._)`${g()}(${r}, ${S}[${M}])`:(0,Ra._)`${r} === ${T}`}}};ko.default=cp});var Nu=x(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var lp=_u(),up=bu(),dp=Su(),fp=wu(),mp=Cu(),hp=Tu(),pp=Mu(),vp=Iu(),gp=Du(),yp=Ru(),_p=[lp.default,up.default,dp.default,fp.default,mp.default,hp.default,pp.default,vp.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},gp.default,yp.default];qo.default=_p});var xo=x(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.validateAdditionalItems=void 0;var zr=ee(),Lo=de(),bp={message:({params:{len:t}})=>(0,zr.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,zr._)`{limit: ${t}}`},$p={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:bp,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Lo.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Au(t,n)}};function Au(t,e){let{gen:r,schema:n,data:a,keyword:s,it:i}=t;i.items=!0;let l=r.const("len",(0,zr._)`${a}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,zr._)`${l} <= ${e.length}`);else if(typeof n=="object"&&!(0,Lo.alwaysValidSchema)(i,n)){let g=r.var("valid",(0,zr._)`${l} <= ${e.length}`);r.if((0,zr.not)(g),()=>f(g)),t.ok(g)}function f(g){r.forRange("i",e.length,l,y=>{t.subschema({keyword:s,dataProp:y,dataPropType:Lo.Type.Num},g),i.allErrors||r.if((0,zr.not)(g),()=>r.break())})}}Na.validateAdditionalItems=Au;Na.default=$p});var jo=x(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.validateTuple=void 0;var Ou=ee(),Fs=de(),Ep=mt(),Sp={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return ku(t,"additionalItems",e);r.items=!0,!(0,Fs.alwaysValidSchema)(r,e)&&t.ok((0,Ep.validateArray)(t))}};function ku(t,e,r=t.schema){let{gen:n,parentSchema:a,data:s,keyword:i,it:l}=t;y(a),l.opts.unevaluated&&r.length&&l.items!==!0&&(l.items=Fs.mergeEvaluated.items(n,r.length,l.items));let f=n.name("valid"),g=n.const("len",(0,Ou._)`${s}.length`);r.forEach(($,b)=>{(0,Fs.alwaysValidSchema)(l,$)||(n.if((0,Ou._)`${g} > ${b}`,()=>t.subschema({keyword:i,schemaProp:b,dataProp:b},f)),t.ok(f))});function y($){let{opts:b,errSchemaPath:S}=l,M=r.length,T=M===$.minItems&&(M===$.maxItems||$[e]===!1);if(b.strictTuples&&!T){let N=`"${i}" is ${M}-tuple, but minItems or maxItems/${e} are not specified or different at path "${S}"`;(0,Fs.checkStrictMode)(l,N,b.strictTuples)}}}Aa.validateTuple=ku;Aa.default=Sp});var qu=x(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var wp=jo(),Cp={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,wp.validateTuple)(t,"items")};Fo.default=Cp});var xu=x(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Lu=ee(),Tp=de(),Mp=mt(),Pp=xo(),Ip={message:({params:{len:t}})=>(0,Lu.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Lu._)`{limit: ${t}}`},Dp={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ip,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:a}=r;n.items=!0,!(0,Tp.alwaysValidSchema)(n,e)&&(a?(0,Pp.validateAdditionalItems)(t,a):t.ok((0,Mp.validateArray)(t)))}};Vo.default=Dp});var ju=x(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});var pt=ee(),Vs=de(),Rp={message:({params:{min:t,max:e}})=>e===void 0?(0,pt.str)`must contain at least ${t} valid item(s)`:(0,pt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,pt._)`{minContains: ${t}}`:(0,pt._)`{minContains: ${t}, maxContains: ${e}}`},Np={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Rp,code(t){let{gen:e,schema:r,parentSchema:n,data:a,it:s}=t,i,l,{minContains:f,maxContains:g}=n;s.opts.next?(i=f===void 0?1:f,l=g):i=1;let y=e.const("len",(0,pt._)`${a}.length`);if(t.setParams({min:i,max:l}),l===void 0&&i===0){(0,Vs.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&i>l){(0,Vs.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Vs.alwaysValidSchema)(s,r)){let T=(0,pt._)`${y} >= ${i}`;l!==void 0&&(T=(0,pt._)`${T} && ${y} <= ${l}`),t.pass(T);return}s.items=!0;let $=e.name("valid");l===void 0&&i===1?S($,()=>e.if($,()=>e.break())):i===0?(e.let($,!0),l!==void 0&&e.if((0,pt._)`${a}.length > 0`,b)):(e.let($,!1),b()),t.result($,()=>t.reset());function b(){let T=e.name("_valid"),N=e.let("count",0);S(T,()=>e.if(T,()=>M(N)))}function S(T,N){e.forRange("i",0,y,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:Vs.Type.Num,compositeRule:!0},T),N()})}function M(T){e.code((0,pt._)`${T}++`),l===void 0?e.if((0,pt._)`${T} >= ${i}`,()=>e.assign($,!0).break()):(e.if((0,pt._)`${T} > ${l}`,()=>e.assign($,!1).break()),i===1?e.assign($,!0):e.if((0,pt._)`${T} >= ${i}`,()=>e.assign($,!0)))}}};Uo.default=Np});var Uu=x(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.validateSchemaDeps=xt.validatePropertyDeps=xt.error=void 0;var Ho=ee(),Ap=de(),Oa=mt();xt.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,Ho.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,Ho._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Op={keyword:"dependencies",type:"object",schemaType:"object",error:xt.error,code(t){let[e,r]=kp(t);Fu(t,e),Vu(t,r)}};function kp({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let a=Array.isArray(t[n])?e:r;a[n]=t[n]}return[e,r]}function Fu(t,e=t.schema){let{gen:r,data:n,it:a}=t;if(Object.keys(e).length===0)return;let s=r.let("missing");for(let i in e){let l=e[i];if(l.length===0)continue;let f=(0,Oa.propertyInData)(r,n,i,a.opts.ownProperties);t.setParams({property:i,depsCount:l.length,deps:l.join(", ")}),a.allErrors?r.if(f,()=>{for(let g of l)(0,Oa.checkReportMissingProp)(t,g)}):(r.if((0,Ho._)`${f} && (${(0,Oa.checkMissingProp)(t,l,s)})`),(0,Oa.reportMissingProp)(t,s),r.else())}}xt.validatePropertyDeps=Fu;function Vu(t,e=t.schema){let{gen:r,data:n,keyword:a,it:s}=t,i=r.name("valid");for(let l in e)(0,Ap.alwaysValidSchema)(s,e[l])||(r.if((0,Oa.propertyInData)(r,n,l,s.opts.ownProperties),()=>{let f=t.subschema({keyword:a,schemaProp:l},i);t.mergeValidEvaluated(f,i)},()=>r.var(i,!0)),t.ok(i))}xt.validateSchemaDeps=Vu;xt.default=Op});var Bu=x(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var Hu=ee(),qp=de(),Lp={message:"property name must be valid",params:({params:t})=>(0,Hu._)`{propertyName: ${t.propertyName}}`},xp={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Lp,code(t){let{gen:e,schema:r,data:n,it:a}=t;if((0,qp.alwaysValidSchema)(a,r))return;let s=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},s),e.if((0,Hu.not)(s),()=>{t.error(!0),a.allErrors||e.break()})}),t.ok(s)}};Bo.default=xp});var Go=x(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var Us=mt(),Tt=ee(),jp=Jt(),Hs=de(),Fp={message:"must NOT have additional properties",params:({params:t})=>(0,Tt._)`{additionalProperty: ${t.additionalProperty}}`},Vp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Fp,code(t){let{gen:e,schema:r,parentSchema:n,data:a,errsCount:s,it:i}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:l,opts:f}=i;if(i.props=!0,f.removeAdditional!=="all"&&(0,Hs.alwaysValidSchema)(i,r))return;let g=(0,Us.allSchemaProperties)(n.properties),y=(0,Us.allSchemaProperties)(n.patternProperties);$(),t.ok((0,Tt._)`${s} === ${jp.default.errors}`);function $(){e.forIn("key",a,N=>{!g.length&&!y.length?M(N):e.if(b(N),()=>M(N))})}function b(N){let A;if(g.length>8){let z=(0,Hs.schemaRefOrVal)(i,n.properties,"properties");A=(0,Us.isOwnProperty)(e,z,N)}else g.length?A=(0,Tt.or)(...g.map(z=>(0,Tt._)`${N} === ${z}`)):A=Tt.nil;return y.length&&(A=(0,Tt.or)(A,...y.map(z=>(0,Tt._)`${(0,Us.usePattern)(t,z)}.test(${N})`))),(0,Tt.not)(A)}function S(N){e.code((0,Tt._)`delete ${a}[${N}]`)}function M(N){if(f.removeAdditional==="all"||f.removeAdditional&&r===!1){S(N);return}if(r===!1){t.setParams({additionalProperty:N}),t.error(),l||e.break();return}if(typeof r=="object"&&!(0,Hs.alwaysValidSchema)(i,r)){let A=e.name("valid");f.removeAdditional==="failing"?(T(N,A,!1),e.if((0,Tt.not)(A),()=>{t.reset(),S(N)})):(T(N,A),l||e.if((0,Tt.not)(A),()=>e.break()))}}function T(N,A,z){let V={keyword:"additionalProperties",dataProp:N,dataPropType:Hs.Type.Str};z===!1&&Object.assign(V,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(V,A)}}};zo.default=Vp});var Ku=x(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var Up=Ea(),zu=mt(),Ko=de(),Gu=Go(),Hp={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:a,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Gu.default.code(new Up.KeywordCxt(s,Gu.default,"additionalProperties"));let i=(0,zu.allSchemaProperties)(r);for(let $ of i)s.definedProperties.add($);s.opts.unevaluated&&i.length&&s.props!==!0&&(s.props=Ko.mergeEvaluated.props(e,(0,Ko.toHash)(i),s.props));let l=i.filter($=>!(0,Ko.alwaysValidSchema)(s,r[$]));if(l.length===0)return;let f=e.name("valid");for(let $ of l)g($)?y($):(e.if((0,zu.propertyInData)(e,a,$,s.opts.ownProperties)),y($),s.allErrors||e.else().var(f,!0),e.endIf()),t.it.definedProperties.add($),t.ok(f);function g($){return s.opts.useDefaults&&!s.compositeRule&&r[$].default!==void 0}function y($){t.subschema({keyword:"properties",schemaProp:$,dataProp:$},f)}}};Wo.default=Hp});var Qu=x(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Wu=mt(),Bs=ee(),Yu=de(),Ju=de(),Bp={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:a,it:s}=t,{opts:i}=s,l=(0,Wu.allSchemaProperties)(r),f=l.filter(T=>(0,Yu.alwaysValidSchema)(s,r[T]));if(l.length===0||f.length===l.length&&(!s.opts.unevaluated||s.props===!0))return;let g=i.strictSchema&&!i.allowMatchingProperties&&a.properties,y=e.name("valid");s.props!==!0&&!(s.props instanceof Bs.Name)&&(s.props=(0,Ju.evaluatedPropsToName)(e,s.props));let{props:$}=s;b();function b(){for(let T of l)g&&S(T),s.allErrors?M(T):(e.var(y,!0),M(T),e.if(y))}function S(T){for(let N in g)new RegExp(T).test(N)&&(0,Yu.checkStrictMode)(s,`property ${N} matches pattern ${T} (use allowMatchingProperties)`)}function M(T){e.forIn("key",n,N=>{e.if((0,Bs._)`${(0,Wu.usePattern)(t,T)}.test(${N})`,()=>{let A=f.includes(T);A||t.subschema({keyword:"patternProperties",schemaProp:T,dataProp:N,dataPropType:Ju.Type.Str},y),s.opts.unevaluated&&$!==!0?e.assign((0,Bs._)`${$}[${N}]`,!0):!A&&!s.allErrors&&e.if((0,Bs.not)(y),()=>e.break())})})}}};Yo.default=Bp});var Xu=x(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var zp=de(),Gp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,zp.alwaysValidSchema)(n,r)){t.fail();return}let a=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),t.failResult(a,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Jo.default=Gp});var Zu=x(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Kp=mt(),Wp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Kp.validateUnion,error:{message:"must match a schema in anyOf"}};Qo.default=Wp});var ed=x(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var zs=ee(),Yp=de(),Jp={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,zs._)`{passingSchemas: ${t.passing}}`},Qp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Jp,code(t){let{gen:e,schema:r,parentSchema:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;let s=r,i=e.let("valid",!1),l=e.let("passing",null),f=e.name("_valid");t.setParams({passing:l}),e.block(g),t.result(i,()=>t.reset(),()=>t.error(!0));function g(){s.forEach((y,$)=>{let b;(0,Yp.alwaysValidSchema)(a,y)?e.var(f,!0):b=t.subschema({keyword:"oneOf",schemaProp:$,compositeRule:!0},f),$>0&&e.if((0,zs._)`${f} && ${i}`).assign(i,!1).assign(l,(0,zs._)`[${l}, ${$}]`).else(),e.if(f,()=>{e.assign(i,!0),e.assign(l,$),b&&t.mergeEvaluated(b,zs.Name)})})}}};Xo.default=Qp});var td=x(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});var Xp=de(),Zp={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let a=e.name("valid");r.forEach((s,i)=>{if((0,Xp.alwaysValidSchema)(n,s))return;let l=t.subschema({keyword:"allOf",schemaProp:i},a);t.ok(a),t.mergeEvaluated(l)})}};Zo.default=Zp});var ad=x(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var Gs=ee(),nd=de(),ev={message:({params:t})=>(0,Gs.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Gs._)`{failingKeyword: ${t.ifClause}}`},tv={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ev,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,nd.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let a=rd(n,"then"),s=rd(n,"else");if(!a&&!s)return;let i=e.let("valid",!0),l=e.name("_valid");if(f(),t.reset(),a&&s){let y=e.let("ifClause");t.setParams({ifClause:y}),e.if(l,g("then",y),g("else",y))}else a?e.if(l,g("then")):e.if((0,Gs.not)(l),g("else"));t.pass(i,()=>t.error(!0));function f(){let y=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);t.mergeEvaluated(y)}function g(y,$){return()=>{let b=t.subschema({keyword:y},l);e.assign(i,l),t.mergeValidEvaluated(b,i),$?e.assign($,(0,Gs._)`${y}`):t.setParams({ifClause:y})}}}};function rd(t,e){let r=t.schema[e];return r!==void 0&&!(0,nd.alwaysValidSchema)(t,r)}ec.default=tv});var sd=x(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var rv=de(),nv={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,rv.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};tc.default=nv});var id=x(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var av=xo(),sv=qu(),iv=jo(),ov=xu(),cv=ju(),lv=Uu(),uv=Bu(),dv=Go(),fv=Ku(),mv=Qu(),hv=Xu(),pv=Zu(),vv=ed(),gv=td(),yv=ad(),_v=sd();function bv(t=!1){let e=[hv.default,pv.default,vv.default,gv.default,yv.default,_v.default,uv.default,dv.default,lv.default,fv.default,mv.default];return t?e.push(sv.default,ov.default):e.push(av.default,iv.default),e.push(cv.default),e}rc.default=bv});var od=x(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var Re=ee(),$v={message:({schemaCode:t})=>(0,Re.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Re._)`{format: ${t}}`},Ev={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:$v,code(t,e){let{gen:r,data:n,$data:a,schema:s,schemaCode:i,it:l}=t,{opts:f,errSchemaPath:g,schemaEnv:y,self:$}=l;if(!f.validateFormats)return;a?b():S();function b(){let M=r.scopeValue("formats",{ref:$.formats,code:f.code.formats}),T=r.const("fDef",(0,Re._)`${M}[${i}]`),N=r.let("fType"),A=r.let("format");r.if((0,Re._)`typeof ${T} == "object" && !(${T} instanceof RegExp)`,()=>r.assign(N,(0,Re._)`${T}.type || "string"`).assign(A,(0,Re._)`${T}.validate`),()=>r.assign(N,(0,Re._)`"string"`).assign(A,T)),t.fail$data((0,Re.or)(z(),V()));function z(){return f.strictSchema===!1?Re.nil:(0,Re._)`${i} && !${A}`}function V(){let ce=y.$async?(0,Re._)`(${T}.async ? await ${A}(${n}) : ${A}(${n}))`:(0,Re._)`${A}(${n})`,B=(0,Re._)`(typeof ${A} == "function" ? ${ce} : ${A}.test(${n}))`;return(0,Re._)`${A} && ${A} !== true && ${N} === ${e} && !${B}`}}function S(){let M=$.formats[s];if(!M){z();return}if(M===!0)return;let[T,N,A]=V(M);T===e&&t.pass(ce());function z(){if(f.strictSchema===!1){$.logger.warn(B());return}throw new Error(B());function B(){return`unknown format "${s}" ignored in schema at path "${g}"`}}function V(B){let k=B instanceof RegExp?(0,Re.regexpCode)(B):f.code.formats?(0,Re._)`${f.code.formats}${(0,Re.getProperty)(s)}`:void 0,Q=r.scopeValue("formats",{key:s,ref:B,code:k});return typeof B=="object"&&!(B instanceof RegExp)?[B.type||"string",B.validate,(0,Re._)`${Q}.validate`]:["string",B,Q]}function ce(){if(typeof M=="object"&&!(M instanceof RegExp)&&M.async){if(!y.$async)throw new Error("async format in sync schema");return(0,Re._)`await ${A}(${n})`}return typeof N=="function"?(0,Re._)`${A}(${n})`:(0,Re._)`${A}.test(${n})`}}}};nc.default=Ev});var cd=x(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var Sv=od(),wv=[Sv.default];ac.default=wv});var ld=x(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.contentVocabulary=In.metadataVocabulary=void 0;In.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];In.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var dd=x(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var Cv=yu(),Tv=Nu(),Mv=id(),Pv=cd(),ud=ld(),Iv=[Cv.default,Tv.default,(0,Mv.default)(),Pv.default,ud.metadataVocabulary,ud.contentVocabulary];sc.default=Iv});var fd=x(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.DiscrError=void 0;var Dv;(function(t){t.Tag="tag",t.Mapping="mapping"})(Dv=ka.DiscrError||(ka.DiscrError={}))});var hd=x(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var Dn=ee(),ic=fd(),md=Rs(),Rv=de(),Nv={message:({params:{discrError:t,tagName:e}})=>t===ic.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Dn._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Av={keyword:"discriminator",type:"object",schemaType:"object",error:Nv,code(t){let{gen:e,data:r,schema:n,parentSchema:a,it:s}=t,{oneOf:i}=a;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let l=n.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let f=e.let("valid",!1),g=e.const("tag",(0,Dn._)`${r}${(0,Dn.getProperty)(l)}`);e.if((0,Dn._)`typeof ${g} == "string"`,()=>y(),()=>t.error(!1,{discrError:ic.DiscrError.Tag,tag:g,tagName:l})),t.ok(f);function y(){let S=b();e.if(!1);for(let M in S)e.elseIf((0,Dn._)`${g} === ${M}`),e.assign(f,$(S[M]));e.else(),t.error(!1,{discrError:ic.DiscrError.Mapping,tag:g,tagName:l}),e.endIf()}function $(S){let M=e.name("valid"),T=t.subschema({keyword:"oneOf",schemaProp:S},M);return t.mergeEvaluated(T,Dn.Name),M}function b(){var S;let M={},T=A(a),N=!0;for(let ce=0;ce<i.length;ce++){let B=i[ce];(B==null?void 0:B.$ref)&&!(0,Rv.schemaHasRulesButRef)(B,s.self.RULES)&&(B=md.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,B==null?void 0:B.$ref),B instanceof md.SchemaEnv&&(B=B.schema));let k=(S=B==null?void 0:B.properties)===null||S===void 0?void 0:S[l];if(typeof k!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);N=N&&(T||A(B)),z(k,ce)}if(!N)throw new Error(`discriminator: "${l}" must be required`);return M;function A({required:ce}){return Array.isArray(ce)&&ce.includes(l)}function z(ce,B){if(ce.const)V(ce.const,B);else if(ce.enum)for(let k of ce.enum)V(k,B);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function V(ce,B){if(typeof ce!="string"||ce in M)throw new Error(`discriminator: "${l}" values must be unique strings`);M[ce]=B}}}};oc.default=Av});var pd=x((V_,Ov)=>{Ov.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var yd=x((Te,gd)=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.MissingRefError=Te.ValidationError=Te.CodeGen=Te.Name=Te.nil=Te.stringify=Te.str=Te._=Te.KeywordCxt=void 0;var kv=fu(),qv=dd(),Lv=hd(),vd=pd(),xv=["/properties"],Ks="http://json-schema.org/draft-07/schema",Ws=class extends kv.default{_addVocabularies(){super._addVocabularies(),qv.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Lv.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(vd,xv):vd;this.addMetaSchema(e,Ks,!1),this.refs["http://json-schema.org/schema"]=Ks}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ks)?Ks:void 0)}};gd.exports=Te=Ws;Object.defineProperty(Te,"__esModule",{value:!0});Te.default=Ws;var jv=Ea();Object.defineProperty(Te,"KeywordCxt",{enumerable:!0,get:function(){return jv.KeywordCxt}});var Rn=ee();Object.defineProperty(Te,"_",{enumerable:!0,get:function(){return Rn._}});Object.defineProperty(Te,"str",{enumerable:!0,get:function(){return Rn.str}});Object.defineProperty(Te,"stringify",{enumerable:!0,get:function(){return Rn.stringify}});Object.defineProperty(Te,"nil",{enumerable:!0,get:function(){return Rn.nil}});Object.defineProperty(Te,"Name",{enumerable:!0,get:function(){return Rn.Name}});Object.defineProperty(Te,"CodeGen",{enumerable:!0,get:function(){return Rn.CodeGen}});var Fv=Ps();Object.defineProperty(Te,"ValidationError",{enumerable:!0,get:function(){return Fv.default}});var Vv=Is();Object.defineProperty(Te,"MissingRefError",{enumerable:!0,get:function(){return Vv.default}})});var fc=(t,e)=>(t+e)/2,rs=(t,e)=>Math.random()*(e-t)+t;var ci=(t,e,r)=>Math.max(e,Math.min(t,r)),li=location.hostname==="localhost"||location.hostname==="127.0.0.1";function mc(t,e){if(!t||!e){console.error(t,e);return}let r=t.querySelectorAll(":scope > [data-tab-target]");r.forEach(n=>{n.addEventListener("click",()=>{var i;r.forEach(l=>l.classList.toggle("selected",l===n));let a=n.getAttribute("data-tab-target"),s=e.querySelector(`[data-tab-content="${a}"]`);Array.from(((i=s==null?void 0:s.parentElement)==null?void 0:i.children)||[]).filter(l=>l.hasAttribute("data-tab-content")).forEach(l=>{l.classList.toggle("hidden",l.getAttribute("data-tab-content")!==a)})})})}function Xr(t,e){let r="data-highlight",n=()=>t.removeAttribute(r);switch(t.setAttribute(r,""),e){case"click":t.addEventListener("click",n);break;case"mouseover":t.addEventListener("mouseover",n);break}}var Vt,ns,Ut=class{constructor(){L(this,Vt,new Map);L(this,ns,0)}listen(e,r){let n=ts(this,ns)._++,a={callback:e,id:n,opts:r};return C(this,Vt).set(n,a),n}removeListener(e){C(this,Vt).delete(e)}removeAllListeners(){C(this,Vt).clear()}invoke(e){var r;C(this,Vt).forEach(n=>{n.callback(e)});for(let[n,a]of C(this,Vt).entries())(r=a.opts)!=null&&r.once&&C(this,Vt).delete(n)}};Vt=new WeakMap,ns=new WeakMap;var Bn,Ye,Ht,we=class{constructor(e){L(this,Bn,void 0);L(this,Ye,void 0);L(this,Ht,void 0);F(this,Bn,e),F(this,Ye,e),F(this,Ht,new Ut)}get value(){return C(this,Ye)}get onChange(){return C(this,Ht)}set(e){F(this,Ye,e),C(this,Ht).invoke(C(this,Ye))}get(){return C(this,Ye)}add(e){typeof C(this,Ye)=="number"&&(F(this,Ye,C(this,Ye)+e),C(this,Ht).invoke(C(this,Ye)))}subtract(e){typeof C(this,Ye)=="number"&&(F(this,Ye,C(this,Ye)-e),C(this,Ht).invoke(C(this,Ye)))}reset(){F(this,Ye,C(this,Bn)),C(this,Ht).removeAllListeners()}};Bn=new WeakMap,Ye=new WeakMap,Ht=new WeakMap;var At={None:1<<0,Attack:1<<1,Physical:1<<2,Elemental:1<<3,Chaos:1<<4},ui=[{desc:"#% Increased Physical Damage",tags:["Physical"],stats:[{name:"Damage",valueType:"Inc",flags:At.Physical}]},{desc:"#% More Physical Damage",tags:["Physical"],stats:[{name:"Damage",valueType:"More",flags:At.Physical}]},{desc:"Adds # To # Physical Damage",tags:["Physical"],stats:[{name:"MinDamage",valueType:"Base",flags:At.Physical},{name:"MaxDamage",valueType:"Base",flags:At.Physical}]},{desc:"+#% Hit Chance",stats:[{name:"HitChance",valueType:"Base"}]},{desc:"#% Increased Attack Speed",tags:["Speed"],stats:[{name:"AttackSpeed",valueType:"Inc"}]},{desc:"#% More Attack Speed",tags:["Speed"],stats:[{name:"AttackSpeed",valueType:"More"}]},{desc:"#% Increased Maximum Mana",tags:["Mana"],stats:[{name:"MaxMana",valueType:"Inc"}]},{desc:"+# Maximum Mana",tags:["Mana"],stats:[{name:"MaxMana",valueType:"Base"}]},{desc:"+# Mana Regeneration",tags:["Mana"],stats:[{name:"ManaRegen",valueType:"Base"}]},{desc:"+#% Critical Hit Chance",tags:["Critical"],stats:[{name:"CritChance",valueType:"Base"}]},{desc:"+#% Critical Hit Multiplier",tags:["Critical"],stats:[{name:"CritMulti",valueType:"Base"}]},{desc:"+# Gold Per Second",tags:["Gold"],stats:[{name:"GoldPerSecond",valueType:"Base"}]}],zn,Gn,Kn,Zr,di=class{constructor(e){L(this,zn,void 0);L(this,Gn,void 0);L(this,Kn,[]);L(this,Zr,[]);F(this,zn,e);let r=[...e.matchAll(new RegExp("{(?<v1>\\d+(\\.\\d+)?)(-(?<v2>\\d+(\\.\\d+)?))?\\}","g"))],n=e.replace(/{[^}]+}/g,"#"),a=ui.find(s=>s.desc===n);F(this,Gn,a),F(this,Kn,[...(a==null?void 0:a.tags)||[]]);for(let s of a.stats){let i=r[a.stats.indexOf(s)].groups;if(!i)throw Error();let{v1:l,v2:f}=i,g=parseFloat(l),y=parseFloat(f)||g,$=g;C(this,Zr).push(new wr({name:s.name,valueType:s.valueType,value:$,min:g,max:y,flags:s.flags||0}))}}get desc(){let e=0;return this.templateDesc.replace(/#+/g,r=>{var s;return((s=C(this,Zr)[e++].value)==null?void 0:s.toFixed(r.length-1))||"#"})}get templateDesc(){return C(this,Gn).desc}get tags(){return[...C(this,Kn)]}get stats(){return C(this,Zr)}compare(e){return ui.findIndex(r=>r.desc===this.templateDesc)-ui.findIndex(r=>r.desc===e.templateDesc)}static compare(e,r){return e.compare(r)}copy(){return new di(C(this,zn))}},$t=di;zn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,Zr=new WeakMap;var Wn,Yn,$r,Jn,Er,en,tn,wr=class{constructor(e){L(this,Wn,void 0);L(this,Yn,void 0);L(this,$r,void 0);L(this,Jn,void 0);L(this,Er,void 0);L(this,en,void 0);L(this,tn,void 0);F(this,Wn,e.name),F(this,Yn,e.valueType),F(this,Jn,e.flags),F(this,Er,e.min),F(this,en,e.max),F(this,$r,e.value),F(this,tn,e.source)}get name(){return C(this,Wn)}get valueType(){return C(this,Yn)}get flags(){return C(this,Jn)}get min(){return C(this,Er)}get max(){return C(this,en)}get value(){return C(this,$r)}set value(e){F(this,$r,e)}get source(){return C(this,tn)}set source(e){F(this,tn,e)}randomizeValue(){F(this,$r,Math.random()*(C(this,en)-C(this,Er))+C(this,Er))}};Wn=new WeakMap,Yn=new WeakMap,$r=new WeakMap,Jn=new WeakMap,Er=new WeakMap,en=new WeakMap,tn=new WeakMap;var Bt,Sr,as=class{constructor(){L(this,Bt,void 0);L(this,Sr,new Ut);F(this,Bt,[])}get modList(){return C(this,Bt)}get onChange(){return C(this,Sr)}add(e,r){e.forEach(n=>n.source=r),C(this,Bt).push(...e),C(this,Sr).invoke([...this.modList])}removeBySource(e){F(this,Bt,C(this,Bt).filter(r=>!r||r.source!=e)),C(this,Sr).invoke([...this.modList])}clear(){C(this,Bt).splice(0),C(this,Sr).invoke([...this.modList])}};Bt=new WeakMap,Sr=new WeakMap;var ss={Physical:1<<0,Elemental:1<<1,Chaos:1<<2},Dd=(()=>{let t=[],e=Object.values(ss).reduce((r,n)=>r+n);for(let r=0;r<=e;r++){let n=["Damage"];Object.entries(ss).forEach(([a,s])=>{if(s&r){let i=`${a}Damage`;n.push(i)}}),t.push(n)}return t})();function hc(t){let e={statModList:t,flags:At.Attack,calcMinMax:rs},r=dt("HitChance",e)/100,n=rs(0,1),a=r>=n;if(!a)return{hit:!1};e.flags=At.Attack;let s=mi(e).totalBaseDamage,i=Math.min(dt("CritChance",e),100)/100,l=rs(0,1),f=i>=l,g=1;f&&(g=dt("CritMulti",e)/100);let $=zt("BaseDamageMultiplier",e)/100*g,b=s*$;return{hit:a,crit:f,totalDamage:b}}function mi(t){t.conversionTable=Rd(t);let e={totalBaseDamage:0,minPhysicalDamage:0,maxPhysicalDamage:0,physicalDamage:0,minElementalDamage:0,maxElementalDamage:0,elementalDamage:0,minChaosDamage:0,maxChaosDamage:0,chaosDamage:0},r=0;{t.flags|=At.Physical;let{min:n,max:a}=pc("Physical",t);e.minPhysicalDamage=n,e.maxPhysicalDamage=a;let s=t.calcMinMax(n,a);e.physicalDamage=s,r+=s}return e.totalBaseDamage=r,e}function pc(t,e,r=0){var $;r|=ss[t];let n=0,a=0,s=["Physical","Elemental","Chaos"];for(let b of s){if(b===t)break;let S=(($=e.conversionTable)==null?void 0:$[b])[t];if(S>0){let{min:M,max:T}=pc(b,e,r);n+=Math.ceil(M*S),a+=Math.ceil(T*S)}}let i=zt("MinDamage",e),l=zt("MaxDamage",e),f=Dd[r],g=Math.round(fi(f,i,e)+n),y=Math.round(fi(f,l,e)+a);return{min:g,max:y}}function Rd(t){let e={},r=Object.keys(ss);for(let n=0;n<r.length;n++){let a=r[n],s={},i={},l={},f=0,g=0;for(let $=n+1;$<r.length;$++){let b=r[n],S=`${a}ConvertedTo${b}`;s[b]=zt(S,t),f+=s[b],i[b]=zt(S,t),g+=i[b],l[b]=zt(`${a}GainAs${b}`,t)}if(g>100){let $=100/g;for(let b of Object.keys(i))i[b]*=$}else if(f+g>100){let $=(100-g)/f;for(let b of Object.keys(s))s[b]*=$}let y={multi:1};for(let[$,b]of Object.entries(s)){let S=i[$]||0,M=l[$]||0;y[$]=(b+S+M)/100}y.multi=1-Math.min((f+g)/100,1),e[a]=y}return e.Chaos={multi:1},e}function vc(t){let e={statModList:t,flags:At.Attack,calcMinMax:fc},r=dt("HitChance",e)/100,n=ci(r,0,1),a=dt("AttackSpeed",e),s=zt("BaseDamageMultiplier",e)/100,i=dt("MaxMana",e),l=dt("ManaRegen",e),f=dt("AttackManaCost",e),g=dt("CritChance",e)/100,y=ci(g,0,1),$=Math.max(dt("CritMulti",e),100)/100,b=1+y*$,S=mi(e),M=s*b,T=S.totalBaseDamage*n*a*M;return{hitChance:r*100,clampedHitChance:n*100,attackSpeed:a,critChance:g*100,clampedCritChance:y*100,critMulti:$*100,maxMana:i,manaRegen:l,attackManaCost:f,dps:T,minPhysicalDamage:S.minPhysicalDamage,maxPhysicalDamage:S.maxPhysicalDamage,goldPerSecond:dt("GoldPerSecond",e)}}function zt(t,e){return hi("Base",t,e)}function gc(t,e){return Math.max(0,1+hi("Inc",t,e)/100)}function yc(t,e){return Math.max(0,hi("More",t,e))}function fi(t,e,r){if(e<=0)return 0;let n=gc(t,r),a=yc(t,r);return e*n*a}function dt(t,e){let r=zt(t,e);if(r===0)return 0;let n=gc(t,e),a=yc(t,e);return r*n*a}function hi(t,e,r){e=Array.isArray(e)?e:[e];let n=t==="More"?1:0,a=(i,l)=>(i&l)===l,s=r.statModList.filter(i=>!(!e.includes(i.name)||i.valueType!==t||!a(r.flags,i.flags||0)));for(let i of s){let l=i.value;t==="More"?n*=1+l/100:n+=l}return Math.max(0,n)}var Nd=document.querySelector(".p-combat [data-healthbar]"),Qn=new we(0),nn=new we(0),rn=0,pi=new Ut;function _c(t){nn.onChange.removeAllListeners(),nn.onChange.listen(e=>{e<=0&&(rn=Math.min(rn+1,t.enemyList.length-1),pi.invoke(rn),Qn.set(t.enemyList[rn]),nn.set(Qn.get())),Ad()}),rn=0,Qn.set(t.enemyList[rn]),nn.set(Qn.get())}function bc(t){nn.subtract(t)}function Ad(){let t=nn.get()/Qn.get()*100;Nd.style.width=t+"%"}var an=(t,e)=>{let r=new IntersectionObserver(n);return r.observe(t),r;function n(a){a.forEach(s=>{e(s.isIntersecting)})}};var ir={"Time Played":{value:new we(0),formatType:"time"},"Gold Generated":{value:new we(0)},"Mana Generated":{value:new we(0)},Hits:{value:new we(0)},"Critical Hits":{value:new we(0)},"Total Damage":{value:new we(0)},"Total Physical Damage":{value:new we(0)},"Prestige Count":{value:new we(0)}},$c;an(document.querySelector(".p-game .p-statistics"),Od);function Od(t){t?(Object.entries(ir).forEach(([e,r])=>Ec(e,r.value)),$c=Oe.subscribe(()=>Object.entries(ir).forEach(([e,r])=>Ec(e,r.value)),{intervalMilliseconds:1e3})):Oe.unsubscribe($c)}function Sc(){let t=[],e=r=>{let n=document.createElement("li");n.classList.add("g-field","hidden");let a=document.createElement("div");n.appendChild(a);let s=document.createElement("var");return n.appendChild(s),a.textContent=r,s.setAttribute("data-stat",r),s.setAttribute("data-format-type",ir[r].formatType||""),n};for(let r of Object.keys(ir)){let n=e(r);t.push(n)}document.querySelector(".p-statistics ul").replaceChildren(...t)}function Ec(t,e){let r=document.querySelector(`.p-statistics [data-stat="${t}"]`);if(!r)return;let n=e.get()===0;if(r.parentElement.classList.toggle("hidden",n),n)return;switch(r.getAttribute("data-format-type")){case"time":let s=new Date(null);s.setSeconds(e.get());let i=s.toISOString().substring(11,19);r.textContent=i;break;default:r.textContent=e.get().toFixed(0)}}function wc(t){t.statistics=Object.entries(ir).map(([e,r])=>({name:e,value:r.value.get()}))}function Cc(t){t.statistics.forEach(e=>ir[e.name].value.set(e.value))}var Le=Object.fromEntries(Object.keys(ir).map(t=>[t,ir[t].value]));var is=document.querySelector(".p-game > .s-stats"),kd=document.querySelector(".p-combat [data-manabar]"),Tc,Je=new as;Je.onChange.listen(Pc);var H=Object.freeze({level:new we(1),gold:new we(0),goldPerSecond:new we(0),attackSpeed:new we(0),attackManaCost:new we(0),maxMana:new we(0),curMana:new we(0),manaRegen:new we(0)});H.level.onChange.listen(t=>is.querySelector('[data-stat="level"]').textContent=t.toString());H.gold.onChange.listen(t=>is.querySelector('[data-stat="gold"]').textContent=t.toString());H.curMana.onChange.listen(()=>{let t=H.maxMana.get();H.curMana.get()>t&&H.curMana.set(t),qd()});pi.listen(t=>{let e=t+1;e!==H.level.get()&&H.level.set(e)});function Mc(t){t&&t.modList.forEach(e=>{Je.add(new $t(e).stats,"Player")}),Oe.subscribe(()=>{let e=H.goldPerSecond.get();H.gold.add(e),Le["Gold Generated"].add(e)},{intervalMilliseconds:1e3}),Oe.subscribe(e=>{let r=H.manaRegen.get()*e;H.curMana.add(r),Le["Mana Generated"].add(r)}),Ld()}async function vi(){await Pc(),H.curMana.set(H.maxMana.get())}async function Pc(){return new Promise(t=>{clearTimeout(Tc),Tc=setTimeout(async()=>{let e=vc(Je.modList);H.attackSpeed.set(e.attackSpeed),H.goldPerSecond.set(e.goldPerSecond),H.maxMana.set(e.maxMana),H.manaRegen.set(e.manaRegen),H.attackManaCost.set(e.attackManaCost),is.querySelector('[data-stat="dps"]').textContent=e.dps.toFixed(),is.querySelectorAll("[data-stat]").forEach(r=>{let n=r.getAttribute("data-stat"),a=e[n];if(typeof a=="number"){let s=Number(r.getAttribute("data-digits")||0);r.textContent=a.toFixed(s)}}),t(null)},1)})}function qd(){let t=H.curMana.get()/H.maxMana.get()*100;kd.style.width=t+"%"}function Ld(){let t=0;Oe.subscribe(e=>{let r=H.attackSpeed.get();if(typeof r!="number")throw Error();if(t+=e*r,t>=1){let n=H.curMana.get(),a=H.attackManaCost.get();n>a&&(t-=1,H.curMana.subtract(a),xd())}})}function xd(){let t=hc(Je.modList);!t.hit||(Le.Hits.add(1),Le["Total Damage"].add(t.totalDamage),Le["Total Physical Damage"].add(t.totalDamage),t.crit&&Le["Critical Hits"].add(1),bc(t.totalDamage))}function Ic(t){t.player={level:H.level.get(),gold:H.gold.get(),curMana:H.curMana.get()}}function Dc(t){H.level.set(t.player.level),H.gold.set(t.player.gold),H.curMana.set(t.player.curMana),vi()}var Rc;(Rc=document.querySelector(".p-skills .s-skill-info [data-enable]"))==null||Rc.addEventListener("click",()=>Cr.selected.enable());var sn=[];function Nc(t){var e,r;if(t.skillList.sort((n,a)=>n.levelReq-a.levelReq),t.skillList[0].levelReq>1)throw new Error("Skill levelReq at 0 index must have a minimum value of 1");for(let n of t.skillList){let a=((e=n.mods)==null?void 0:e.map(i=>new $t(i)))||[],s=new Cr({name:n.name,levelReq:n.levelReq,attackSpeed:n.attackSpeed,manaCost:n.manaCost,baseDamageMultiplier:n.baseDamageMultiplier,mods:a});sn.push(s)}(r=document.querySelector(".p-skills ul[data-skill-list]"))==null||r.replaceChildren(...sn.map(n=>n.element)),sn[0].select(),sn[0].enable()}var cr,on,Tr,Mr,Pr,Xn,lr,Zn,ea,gi,os,Ac,or=class{constructor(e){L(this,ea);L(this,os);L(this,cr,void 0);L(this,on,void 0);L(this,Tr,void 0);L(this,Mr,void 0);L(this,Pr,void 0);L(this,Xn,void 0);L(this,lr,void 0);L(this,Zn,void 0);F(this,cr,e.name),F(this,on,e.levelReq),F(this,Tr,e.attackSpeed),F(this,Mr,e.baseDamageMultiplier),F(this,Pr,e.manaCost),F(this,Xn,e.mods),F(this,lr,qe(this,os,Ac).call(this)),F(this,Zn,H.level.onChange.listen(()=>qe(this,ea,gi).call(this))),qe(this,ea,gi).call(this)}get name(){return C(this,cr)}get levelReq(){return C(this,on)}get attackSpeed(){return C(this,Tr)}get baseDamageMultiplier(){return C(this,Mr)}get manaCost(){return C(this,Pr)}get mods(){return C(this,Xn)}get element(){return C(this,lr)}get sourceName(){return`Skills/${C(this,cr)}`}select(){or.selected=this,document.querySelectorAll(".p-skills ul[data-skill-list] li").forEach(e=>{e.classList.toggle("selected",e===C(this,lr))}),this.show()}enable(){var e;document.querySelectorAll(".p-skills ul[data-skill-list] li").forEach(r=>{r.classList.toggle("enabled",r===C(this,lr))}),Je.removeBySource((e=or.enabled)==null?void 0:e.sourceName),or.enabled=this,Je.add([new wr({name:"BaseDamageMultiplier",valueType:"Base",value:C(this,Mr)})],this.sourceName),Je.add([new wr({name:"AttackSpeed",valueType:"Base",value:C(this,Tr)})],this.sourceName),Je.add([new wr({name:"AttackManaCost",valueType:"Base",value:C(this,Pr)})],this.sourceName),this.mods.forEach(r=>Je.add(r.stats,this.sourceName)),this.show()}show(){var n;document.querySelector(".p-skills .s-skill-info [data-title]").textContent=C(this,cr),document.querySelector('.p-skills .s-skill-info [data-stat="attackSpeed"]').textContent=C(this,Tr).toFixed(2),document.querySelector('.p-skills .s-skill-info [data-stat="manaCost"]').textContent=C(this,Pr).toFixed(0),document.querySelector('.p-skills .s-skill-info [data-stat="baseDamageMultiplier"]').textContent=C(this,Mr).toFixed(0)+"%";let e=[];for(let a of this.mods){let s=document.createElement("div");s.classList.add("g-mod-desc"),s.textContent=a.desc,e.push(s)}(n=document.querySelector(".p-skills .s-skill-info [data-mod-list]"))==null||n.replaceChildren(...e);let r=document.querySelector(".p-skills [data-enable]");r.toggleAttribute("disabled",this===or.enabled),r.textContent=this===or.enabled?"Enabled":"Enable",this.element.classList.toggle("enabled",this===or.enabled)}},Cr=or;cr=new WeakMap,on=new WeakMap,Tr=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,Xn=new WeakMap,lr=new WeakMap,Zn=new WeakMap,ea=new WeakSet,gi=function(){C(this,on)>H.level.get()||(C(this,lr).classList.remove("hidden"),H.level.onChange.removeListener(C(this,Zn)))},os=new WeakSet,Ac=function(){let e=document.createElement("li");return e.textContent=C(this,cr),e.classList.add("g-list-item","hidden"),e.addEventListener("click",()=>{document.querySelectorAll(".p-skills ul[data-skill-list]").forEach(r=>{r.classList.toggle("selected",r===e)}),this.select(),this.show()}),e},Nt(Cr,"enabled"),Nt(Cr,"selected");function Oc(t){t.skills={activeSkillName:Cr.enabled.name}}function kc(t){let e=sn.find(r=>r.name===t.skills.activeSkillName)||sn[0];e.select(),e.enable()}var Ir,Dr,cn,cs,ta=class{constructor(){L(this,Ir,new Map);L(this,Dr,!1);L(this,cn,void 0);L(this,cs,0)}get running(){return C(this,Dr)}subscribe(e,r){let n=ts(this,cs)._++,a={callback:e,time:0,id:n,options:r};return C(this,Ir).set(n,a),n}unsubscribe(e){C(this,Ir).delete(e)}reset(){C(this,Ir).clear(),F(this,Dr,!1)}start(){this.running||(F(this,Dr,!0),this.beginLoop())}stop(){F(this,Dr,!1),clearTimeout(C(this,cn))}beginLoop(){let e=0,r=performance.now(),n=()=>{clearTimeout(C(this,cn)),F(this,cn,setTimeout(()=>{let a=performance.now()-r+e;for(r=performance.now();a>40;){let s=Math.min(a,40);a-=40;let i=s/1e3;C(this,Ir).forEach(l=>{var g;l.time+=s;let f=((g=l.options)==null?void 0:g.intervalMilliseconds)||0;l.time>f&&(l.callback(i),l.time-=f||l.time)})}n()},40))};n()}};Ir=new WeakMap,Dr=new WeakMap,cn=new WeakMap,cs=new WeakMap;var jd=6,Fd=20,Vd=.02,Rr={reforge:{desc:"Reforge the item with new random modifiers",validate:t=>new xe().modsIsNotEmpty(t.modTables.general),getItemMods:t=>new je().addMultiple(t.modTables.general,ln(0)).modList},reforgeIncludePhysical:{desc:"Reforge the item with new random modifiers, including a [physical] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Physical"),getItemMods:t=>new je().addOneByTag(t.modTables.general,"Physical").addMultiple(t.modTables.general,ln(1)).modList},reforgeIncludeMana:{desc:"Reforge the item with new random modifiers, including a [mana] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Mana"),getItemMods:t=>new je().addOneByTag(t.modTables.general,"Mana").addMultiple(t.modTables.general,ln(1)).modList},reforgeIncludeCritical:{desc:"Reforge the item with new random modifiers, including a [critical] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).modsContainsTag(t.modTables.general,"Critical"),getItemMods:t=>new je().addOneByTag(t.modTables.general,"Critical").addMultiple(t.modTables.general,ln(1)).modList},reforgeHigherChanceSameMods:{desc:"Reforge the item with a higher chance of receiving the same modifiers",validate:t=>new xe().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>{let e=[...t.modTables.general].reduce((r,n)=>(t.itemModList.some(a=>a===n)&&(n.weight*=Fd),r.push(n),r),[]);return new je().addMultiple(e,ln(0)).modList}},reforgeLowerChanceSameMods:{desc:"Reforge the item with a lower chance of receiving the same modifiers",validate:t=>new xe().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>{let e=[...t.modTables.general].reduce((r,n)=>(t.itemModList.some(a=>a===n)&&(n.weight*=Vd),r.push(n),r),[]);return new je().addMultiple(e,ln(0)).modList}},addRandom:{desc:"Add a random modifier",validate:t=>new xe().itemHasSpaceForMods(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>new je(t.itemModList).addOne(t.modTables.general).modList},addPhysical:{desc:"Add a [physical] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Physical"),getItemMods:t=>new je(t.itemModList).addOneByTag(t.modTables.general,"Physical").modList},addMana:{desc:"Add a [mana] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Mana"),getItemMods:t=>new je(t.itemModList).addOneByTag(t.modTables.general,"Mana").modList},addCritical:{desc:"Add a [critical] modifier",validate:t=>new xe().modsIsNotEmpty(t.modTables.general).itemHasSpaceForMods(t.itemModList).itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Critical"),getItemMods:t=>new je(t.itemModList).addOneByTag(t.modTables.general,"Critical").modList},removeRandom:{desc:"Remove a random modifier",validate:t=>new xe().itemHasModifiers(t.itemModList),getItemMods:t=>new je(t.itemModList).removeRandom().modList},removeRandomAddRandom:{desc:"Remove a random modifier and add a new random modifier",validate:t=>new xe().itemHasModifiers(t.itemModList).modsIsNotEmpty(t.modTables.general),getItemMods:t=>new je(t.itemModList).removeRandom().addOne(t.modTables.general).modList},removeRandomAddPhysical:{desc:"Remove a random modifier and add a new [physical] modifier",validate:t=>new xe().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Physical").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Physical"),getItemMods:t=>new je(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Physical").modList},removeRandomAddMana:{desc:"Remove a random modifier and add a new [mana] modifier",validate:t=>new xe().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Mana").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Mana"),getItemMods:t=>new je(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Mana").modList},removeRandomAddCritical:{desc:"Remove a random modifier and add a new [critical] modifier",validate:t=>new xe().itemHasModifiers(t.itemModList).modsContainsTag(t.modTables.general,"Critical").itemCanCraftModWithTag(t.itemModList,t.modTables.general,"Critical"),getItemMods:t=>new je(t.itemModList).removeRandom().addOneByTag(t.modTables.general,"Critical").modList}},xe=class{constructor(){Nt(this,"errors",[]);this.errors=[]}itemHasSpaceForMods(e){return e.length>=jd&&this.errors.push("Item cannot have any more modifiers"),this}itemHasModifiers(e){return e.length===0&&this.errors.push("Item has no modifiers"),this}itemCanCraftModWithTag(e,r,n){return r.filter(s=>{var i;return((i=s.tags)==null?void 0:i.includes(n))&&!e.some(l=>l.compare(s))}).length===0&&this.errors.push(`There are no ${n} modifiers available`),this}modsIsNotEmpty(e){return e.length===0&&this.errors.push("No modifiers available"),this}modsContainsTag(e,r){return e.some(n=>{var a;return(a=n.tags)==null?void 0:a.includes(r)})||this.errors.push(`No modifier was available with the tag: ${r}`),this}},un,ls,us,qc,je=class{constructor(e=[]){L(this,un);L(this,us);Nt(this,"modList");this.modList=[...e]}addOne(e){return this.modList.push(...qe(this,un,ls).call(this,e,this.modList,1)),this}addOneByTag(e,r){return e=e.filter(n=>{var a;return(a=n.tags)==null?void 0:a.includes(r)}),this.modList.push(...qe(this,un,ls).call(this,e,this.modList,1)),this}addMultiple(e,r){return this.modList.push(...qe(this,un,ls).call(this,e,this.modList,r)),this}removeRandom(){let e=qe(this,us,qc).call(this,0,this.modList.length);return this.modList.splice(e,1),this}};un=new WeakSet,ls=function(e,r=[],n){let a=[];for(let s=0;s<n;s++){let i=[...a,...r];e=e.filter(g=>!i.some(y=>g.templateDesc===y.templateDesc));let l=e.reduce((g,y)=>g+=y.weight,0),f=Math.random()*l;for(let g of e)if(l-=g.weight,l<=f){let y=g.copy();y.stats.forEach($=>$.randomizeValue()),console.log(y.desc),a.push(y);break}}return a},us=new WeakSet,qc=function(e,r){return Math.floor(Math.random()*(r-e)+e)};var ln=(t=0)=>{let e=[0,0,40,50,30,20].slice(t,6),r=e.reduce((a,s)=>a+s),n=Math.random()*r;for(let a=0;a<e.length;a++)if(r-=e[a],r<=n)return a+1;throw Error()};var dn=document.querySelector(".p-items [data-preset-modal]"),Lc;(Lc=dn.querySelector('input[type="submit"]'))==null||Lc.addEventListener("click",()=>{var t;return(t=ze.active)==null?void 0:t.apply()});document.querySelector(".p-items .s-craft-container [data-craft-button]").addEventListener("click",()=>zd());document.querySelector(".p-items .s-preset-container [data-new]").addEventListener("click",()=>Ud());document.querySelector(".p-items .s-preset-container [data-edit]").addEventListener("click",()=>{var t;return(t=ze.active)==null?void 0:t.edit()});document.querySelector(".p-items .s-preset-container [data-remove]").addEventListener("click",()=>{var t;return(t=ze.active)==null?void 0:t.delete()});an(document.querySelector(".p-items"),()=>{mn()});var _i=[],fn=[],kr;function xc(t){var r,n;for(let a of t.modTables.general)for(let s=0;s<a.length;s++){let i=a[s];_i.push(new yi(i,a))}for(let a of t.itemList){let s=new kt(a);fn.push(s);let i=()=>H.level.get()<s.levelReq;if(i()){let l=H.level.onChange.listen(()=>{i()||(s.unlock(),H.level.onChange.removeListener(l))})}s.element.classList.toggle("hidden",i())}(r=document.querySelector(".p-items [data-item-list]"))==null||r.replaceChildren(...fn.map(a=>a.element)),Hd(t.craftList),Bd(t.craftList),new ze("All",Object.keys(Rr)).select(),new ze("Reforge",["reforge","reforgeIncludePhysical","reforgeIncludeMana","reforgeIncludeCritical"]),fn[0].element.click(),H.gold.onChange.listen(bi);let e=((n=t.unlockWhen)==null?void 0:n.level)||1;if(e<=H.level.get())document.querySelector('.p-game menu [data-tab-target="items"]').classList.remove("hidden");else{let a=H.level.onChange.listen(s=>{if(s>=e){H.level.onChange.removeListener(a);let i=document.querySelector('.p-game menu [data-tab-target="items"]');i.classList.remove("hidden"),Xr(i,"click")}})}}function Ud(){let t=new ze("New Preset",[]);t.select(),t.edit()}function Hd(t){var r;let e=jc(t);e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(s=>{s.classList.toggle("selected",s===n)});let a=n.getAttribute("data-craft-id");kr=t.find(s=>s.id===a),bi()})}),mn(),H.gold.onChange.listen(()=>{document.querySelector(".p-items").classList.contains("hidden")||mn()}),(r=document.querySelector(".p-items .s-craft-container [data-craft-list]"))==null||r.replaceChildren(...e)}function Bd(t){var r;let e=jc(t);e.forEach(n=>{n.addEventListener("click",()=>{n.classList.toggle("selected",!n.classList.contains("selected"))})}),(r=document.querySelector(".p-items [data-preset-modal] [data-craft-list]"))==null||r.replaceChildren(...e)}function jc(t){let e=[];for(let r of t){let n=document.createElement("li");n.classList.add("g-field","g-list-item");let a=Rr[r.id].desc.replace(/\[\w+\]/g,s=>`<span>${s.substring(1,s.length-1)}</span>`);n.insertAdjacentHTML("beforeend",`<div>${a}</div>`),n.insertAdjacentHTML("beforeend",`<i data-cost="${r.cost}">${r.cost}</i>`),n.setAttribute("data-craft-id",r.id),e.push(n)}return e}function Fc(){var t,e;if((t=kt.active)!=null&&t.mods){let r=[];for(let n of kt.active.mods.sort($t.compare)){let a=n.desc,s=document.createElement("li");s.classList.add("g-mod-desc"),s.textContent=a,r.push(s)}(e=document.querySelector(".p-items [data-mod-list]"))==null||e.replaceChildren(...r)}}function mn(){var n;if(!ze.active)return;let t=ze.active.ids;document.querySelectorAll(".p-items .s-craft-container [data-craft-id]").forEach(a=>{let s=a.getAttribute("data-craft-id"),i=!t.includes(s);if(a.classList.toggle("hidden",i),!i){let l=a.querySelector("i"),f=l.getAttribute("data-cost"),g=parseInt(f),y=H.gold.get()>=g;l.toggleAttribute("data-insufficient-cost",!y)}}),document.querySelector(".p-items .s-craft-container .selected[data-craft-id]:not(.hidden)")||(n=document.querySelector(".p-items .s-craft-container [data-craft-id]:not(.hidden)"))==null||n.click()}function Vc(){return{itemModList:kt.active.mods,modTables:{general:_i.filter(t=>t.levelReq<=H.level.get())}}}function bi(){if(!kt.active||!Rr[kr.id])return;let t="",e=Rr[kr.id];if(!e){console.error("invalid craft id");return}H.gold.get()<kr.cost&&(t="You cannot afford this craft");let r=Vc(),n=e.validate(r);n.errors.length>0&&(t=n.errors[0]),document.querySelector(".p-items .s-craft-container [data-craft-message]").textContent=t,document.querySelector(".p-items .s-craft-container [data-craft-button]").toggleAttribute("disabled",t.length>0)}function zd(){if(!kt.active||!Rr[kr.id])return;console.log("perform craft");let t=Rr[kr.id],e=Vc();kt.active.mods=t.getItemMods(e),H.gold.subtract(kr.cost),Fc()}var ra,na,Ar,aa,hn,ds,Uc,$i=class{constructor({name:e,levelReq:r}){L(this,ds);L(this,ra,void 0);L(this,na,void 0);L(this,Ar,void 0);L(this,aa,void 0);L(this,hn,void 0);F(this,ra,e),F(this,na,r),F(this,Ar,[]),F(this,aa,qe(this,ds,Uc).call(this)),F(this,hn,`Skills/${e}`)}get name(){return C(this,ra)}get levelReq(){return C(this,na)}get mods(){return[...C(this,Ar)]}set mods(e){Je.removeBySource(C(this,hn)),F(this,Ar,e),Je.add(C(this,Ar).flatMap(r=>r.stats),C(this,hn))}get element(){return C(this,aa)}unlock(){this.element.classList.remove("hidden")}},kt=$i;ra=new WeakMap,na=new WeakMap,Ar=new WeakMap,aa=new WeakMap,hn=new WeakMap,ds=new WeakSet,Uc=function(){let e=document.createElement("li");return e.classList.add("g-list-item","item"),e.textContent=this.name,e.addEventListener("click",()=>{$i.active=this,document.querySelectorAll(".p-items [data-item-list] .item").forEach(r=>{r.classList.toggle("selected",r===e)}),Fc(),bi()}),e},Nt(kt,"active");var sa,ia,pn,oa,vn,Ei=class extends $t{constructor(r,n){super(r.mod);L(this,sa,void 0);L(this,ia,void 0);L(this,pn,void 0);L(this,oa,void 0);L(this,vn,void 0);F(this,sa,r),F(this,ia,r.levelReq),F(this,pn,r.weight),F(this,oa,n.findIndex(a=>a===r)),F(this,vn,n)}get levelReq(){return C(this,ia)}get weight(){return C(this,pn)}set weight(r){F(this,pn,r)}get tier(){let r=C(this,vn).filter(n=>n.levelReq<=H.level.get()).length-1;return Math.max(1,r-C(this,oa))}copy(){return new Ei(C(this,sa),C(this,vn))}},yi=Ei;sa=new WeakMap,ia=new WeakMap,pn=new WeakMap,oa=new WeakMap,vn=new WeakMap;var Or,gn,Ot,fs,Hc,ms,Bc,Nr=class{constructor(e,r=[]){L(this,fs);L(this,ms);L(this,Or,void 0);L(this,gn,void 0);L(this,Ot,void 0);F(this,Or,e),F(this,gn,[...r]),F(this,Ot,qe(this,fs,Hc).call(this)),this.setName(this.name),Nr.all.push(this)}get name(){return C(this,Or)}get ids(){return C(this,gn)}select(){C(this,Ot).click()}setName(e){F(this,Or,e.replace(/[^A-Za-z 0-9]/g,"")),C(this,Ot).textContent=this.name}edit(){qe(this,ms,Bc).call(this)}delete(){var e,r;Nr.active=null,C(this,Ot).previousElementSibling?(e=C(this,Ot).previousElementSibling)==null||e.click():(r=C(this,Ot).nextElementSibling)==null||r.click(),C(this,Ot).remove(),Nr.all.splice(Nr.all.findIndex(n=>n===this),1),mn()}apply(){this.setName(dn.querySelector("[data-name]").value),F(this,gn,Array.from(dn.querySelectorAll("[data-craft-list] [data-craft-id].selected")).map(e=>e.getAttribute("data-craft-id"))),mn()}},ze=Nr;Or=new WeakMap,gn=new WeakMap,Ot=new WeakMap,fs=new WeakSet,Hc=function(){var r;let e=document.createElement("li");return e.classList.add("g-list-item","preset"),e.addEventListener("click",()=>{Nr.active=this,document.querySelectorAll(".p-items [data-preset-list] li").forEach(n=>{n.classList.toggle("selected",n===e)}),mn()}),(r=document.querySelector(".p-items [data-preset-list]"))==null||r.appendChild(e),e},ms=new WeakSet,Bc=function(){dn.querySelector("input[data-name]").value=C(this,Or),dn.querySelectorAll("[data-craft-list] [data-craft-id]").forEach(e=>{e.classList.toggle("selected",this.ids.includes(e.getAttribute("data-craft-id")))}),dn.showModal()},Nt(ze,"all",[]),Nt(ze,"active");function zc(t){let e=r=>r.mods.map(n=>({desc:n.templateDesc,values:n.stats.map(a=>a.value)}));t.items={items:fn.map(r=>({name:r.name,modList:e(r)})),craftPresets:ze.all.map(r=>({name:r.name,ids:r.ids}))}}function Gc(t){var e,r;ze.all.forEach(n=>n.delete());for(let n of t.items.items){let a=fn.find(s=>s.name===n.name);if(!a){console.error("Invalid item name",n.name);continue}a.mods=n.modList.map(s=>{var l;let i=(l=_i.find(f=>s.desc===f.templateDesc))==null?void 0:l.copy();return i.stats.forEach((f,g)=>f.value=s.values[g]),i})}for(let n of t.items.craftPresets)new ze(n.name,n.ids);(e=ze.all[0])==null||e.select(),(r=fn[0])==null||r.element.click()}var Gd=[[/^Reach Level {(\d+)}$/,()=>H.level.get().toFixed()],[/^Prestige {\d+}?$/,()=>Le["Prestige Count"].get().toFixed()],[/^Deal Damage {(\d+)}$/,()=>Le["Total Damage"].get().toFixed()],[/^Deal Physical Damage {(\d+)}$/,()=>Le["Total Physical Damage"].get().toFixed()],[/^Perform Hits {(\d+)}$/,()=>Le.Hits.get().toFixed()],[/^Perform Critical Hits {(\d+)}$/,()=>Le["Critical Hits"].get().toFixed()],[/^Generate Gold {(\d+)}$/,()=>Le["Gold Generated"].get().toFixed()],[/^Regenerate Mana {(\d+)}$/,()=>Le["Mana Generated"].get().toFixed()]],yn=[],Kc=-1;an(document.querySelector(".p-game .p-achievements"),Kd);function Wc(t){var r;yn.splice(0);for(let n of t.list)yn.push(new Si(n));document.querySelector(".p-achievements ul").replaceChildren(...yn.map(n=>n.element)),Oe.subscribe(()=>{yn.filter(n=>!n.completed).forEach(n=>{n.validate()&&n.complete()})},{intervalMilliseconds:1e3});let e=((r=t.unlockWhen)==null?void 0:r.level)||1;if(e<=H.level.get())document.querySelector('.p-game menu [data-tab-target="achievements"]').classList.remove("hidden");else{let n=H.level.onChange.listen(a=>{if(a>=e){H.level.onChange.removeListener(n);let s=document.querySelector('.p-game menu [data-tab-target="achievements"]');s.classList.remove("hidden"),Xr(s,"click")}})}}function Kd(t){t?(yn.forEach(e=>e.updateDescription()),Kc=Oe.subscribe(()=>yn.forEach(e=>e.updateDescription()),{intervalMilliseconds:1e3})):Oe.unsubscribe(Kc)}var ur,Gt,_n,dr,qr,fr,Kt,hs,Yc,ps,Jc,vs,Qc,Si=class{constructor(e){L(this,hs);L(this,ps);L(this,vs);L(this,ur,!1);L(this,Gt,void 0);L(this,_n,void 0);L(this,dr,void 0);L(this,qr,void 0);L(this,fr,void 0);L(this,Kt,void 0);F(this,qr,e.description.replace(/[{}]/g,"")),F(this,fr,[...(e==null?void 0:e.modList)||[]]);let r=Gd.find(a=>a[0].exec(e.description));if(!r)throw Error("no achievement validator found");F(this,Gt,r);let n=r[0].exec(e.description);F(this,dr,Number(n[1])),F(this,_n,e.description.match(/{\d+}/).index),F(this,Kt,qe(this,vs,Qc).call(this))}get completed(){return C(this,ur)}get modList(){return C(this,fr)}get element(){return C(this,Kt)}updateDescription(){C(this,ur)||(C(this,Kt).querySelector("[data-cur-value]").textContent=C(this,Gt)[1]())}validate(){if(C(this,ur))return;let e=Number(C(this,Gt)[1]()),r=!1;return C(this,Gt)[2]?r=C(this,Gt)[2](e,C(this,dr)):r=e>=C(this,dr),r}complete(){F(this,ur,!0),qe(this,hs,Yc).call(this),qe(this,ps,Jc).call(this),C(this,Kt).querySelector("var").toggleAttribute("data-valid",C(this,ur)),console.log("test"),Xr(document.querySelector('.p-game menu [data-tab-target="achievements"]'),"click"),Xr(C(this,Kt),"mouseover")}};ur=new WeakMap,Gt=new WeakMap,_n=new WeakMap,dr=new WeakMap,qr=new WeakMap,fr=new WeakMap,Kt=new WeakMap,hs=new WeakSet,Yc=function(){let e=C(this,fr).map(r=>new $t(r));Je.add(e.flatMap(r=>r.stats),"Achievement/"+C(this,qr))},ps=new WeakSet,Jc=function(){let e=C(this,Kt).querySelector("var"),r=e.innerHTML,n=r.indexOf("</span>");e.innerHTML=r.substring(n+8)},vs=new WeakSet,Qc=function(){let e=document.createElement("li");e.classList.add("g-accordion");let r=document.createElement("div");if(e.appendChild(r),r.classList.add("header"),r.insertAdjacentHTML("beforeend",`<div>${C(this,qr).substring(0,C(this,_n))}<var><span data-cur-value>${C(this,Gt)[1]()}</span>/${C(this,dr).toString()}</var>${C(this,qr).substring(C(this,_n)+C(this,dr).toString().length)}</div>`),C(this,fr).length>0){let n=document.createElement("div");e.appendChild(n),n.classList.add("content");for(let a of C(this,fr))n.insertAdjacentHTML("beforeend",`<div class="g-mod-desc">${a.replace(/[{}]/g,"")}</div>`);r.insertAdjacentHTML("beforeend","<i></i>"),r.addEventListener("click",()=>{r.toggleAttribute("data-open")})}return e};function wi(t){t.items&&xc(t.items),t.achievements&&Wc(t.achievements)}var Ti=dc(Zc(),1);async function Mi(){let t={};Ic(t),Oc(t),zc(t),wc(t);let e=btoa(JSON.stringify(t));if(e!==null){let r=new Blob([e],{type:"text/plain"});await Ti.default.setItem("ts-game",r)}else return!1;return!0}async function Pi(){let t=await Ti.default.getItem("ts-game");if(!t)return;let e=await t.text(),r=JSON.parse(atob(e));kc(r),Gc(r),Cc(r),Dc(r)}mc(document.querySelector(".p-game > menu"),document.querySelector(".p-game"));li&&(globalThis.dev={game:{playerStats:H,save:Mi,load:Pi}},document.addEventListener("keydown",t=>{t.code==="Space"&&(Oe.running?(document.title="Tinkerers Subject (Stopped)",Oe.stop()):(Oe.start(),document.title="Tinkerers Subject (Running)"))}));var Oe=new ta;async function el(t){Oe.reset(),_c(t.enemies),Mc(t.player),Nc(t.skills),wi({items:t.items,achievements:t.achievements}),Oe.subscribe(()=>{Le["Time Played"].add(1)},{intervalMilliseconds:1e3}),await vi(),Sc(),li||(Oe.start(),Oe.subscribe(()=>{Mi()},{intervalMilliseconds:6e4}),await Pi())}var bd=dc(yd(),1),_d=new bd.default;Uv();async function Uv(){var n;let t=await(await fetch("public/gconfig/schema.json")).json(),e=await(await fetch("public/gconfig/demo.json")).json();if(!_d.validate(t,e)){console.error(_d.errors);return}await el(e),(n=document.querySelector(".p-game menu li:nth-child(1)[data-tab-target]"))==null||n.click(),document.body.classList.remove("hidden")}})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
//# sourceMappingURL=main.js.map
